
























matrix
matrix,shapes,backgrounds












.tifpng.png`convert #1 `dirname #1`/`basename #1 .tif`.png















 


com

yes


        [t]1in[footnote]



yes






equationsection

cl


theorem[equation]Theorem
*theorem'Main Theorem
*theoremnnTheorem
question[equation]Question
questions[equation]Question
prop[equation]Proposition
reductionReduction
claim[equation]Claim
*clamClaim
cor[equation]Corollary
lemma[equation]Lemma
*GromovGromov's Lemma
thmiTheorem

*namedtheorem

named[1]

definition
definition[equation]Definition
*remRemark
remark[equation]Remark
convention[equation]Convention
example[equation]Example
facts[equation]Facts






(
    [
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    Mathematics and Statistics Dept., University of North Carolina at Greensboro, Greensboro, NC 27412, USAt_fernos@uncg.eduDept. of Mathematics, Temple University, Philadelphia, PA 19122, USAdfuter@temple.eduSchool of Mathematics, University of Bristol, Bristol BS8 1UG, UKmarkfhagen@posteo.net
    A finite-dimensional CAT(0) cube complex X is equipped with several well-studied boundaries. These include the 
    Tits boundaryX (which depends on the CAT(0) metric), the Roller boundaryX (which 
    depends only on the combinatorial structure), and the simplicial boundaryX (which also depends only on the combinatorial structure). We use a partial order on a certain quotient of 
    X to define a simplicial Roller boundary  X. Then, we show that X, X, and X are all homotopy equivalent, (X)â€“equivariantly up to 
    homotopy. As an application, we deduce that the perturbations of the CAT(0) metric introduced by Qing do not affect the equivariant homotopy type of the Tits boundary. Along the way, we develop a 
    self-contained exposition providing a dictionary among different perspectives on cube complexes.
    Homotopy equivalent boundaries of cube complexes
        Mark Hagen
        March 30, 2023
    ================================================
    
    
    
    Â§ INTRODUCTION
    
    
    CAT(0) cube complexes, which exist in many guises in discrete mathematics (see e.g. <cit.>), were introduced into 
    group theory by Gromov <cit.> and have since taken on a central role in that field.  As 
    combinatorial objects, CAT(0) cube complexes are ubiquitous due to their flexible, functorial construction from set-theoretic data <cit.>.  This has led to an 
    industry of cubulating groups, i.e. 
    constructing group actions on CAT(0) cube complexes in order to transfer  information from the highly organized cubical structure to the group.  Probably the best known application of this method is the resolution of the virtual 
    Haken and virtual fibering conjectures in 3â€“manifold theory <cit.>.
    
    The utility of CAT(0) cube complexes comes from the fact that they simultaneously exhibit several types of structures.  They have an organized combinatorial structure coming from their hyperplanes/half-spaces; this is closely 
    related to the very tractable geometry of their 1â€“skeleta, which are median graphs<cit.>.  On the other 
    hand, endowing the complex with the piecewise-Euclidean metric in which cubes are Euclidean unit cubes, one gets a CAT(0) 
    space.  So, in studying CAT(0) cube complexes, and groups acting on them, one has a wide variety of tools.
    
    This paper is about the interplay between the CAT(0) and combinatorial structures, at the level of boundaries.    
    We construe the term â€œboundaryâ€ broadly: we include not just  spaces arising as frontiers of injections into compact spaces, 
     but also other spaces encoding some sort of behavior at infinity or large-scale asymptotic structure, such as the Tits boundary. 
    
    
    
    
    
     Â§.Â§ A plethora of boundaries
     
    CAT(0) cube complexes have several natural boundaries, each encoding different information, and each defined in terms 
    of either the CAT(0) metric structure or the combinatorial structure coming from the hyperplanes.  Fixing a 
    finite-dimensional CAT(0) cube complex X, one has the following list of boundaries:
    
      *  The visual boundaryX. 
          The visual boundary can be defined for any CAT(0) space; see 
    <cit.>.  Points are asymptotic equivalence 
    classes of CAT(0) geodesic rays. The visual topology is defined in such a way 
    that, roughly speaking, rays that fellow-travel for a long time are close.  When X is locally finite, Xâˆª X is 
    a compactification of X.  While it is a very useful object, we do not study the visual boundary in this paper.
    
    
      *  The Tits boundaryX.  As with X, the points in X correspond to asymptotic equivalence classes of CAT(0) 
    geodesic rays, but the topology is finer than the visual topology.  Specifically, we equip X with the Tits 
    metric: by taking a supremum of angles between rays
     one obtains the angle metric, and the 
    induced length metric is the Tits metric, which is CAT(1); see <cit.>.  The Tits boundary encodes much of the 
    geometry of a CAT(0) space; for example, spherical join decompositions of the Tits boundary correspond to product 
    decompositions of the space <cit.>.  Although X is in general not compact even when X is 
    proper, it is  of interest for  other reasons, such as encoding â€œpartial flat regionsâ€ in X. For example, endpoints 
    of axes of rank-one isometries are isolated points, while flats in X yield spheres in X.  We recall the definition 
    of X in DefinitionÂ <ref>.
    
    
      *  The simplicial boundaryX, from <cit.>, is an analogue 
    of the Tits boundary depending on the hyperplane structure, rather than on the CAT(0) metric.  The idea is that certain sets 
    of hyperplanes â€” termed unidirectional boundary sets (hereafter, UBSes) â€” identify â€œways of approaching infinity in X.â€  Containment of UBSes (modulo finite differences) gives a partial order on 
    UBSes, and this order gives rise to a simplicial complex X (see DefinitionÂ <ref>).  Here are three helpful examples. First, the simplicial boundary of a tree (or, more generally, of a Î´â€“hyperbolic cube complex) is a discrete set 
    of 0â€“simplices. Second, the simplicial boundary of the standard square tiling of [0,âˆ)^2 is a 1â€“simplex, whose 0â€“simplices correspond to the sub-UBSes consisting of the vertical hyperplanes 
    and the horizontal hyperplanes. Third,  the staircase obtained from this square tiling by considering only the cubes below some increasing, unbounded function also has simplicial boundary a 
    1â€“simplex. (See FigureÂ <ref>.) The maximal simplices of X encode such â€œgeneralized orthantsâ€ (namely, convex hulls of â„“^1â€“geodesic rays) in X in roughly the same way that the Tits boundary encodes â€œpartial flats.â€
    
    The 
    simplicial boundary has been used to study quasi-isometry invariants like divergence<cit.> and 
    thickness<cit.> for groups acting on cube complexes, and has been generalized in the context of 
    median spaces<cit.> as a tool for proving a Tits alternative for groups acting on such spaces.
    
    
    
    
      *  The Roller boundaryX gives another way of compactifying X, using the half-space structure associated to the hyperplanes.
      Each hyperplane Ä¥ of X has two complementary components, called half-spaces, h and h^*, which induce a two-sided partition of 
    X^(0).  Each vertex xâˆˆ X is completely determined by specifying the collection of half-spaces that contain it.  This gives an injective map X^(0)â†’ 2^â„Œ, where 
    â„Œ denotes the set of half-spaces.  The closure of the image of X^(0) in the Tychonoff topology is the Roller compactificationX, and X=Xâˆ– X^(0) is the 
    Roller boundary of X. (See DefinitionÂ <ref>.) 
    
    
    Of the boundaries of X that are defined in terms of the cubical structure only, the Roller boundary is perhaps the most well-studied. It has been used to prove a variety of results about CAT(0) 
    cube complexes and groups acting on them.
    
    For example, the Roller boundary plays a key role in the proof that irreducible lattices in _2Ã—_2 always 
    have global fixed points in any action on a CAT(0) cube complex, while reducible actions always admit proper cocompact 
    actions on CAT(0) cube complexes <cit.>. 
    
    Nevo and Sageev identified the Roller boundary as a model for the Furstenbergâ€“Poisson boundary of a cocompact lattice in 
    (X)<cit.>.  FernÃ³s generalized this result  
     to groups acting properly and non-elementarily on finite dimensional X, and also proved a Tits alternative 
    <cit.>.   The same paper identifies an important subset of the Roller boundary: the regular points, 
    which 
    correspond to â€œhyperbolicâ€ directions in various senses.  
    
    In particular,  the set of regular points with the induced 
    topology is (X)â€“equivariantly homeomorphic with the boundary of the (hyperbolic) contact graph<cit.>.  The set of regular points is used inÂ <cit.> to find rank-one isometries under more 
    general conditions than in previous 
    workÂ <cit.>.  The method in <cit.> is to use convergence of random walks to regular points to 
    deduce the existence of regular elements without assuming that the ambient group is a lattice.
    
    The set of regular points also features in the proof of marked length spectrum rigidityÂ <cit.>, 
    and was independently identified by Kar and Sageev, who used it to study property P_naive and hence 
    C^*â€“simplicity for cubulated 
    groups <cit.>.  Finally, the Roller boundary has recently been generalized in the context of median spaces 
    <cit.>.
    
      
      
      *  The simplicial Roller boundaryX is constructed as follows.
         The Roller boundary X carries a natural equivalence relation, first introduced 
     by Guralnik <cit.>, where two points 
    are equivalent if they differ on finitely many half-spaces.  The equivalence classes, called Roller classes, play a fundamental role in this paper.  Part of the reason for this is that the set of Roller 
    classes carries a natural partial order, which admits several equivalent useful characterizations (see LemmaÂ <ref>).  The simplicial Roller boundaryX is the simplicial 
    complex realizing this partial order (see DefinitionÂ <ref>).  
    
    In this paper, we build on earlier work relating Roller classes to CAT(0) geodesic rays.  Specifically, Guralnik inÂ <cit.> recognized that each equivalence class of CAT(0) geodesic rays  determines a 
    Roller class.  Conversely, inÂ <cit.>, it is shown that each Roller class determines a subset of the Tits boundary which admits a canonical circumcenter.  These observations 
    are crucial for our arguments: DefinitionÂ <ref> depends on the latter and DefinitionÂ <ref> is based on the former.
    
    We also note that X is isomorphic to the 
     combinatorial boundary defined and studied by Genevois <cit.>. In that work, he explains that the combinatorial boundary is isomorphic to the 
    face-poset of a naturally-defined subcomplex of X<cit.> and is isomorphic to X<cit.>.  (More precisely, Genevois' work yields the map  from CorollaryÂ <ref> below, although <cit.> does not 
    explicitly mention a homotopy equivalence.)  
    
    
    For each of these boundaries, the action of the group (X) of cubical automorphisms of X extends to an action on the 
    boundary preserving its structure. The actions on X and X are by homeomorphisms, the action on X is by isometries of the Tits metric, and the actions on X and X are by simplicial automorphisms.
    
    The definitions of the simplicial boundary and the simplicial Roller boundary are conceptually similar. Part of the work 
    in this paper is making that similarity precise, by establishing a correspondence between Roller classes and equivalence 
    classes of UBSes. This line of work culminates in CorollaryÂ <ref>, which gives explicit maps between X and a 
    natural subcomplex of X. These maps are (X)â€“equivariant homotopy equivalences, although in general they are 
    not simplicial isomorphisms.  Then, in PropositionÂ <ref>, we upgrade this to a homotopy equivalence 
    between X and the whole of X.
    
    One glimpse of a relationship between X and X comes from UBSes associated to geodesic rays. Given a geodesic ray Î±â†’ X, in either the CAT(0) metric or the combinatorial metric, the set of hyperplanes crossing Î± (denoted (Î±)) is always a UBS. A UBS  is called â„“^1â€“visible (resp. â„“^2â€“visible) if it is has finite symmetric difference with (Î±) for a combinatorial (resp. CAT(0)) geodesic Î±. FigureÂ <ref> shows examples of both â„“^1â€“invisible and â„“^2â€“invisible UBSes. Despite those caveats, â„“^2â€“visible UBSes provide a way to map points of X to classes in X; a similar construction also provides a map to X. 
    
    
    
     Â§.Â§ Main result
      Our main theorem relates X, X, and  X via maps that are (X)â€“equivariant up to homotopy.  
    It helps to introduce the following terminology.  
    
    
    Suppose 
    that A,B are topological spaces with a group G acting on both spaces by homeomorphisms.  A map f  A â†’ B is called a
    a  homotopy equivalence 
    if f is a homotopy equivalence, and furthermore  gâˆ˜ f and fâˆ˜ g are 
    homotopic for every gâˆˆ G.  If such an f exists, we say that A,B are  homotopy equivalent.
    
    
    It is immediate to check that the property of being  homotopy equivalent is an equivalence relation. 
    Indeed, the composition of two  homotopy equivalences is a  homotopy equivalence. Furthermore, any homotopy inverse of a  homotopy equivalence is itself a
     homotopy equivalence. 
    
    
    
    Let X be a finite-dimensional CAT(0) cube complex.  Then 
    we have the following commutative diagram of  homotopy equivalences between boundaries of X:
    
    
      X       ^       X  
       _      _   
          _ X      
    In particular, the spaces X, X, X are all  homotopy equivalent, where X is equipped with the metric topology and X, X are equipped with either the 
    metric or the weak topology.
    
    
    In the above diagram, the letter S stands for Simplicial, the letter R for Roller-simplicial, and the letter T 
    for Tits.  The map  is an  homotopy equivalence from the simplicial boundary to the Tits 
    boundary, and similarly for the other two.  The map  is provided by CorollaryÂ <ref>, and the 
    map  comes from PropositionÂ <ref>.  The map  is just the composition =âˆ˜.
    
    Some intuition behind the theorem can be gleaned from the following simplified situation. A cube complex X is called fully visible if every UBS is â„“^1â€“visible. 
     When X is fully visible, UBSes correspond to combinatorial 
    orthants in X (i.e. products of combinatorial geodesic rays) <cit.>, and TheoremÂ <ref> can be understood as relating 
    combinatorial orthants to CAT(0) orthants. SeeÂ <cit.>, where a proof is sketched that the simplicial and 
    Tits 
    boundaries are homotopy equivalent under the restrictive hypothesis of full visibility.  However, 
     full visibility is a very strong and somewhat mysterious hypothesis: it is not known to hold even if X 
    admits a proper cocompact group action <cit.>. Thus 
    TheoremÂ <ref> is more satisfying (and difficult) because it does not assume this restrictive hypothesis. In order to prove the theorem, we have 
    to understand combinatorial convex hulls of CAT(0) geodesic rays, which is a much more delicate affair when one is not 
    simply assuming that these hulls can be taken to contain Euclidean orthants.
    
    TheoremÂ <ref> also motivates the introduction of several new technical tools for relating the geometry of CAT(0) geodesic rays to the combinatorics of hyperplanes. We believe that these tools, explained in SectionÂ <ref>, are of independent interest.
    
    
    
    
      
    
     Â§.Â§ Invariance of CAT(0) boundaries for cubulated groups
    
    A group G is called CAT(0) if there is a proper CAT(0) space X on which G acts 
    geometrically (properly and cocompactly).  Multiple CAT(0) spaces might admit a geometric Gâ€“action and witness that G is a CAT(0) group.  Since we are often 
    interested in invariants of the group itself, it is natural to look for features of the geometry of X that  depend 
    only on G.  For instance, in the context of a Gromov hyperbolic group G, recall that all hyperbolic groups with a geometric Gâ€“action have Gromov boundaries that are Gâ€“equivariantly homeomorphic. So one might wonder whether a similar result might hold for CAT(0) groups that are not hyperbolic.
    
    A famous result of Croke and Kleiner  <cit.>, on 
    which we elaborate more below, shows that this is not the case.  Explicitly, they considered the right-angled Artin group
    
        G=âŸ¨ a,b,c,d : [a,b],[b,c],[c,d]âŸ©,
    
    whose Cayley 2-complex X_Ï€/2 is a CAT(0) square complex. The subscript Ï€/2 emphasizes the angles at the corners of the 2â€“cells. Viewing the 2â€“cells as Euclidean squares with 
    side length 1, we obtain a CAT(0) space where G acts geometrically.  Croke 
    and Kleiner deformed the squares of X into rhombi that have angles Î± and Ï€ - Î±, producing a perturbed 
    CAT(0) metric X_Î±,
    and showed that this perturbation changes the homeomorphism type of the visual boundary X_Î±. Subsequently, Wilson
    <cit.> showed that the visual boundaries of X_Î± and X_Î² are homeomorphic only if the angles satisfy 
    Î±=Î², hence these perturbations produce  uncountably many homeomorphism types of boundaries.  Further examples are 
    provided by Mooney <cit.>, who exhibited CAT(0) knot groups G 
    admitting uncountably many geometric actions on CAT(0) spaces, all with different visual boundaries.  Hosaka <cit.> 
    has given some conditions on G,X,Y implying that there is an equivariant homeomorphism Xâ†’ Y 
    continuously extending the quasi-isometry Xâ†’ Y coming from orbit maps, but the preceding examples show that any such 
    condition will be hard to satisfy.
    
    So, one has to look for weaker results or less refined invariants, or ask slightly different questions.  This has stimulated 
    a great deal of work in various directions.  
    
    In the context of 2â€“dimensional CAT(0) complexes, there are more positive results obtained by replacing the visual 
    boundary X by the Tits boundary X, and passing to a natural subspace.  Specifically, the core of X is the union of 
    all embedded circles in X. 
     Xie <cit.> showed that if G acts 
    geometrically on CAT(0) 2â€“complexes X and Y, then the Tits boundaries X and Y have homeomorphic cores.
    (This is weaker than Xie's actual statement; compare <cit.>.)   In the Crokeâ€“Kleiner example, the core is a Gâ€“invariant connected 
    component, while the rest of the Tits boundary consists of uncountably many isolated points and arcs.  
    
    There is a closely related result due to Qing, which inspired us to consider cuboid complexes in the present paper.  
    Another way to perturb the CAT(0) metric on a CAT(0) cube complex X is to leave the angles alone, but to vary the lengths 
    of the edges in such a way that 
    edges intersecting a common  hyperplane are given equal length. In this perturbation, each cube becomes a Euclidean box 
    called a cuboid.  The resulting path metric is still CAT(0), at least when there are uniform upper and lower bounds 
    on 
    the edge-lengths. In particular, this happens when some group G acts on X with 
    finitely many orbits of hyperplanes, and the edge-lengths are assigned Gâ€“equivariantly.   We explain the details in 
    SectionÂ <ref>,  
    where we define a Gâ€“admissible hyperplane rescaling in DefinitionÂ <ref> and  show in 
    LemmaÂ <ref> that the resulting path-metric space (X,^Ï_X) 
    is CAT(0) and G continues to act by isometries.  Cuboid complexes have been studied by various authors, including Beyrer 
    and Fioravanti <cit.>.
    
    Qing <cit.> studied the visual boundary of the CAT(0) cuboid metric under perturbation of the edge-lengths. She showed that 
    the visual boundaries of the CAT(0) cuboid complexes obtained from the  Crokeâ€“Kleiner complex X_Ï€/2 are all 
    homeomorphic. More germane to the present paper, Qing also showed that the Tits boundaries of the rescaled cuboid complexes 
    are homeomorphic, but that no  equivariant homeomorphism exists.  (Roughly, the cores of any two such Tits boundaries are 
    homeomorphic by the result of Xie mentioned above. Via a cardinality argument, Qing extends the 
    homeomorphism over the whole boundary by sending isolated points/arcs to isolated points/arcs.  But this extension cannot be 
    done equivariantly because equivariance forces some isolated points to be sent to isolated arcs and vice versa.)  We will 
    return to cuboid complexes shortly.
    
    There are other results about homeomorphism type as a CAT(0) group invariant for certain classes of CAT(0) groups.  For 
    example, Bowers and Ruane <cit.> showed that if G is a product of a hyperbolic CAT(0) group and 
    ^D, then the visual boundaries of the CAT(0) spaces X and Y with a geometric Gâ€“action are equivariantly homeomorphic. However, this equivariant homeomorphism need not come from a continuous extension of a quasi-isometry X â†’ Y.  Later, Ruane  <cit.> extended this result to the case where G is 
    a CAT(0) direct product of two non-elementary hyperbolic groups. 
    
    Around the same time, Buyalo studied groups of the form G=Ï€_1(S)Ã—â„¤, where S is a hyperbolic surface <cit.>. He constructed two distinct geometric Gâ€“actions on â„^2Ã— and showed that while the two copies of â„^2Ã— are Gâ€“equivariantly quasi-isometric, the Tits boundaries do not admit any Gâ€“equivariant quasi-isometry. 
    
    Since we are interested in Gâ€“equivariant results, it makes sense to seek more general positive results by replacing homeomorphism with a coarser equivalence relation.  This 
    has been a successful idea: Bestvina <cit.> proved that torsion-free CAT(0) groups have a well-defined visual 
    boundary up to shape-equivalence. 
    This was generalized by Ontaneda <cit.>, whose result removes the â€œtorsion-freeâ€ 
    hypothesis.
    
    
    Homotopy equivalence is a finer equivalence relation than shape equivalence.  Might there be some result guaranteeing that the 
    homotopy type of the Tits boundary of X is to some extent independent of the choice of the CAT(0) space X, even if we 
    allow only homotopy equivalences between boundaries that respect the Gâ€“action in the appropriate sense? One precise version of this question appears below as QuestionÂ <ref>.
    
    
    Motivated by Qing's results about perturbing the metric on a CAT(0) cube complex by changing edge lengths, we consider the 
    situation where G acts on the finite-dimensional CAT(0) cube complex X, and study the Tits boundaries of the CAT(0) spaces 
    that result from Gâ€“equivariantly replacing cubes by cuboids.  Now, the hyperplane combinatorics, and hence the simplicial 
    and Roller boundaries, are unaffected by this change.  And, for the unperturbed X, TheoremÂ <ref> tells us 
    that the homotopy type of the Tits boundary is really a feature of the hyperplane combinatorics.  So, in order to conclude 
    that the homotopy type of the Tits boundary is unaffected by such perturbations of the CAT(0) metric, we just need to know 
    that TheoremÂ <ref> holds for cuboid complexes as well as cube complexes.  
    Indeed, we show:
    
    
    
     Let X be a finite-dimensional CAT(0) cube complex and let G be a group acting by automorphisms on X. Let (X,^Ï_X) be the CAT(0) cuboid complex obtained 
    from a Gâ€“admissible hyperplane rescaling of X.  Then the original Tits boundary X, the perturbed Tits boundary (X,^Ï_X),  the simplicial boundary X, and the simplicial Roller boundary X are 
    all  homotopy equivalent. 
    
    
    The proof of this result only requires minor modifications to the proof of TheoremÂ <ref>,
    essentially because convexity of 
    half-spaces and the 
    metric product structure 
    of hyperplane carriers persist in the CAT(0) cuboid 
    metric ^Ï_X.
    These small modifications  are described in 
    SectionsÂ <ref>, <ref>,  and <ref>. 
    
    The theorem implies, in particular, that if X admits a geometric action by a group G, then the  homotopy type of 
    the Tits boundary is unaffected by replacing the standard CAT(0) metric (where all edge lengths are 1) with a 
    cuboid metric obtained by rescaling edges Gâ€“equivariantly. This is perhaps evidence in favor of the possibility that the 
    results of Bestvina and Ontaneda about shape equivalence of visual boundaries <cit.> can be strengthened to results about  
    homotopy equivalence if one instead uses the Tits boundary:
    
    
    For which CAT(0) groups G is it the case that any two CAT(0) spaces X,Y on which G acts geometrically have  
    homotopy equivalent Tits boundaries?
    
    If G acts geometrically on CAT(0) cube complexes X,Y, are the simplicial boundaries of X,Y 
    homotopy equivalent?
    
    
     Â§.Â§ Quasiflats
    
    A remarkable theorem of Huang <cit.> says that if X is a dâ€“dimensional CAT(0) cube complex, then any quasi-isometric embedding ^dâ†’ X has image that is 
    Hausdorff-close to a finite union of cubical orthants, i.e. a convex subcomplex that splits as the product of rays.  This statement is important for the study of quasi-isometric rigidity in cubical groups, and it is natural to want to strengthen the 
    statement to cover quasi-isometric embeddings ^dâ†’ X, where d is the largest dimension for which such a map exists, but X is allowed to be larger than d (although still 
    finite).  Natural examples where this strenthened form of Huang's theorem is useful include right-angled Coxeter groups.
    
    We believe that TheoremÂ <ref> could be used as an ingredient in proving such a result.  Very roughly, the homotopy equivalence Xâ†’ X can be used to 
    produce, given a singular dâ€“cycle z in X, a simplicial dâ€“cycle z' in X represented by a finite collection of standard orthants in X.  By the latter, we mean there is a 
    finite collection of dâ€“simplices in X whose union S carries z'.  The proof of TheoremÂ <ref>,
    specifically PropositionÂ <ref> and the nerve arguments in SectionsÂ <ref> andÂ <ref>,
    should provide enough metric control on the map Sâ†’ X 
    to invoke a result of Kleinerâ€“LangÂ <cit.> to deduce the strengthened quasiflats theorem.  
    Given that the 
    strengthened quasiflats theorem has recently been established by 
    BowditchÂ <cit.> and independently Huangâ€“Kleinerâ€“StadlerÂ <cit.>, we have decided not 
    to pursue the matter in this paper.
    
    
    
    
    
     Â§.Â§ Ingredients of our proof
    
    
    As mentioned above, our primary goal is to elucidate the relationships among three boundaries: the simplicial boundary X, the simplicial Roller boundary X, and the Tits boundary X. 
    
    The first two boundaries that we study are combinatorial in nature. The primary difference is that the central objects in X are sequences of hyperplanes, whereas the central objects in X are sequences of half-spaces. After developing a number of lemmas that translate between the two contexts, we prove the following result:
    
    CorollaryÂ <ref>
    The barycentric subdivision of X contains a canonical, (X)â€“invariant subcomplex X. There are (X)â€“equivariant 
     simplicial maps Xâ†’ X and X â†’  X, with the following properties:
    
      * Xâ†’ X is  surjective.
    
      * X â†’  X  is an injective section of .  
    
      *  is a homotopy 
    equivalence with homotopy inverse  .
    
    
     In fact, all of X deformation retracts to X in an 
     (X)â€“equivariant 
     way. See RemarkÂ <ref>.
    
    In contrast to the the two combinatorial boundaries, the Tits boundary X is  inherently linked to the geometry of the CAT(0) metric on X.
    To relate the Tits boundary to the other two boundaries, we need to combinatorialize it: that is, we need to cover X by a certain collection of open sets, and then study the nerve of the 
    corresponding covering. Similarly, we cover each of X and X by simplicial subcomplexes, and study the resulting nerves. We will use two different versions of the nerve theorem to 
    show that a topological space (such as one of our boundaries) is homotopy equivalent to the nerve of a covering. The Open Nerve Theorem <ref> deals with open coverings and is 
    originally due to Borsuk <cit.>. The Simplicial Nerve Theorem <ref> deals with coverings by simplical complexes and is originally due to BjÃ¶rner 
    <cit.>. In fact, since TheoremÂ <ref> is a Gâ€“equivariant statement, we need equivariant versions of both theorems, which have not previously appeared in the literature 
    to our knowledge. Consequently, SectionÂ <ref> contains self-contained proofs of both theorems. 
    
    
    
    A central object in our construction of nerves is the Tits boundary realization of a Roller class, or point in  the Roller boundary (see DefinitionsÂ <ref>, <ref><ref> 
    ). In <cit.>, a Roller class v, yields a convex, visually compact subset of the Tits boundary X. Employing the work of Capraceâ€“Lytchak <cit.> and 
    Balserâ€“Lytchak <cit.>, this set has radius at most Ï€/2 and
    a canonical circumcenter (v). A first approach might be to use these compacta to provide the 0â€“skeleton of a nerve for X that will be homotopy equivalent to X. However, 
    several issues arise. First, these associated convex closed sets must be made smaller so that their overlaps can be controlled. This is achieved by considering points in the Roller boundary versus 
    their classes.
    
    Secondly, the issue of â„“^2â€“visibility, or rather invisibility must be addressed. A Roller class, (respectively a UBS) is â„“^2â€“visible if it is the intersection (respectively union) of the deep half-spaces (respectively hyperplanes) naturally associated to a CAT(0) geodesic ray Î±.  As FigureÂ <ref> shows, some Roller classes are not â„“^2â€“visible, and invisible classes cause headaches when trying to connect this data to the Tits boundary. In particular, if v is an invisible Roller class, then we will have Q(v) = Q(w) for any Roller class w < v.
    To confront this challenge, we have to find a single  class which is maximal among the visible Roller classes represented by rays with endpoints in Q(v). Proving the existence of such a maximal class requires finding a single geodesic ray that is diagonal, in the sense that its convex hull is the union of the convex hulls of two geodesic rays.
    In particular, we need the following statement, which is of independent interest:
      
      
     PropositionÂ <ref>
    Let Î±, Î² be CAT(0) geodesic rays with Î±(0) = Î²(0) âˆˆ X^(0).
    Suppose that (Î±)âˆª(Î²) is commensurate 
    with a UBS.  Then a=Î±(âˆ) and b=Î²(âˆ) are joined by a unique geodesic 
    g in X. Furthermore, any interior point c of g is represented by a CAT(0) geodesic ray Î³ 
    such that (Î³)  = (Î±)âˆª(Î²).
    
      
    
    Next, 
    we consider maps between X and X that  relate these boundaries.
     The first of these maps, called Ïˆ X â†’ X, 
     is fairly easy to describe. A Tits point a âˆˆ X is represented by a CAT(0) geodesic ray Î± and  the intersection of half-spaces which are â€œdeep" yields a (principal) Roller class Ïˆ(a).  
     See DefinitionÂ <ref> and LemmaÂ <ref>. The reverse map  Ï† X â†’ X is somewhat more delicate: given a Roller class v, we start with the circumcenter (v) âˆˆ Q(v) and then perturb (v) to a nearby point Ï†(v) that has slightly better properties. 
     See DefinitionÂ <ref> and PropositionÂ <ref> for details, and note that the perturbation uses PropositionÂ <ref> in a crucial way. The upshot is that Ï† is a section of Ïˆ on exactly the â„“^2â€“visible classes: we have v = Ïˆ(Ï†(v)) if and only if v is â„“^2â€“visible (LemmaÂ <ref>). 
    
     
    We can now construct nerves and prove results about them. We begin by defining the set (X) of all visible Roller classes that are maximal among all â„“^2â€“visible classes. Then, we construct a simplicial complex _T whose vertex set is (X), with simplices corresponding to collections of Roller classes v_i whose Tits boundary realizations Q(v_i) all intersect. We check that this is indeed the nerve of a cover of X (CorollaryÂ <ref>). Then, we prove:
    
    TheoremÂ <ref>
    There is an  homotopy equivalence from  the simplicial complex _T to X. 
    
    The proof of TheoremÂ <ref> requires an open thickening. The sets Q(v) are closed (in fact, compact), and we do not have a version of the Nerve Theorem for closed covers. Thus we thicken up each compact set Q(v) to an open set U(v), in such a way that the intersection pattern of the open cover {U(v) :vâˆˆ(X) } is the same as that of the closed cover {Q(v):vâˆˆ(X)}. The thickening procedure involves some delicate CAT(0) geometry; see PropositionÂ <ref>. As a result, we obtain an open cover of X whose nerve is isomorphic to the nerve of the closed cover, namely _T. Now, the Equivariant Open Nerve TheoremÂ <ref> gives an  homotopy equivalence _T â†’ X.
     
    There are two reasons why the  homotopy equivalence in TheoremÂ <ref> is not (X)â€“equivariant. First, the Equivariant Open Nerve TheoremÂ <ref> does not provide (X)â€“equivariance on the nose. Second, while the collection of Tits boundary realizations Q(v_i) is (X)â€“equivariant, the perturbed circumcenter map Ï† might not be. For these reasons,  homotopy equivalence is the strongest form of invariance that we can guarantee.
     
     In  SectionÂ <ref>, we use all of the above results  to complete the proof of TheoremÂ <ref>. We already have an open cover of X whose nerve is _T. 
    Working in X, we focus attention on a subcomplex X whose vertex set corresponds to the â„“^2â€“visible Roller classes, and then construct a cover of X by finite 
    simplicial complexes {Î£_v : v âˆˆ X}. It is not too hard to check that the nerve _ of this cover is isomorphic to _T, which implies that X and 
    X  are  homotopy equivalent (PropositionÂ <ref>). To complete the construction of an  homotopy equivalence X â†’ X, we build an  deformation retraction  ^ X â†’ X; see PropositionÂ <ref>. While the construction of this retraction is 
    mostly combinatorial, it relies on CAT(0) geometry and the perturbed circumcenter map Ï† at one crucial step.
     
    
    Finally,  the homotopy equivalence X â†’ X is morally very similar to the simplicial map Xâ†’ X constructed in
     CorollaryÂ <ref>. To make the argument precise, we construct isomorphic nerves of simplicial covers of 
     X and X and apply the Equivariant Simplicial Nerve TheoremÂ <ref> one final time.
    
    
    
    
     Â§.Â§ Expository content
    
    Part of our goal in this paper is to provide exposition of varying aspects of cubical theory. 
     CAT(0) cube complexes are ubiquitous objects that have been well-studied in many different guises. Accordingly, there are several different 
    viewpoints, and various important technical statements are stated and proved in a variety of different ways throughout the literature.  Therefore, we have endeavored to give a self-contained 
    discussion of CAT(0) cube complexes combining some of these viewpoints.  
    
    Also, throughout the paper, we make heavy use of the nerve theorem, for both open and simplicial covers. Results of this sort were originally proved by BorsukÂ <cit.>, and are now widely used in many slightly different forms.  To the best of our knowledge, the existing literature does not contain a version of the nerve theorem for covers of simplicial complexes by locally infinite families of subcomplexes, with a conclusion that provides equivariance with respect to group actions on the input data.
    Since we could not find a written account of such a result, we have given self-contained proofs (based on arguments inÂ <cit.>) in SectionÂ <ref>.
    
    
    
     Â§.Â§ Section Breakdown
    
    SectionÂ <ref> establishes some language about simplicial complexes and proves equivariant versions of two nerve theorems.  SectionÂ <ref> is devoted to background on CAT(0) cube complexes and the Roller boundary.  In 
    SectionÂ <ref>, we discuss CAT(0) cuboid complexes coming from an admissible rescaling of the hyperplanes.  SectionÂ <ref> introduces the simplicial Roller 
    boundary. In SectionÂ <ref>, we introduce UBSes and the simplicial boundary, and relate these to Roller classes and the simplicial Roller boundary.  In SectionÂ <ref>, 
    we introduce the Tits boundary and prove some technical results relating CAT(0) geodesic rays to Roller classes and UBSes.  We apply these in SectionÂ <ref> to analyze the 
    realizations of Roller classes in the Tits boundary.  These results are in turn used in SectionÂ <ref> to prove that the Tits boundary is homotopy equivalent to a 
    simplicial complex _T arising as the nerve of the covering by open sets associated to certain Roller classes.  In SectionÂ <ref>, we realize this nerve as the nerve of a covering of the 
    simplicial Roller boundary by subcomplexes associated to Roller classes, and deduce TheoremsÂ <ref> andÂ <ref>.  
    
    See TableÂ <ref> for a summary of the notation used in this paper.
    
    
    
    
     Â§.Â§ Acknowledgments
    
    We are grateful to Craig Guilbault, Jingyin Huang, Dan Ramras, and Kim Ruane for some helpful 
    discussions. 
    We thank the organizers of the conference â€œNonpositively curved groups on the Mediterraneanâ€ in May of 2018,  where the three of us began collaborating as a unit.
    FernÃ³s was partially supported by NSF grant DMSâ€“2005640.
    Futer was partially supported by NSF grant DMSâ€“1907708.
    Hagen was partially supported by EPSRC New Investigator Award EP/R042187/1.
    
    
    
    Â§ SIMPLICIAL COMPLEXES AND NERVE THEOREMS
    
    Throughout the paper, we will make use of simplicial complexes and assume that the reader is familiar with these objects.  
    For clarity, we recall the definition and describe two topologies on a simplicial complex.
    Then, in SectionÂ <ref>, we prove two group-equivariant homotopy equivalence theorems about nerves of covers.
    
    A kâ€“simplex is the set 
    
        Ïƒ={a_0e_0+â‹¯+a_ke_k  | âˆ‘_i=0^ka_k=1 and a_iâ‰¥ 0 for all i},
    
    where e_0,â€¦,e_k are the standard basis vectors in ^k+1.  A face of Ïƒ is a jâ€“simplex 
    obtained by restricting all but jâ€“many 
      of the a_i to 0.  Note that Ïƒ has a CW complex structure where the 0â€“cells 
    are the 0â€“dimensional faces and, more generally, the jâ€“cells are the jâ€“dimensional faces.
    
    A simplicial complex is a CW complex  whose closed cells are simplices, such that
    
      *  each (closed) simplex is embedded in , and
         
      *  if Ïƒ,Ï„ are simplices, then Ïƒâˆ©Ï„ is either empty or a face of both Ïƒ and 
    Ï„.  In particular, simplices with the same 0â€“skeleton are equal.
    
    We often refer to 0â€“simplices of  as vertices and 1â€“simplices as edges.   
    
    As a CW complex,  is endowed with the weak topology:
    
    
        Let  be a simplicial complex. The weak topologyğ’¯_w on   is characterized by the property that a set C âŠ‚ is closed if and only if C âˆ©Ïƒ 
    is closed for every simplex ÏƒâŠ‚.  
    
    
    
    
    In some of the arguments in this section, it will be more convenient to work with the metric topology on the simplicial complex .  
    
    
    
     Let  be a simplicial complex.  Let V be the real vector space consisting of functions f ^(0)â†’ such that f(v)â‰  0 for finitely many vâˆˆ^(0).  
     Then there is a 
    canonical inclusion ^(0)â†ª V, where every vertex v âˆˆ^(0) maps to the corresponding Dirac function Î´_v âˆˆ V.  This map extends affinely over 
    simplices endowed with barycentric coordinates to give an inclusion â†ª V. 
    
    Equip V with the â„“^2 norm 
        f^2=âˆ‘_vâˆˆ^(0)f^2(v),
     which is well-defined since every fâˆˆ V is finitely supported.  The restriction of the resulting metric topology on V 
    to the subspace  is the metric topology on , denoted ğ’¯_m.
    
    
    The metric topology is coarser than the weak topology, hence the identity map ğ•€_ (,ğ’¯_w)â†’(,ğ’¯_m) is always continuous. When a simplicial complex 
     is locally infinite, the inverse map (,ğ’¯_m)â†’(,ğ’¯_w) is not continuous.  However, Dowker proved  that ğ•€_ is a homotopy equivalence even when 
     is locally infiniteÂ <cit.>. 
     Since our interest is in the homotopy type of , Dowker's theorem will be very useful.
    
    
    Unless stated otherwise, a simplicial complex  is presumed to have the weak topology ğ’¯_w. The metric topology will only be needed in LemmaÂ <ref> and TheoremÂ <ref>, and never afterward.
    
    
    
    Some of the simplicial complexes used later will  arise from partially ordered sets, as follows.
    
    
    Given a partially ordered set (P,â‰¤), there is a simplicial complex S in which the kâ€“simplices are 
    the (k+1)â€“chains in (P,â‰¤), and the face relation is determined by containment of chains.  We call S the simplicial realization of the partially ordered set 
    (P,â‰¤). 
    
    
    In several other places, we will work with simplicial complexes arising as nerves of coverings of topological spaces:
    
    
     Let Y be a topological space and let ğ’°={Y_i}_iâˆˆ I be a covering of Y, i.e. a family of subsets with Y=â‹ƒ_iâˆˆ IY_i.  The nerve of ğ’° is the simplicial 
    complex  with a vertex v_i for each Y_i, and with 
    an nâ€“simplex spanned by v_i_0,â€¦,v_i_n whenever
    â‹‚_j=0^nY_i_jâ‰ âˆ….  
    
    
    Note that we have defined nerves for arbitrary coverings of arbitrary topological spaces.  In practice, we will restrict Y and ğ’°: either Y is a paracompact space and 
    ğ’° is an open covering, or Y is itself a simplicial complex and ğ’° is a covering by subcomplexes.  These assumptions provide the settings for the nerve theorems, which relate the homotopy type of Y to that of the nerve of ğ’°.
    
    
    
     Â§.Â§ Equivariant nerve theorems
    
    
    In this section, we prove two flavors of nerve theorem that are needed in our proofs of homotopy equivalence. TheoremÂ <ref> is a group-equivariant version of the classical nerve theorem for open coverings, originally due to Borsuk <cit.>. Similarly, TheoremÂ <ref> is an equivariant version of the nerve theorem for simplicial complexes, which is due to BjÃ¶rner <cit.>.
    
    
    We need the following standard fact:
    
    
     Let Y be a topological space and   a simplicial complex  endowed with the metric topology. 
     Let 
    f_0,f_1  Yâ†’ (,ğ’¯_m) be continuous maps.  Suppose that, for all yâˆˆ Y, 
    there exists a closed simplex Ïƒ of  such that 
    f_0(y), f_1(y)âˆˆÏƒ.  Then f_0 and f_1 are homotopic via a straight line homotopy.
    
    By abuse of notation, we identify  with the embedding â†ª V described in DefinitionÂ <ref>. Then f_0, f_1  Y â†’ V are continuous functions. For y âˆˆ Y and t âˆˆ [0,1], define the affine combination f_t(y) = 
    (1-t)f_0(y) + t f_1(y). Then 
    (y,t) â†¦ f_t(y) is a continuous mapping from Y Ã— [0,1] to V. Furthermore, for every y âˆˆ Y, the image f_t(y) = (1-t)f_0(y) + t f_1(y) belongs to the same simplex ÏƒâŠ‚ that contains f_0(y) and f_1(y). Thus we get a straight line homotopy f_t  Y â†’.
    
    Let Y be a paracompact space, on which a group G acts by homeomorphisms.  Let I be a set equipped with a left Gâ€“action, and let 
    ={Y_i}_iâˆˆ I be an open covering of Y with the following properties:
    
      * gY_i=Y_gi for all gâˆˆ G and iâˆˆ I;
         
      *  for any finite FâŠ‚ I, the intersection â‹‚_iâˆˆ FY_i is either empty or 
    contractible.
    
    Let  be the nerve of the covering .  
    
    Then G acts on  by simplicial automorphisms, and there is 
    a  homotopy equivalence f  Yâ†’(,ğ’¯_m).
    Consequently, there is also a 
      homotopy equivalence Yâ†’ (,ğ’¯_w).
    
    If the Gâ€“action is trivial, this result is the classical nerve theorem, proved for instance in HatcherÂ <cit.>.
    We adapt Hatcher's line of argument, accounting for the Gâ€“action where necessary.  Until we say otherwise, at the very end of the proof, the nerve  will be equipped with the metric 
    topology ğ’¯_m.
    
    Simplices comprising the nerve:  Let â„± be the set of 
    finite subsets FâŠ‚ I 
    such that â‹‚_iâˆˆ FY_iâ‰ âˆ….  Then, by DefinitionÂ <ref>, every finite set F âˆˆâ„± can be canonically identified with the set of vertices of a simplex Ïƒ(F) âŠ‚.
    The partial order on â„± given by set inclusion corresponds to the face relation on .
    The action of G on   induces an action on â„±, hence a simplicial action on .
    
    The space Y and its quotient maps:  Let Ïƒ= Ïƒ(F) be a simplex 
    of , corresponding to a finite set F âˆˆâ„±. 
    Let U_F = â‹‚_i âˆˆ F Y_i, a contractible open set, and consider the product U_F Ã—Ïƒ(F) âŠ‚ Y Ã—. Then, define
    
        Y = â‹ƒ_F âˆˆâ„±( U_F Ã—Ïƒ(F) )  âŠ‚  Y Ã—.
    
     The diagonal Gâ€“action on Y Ã— induces a Gâ€“action on Y.
    The projections from Y Ã— to its factors restrict to Gâ€“equivariant projection maps
    
        p  Y â†’ Y,      q  Y â†’.
    The homotopy equivalence Y â†’:  
     Given a point x âˆˆ contained in the interior of a simplex Ïƒ(F), the fiber  q^-1(x) = U_F Ã—{x} is contractible by hypothesis.  Thus, by <cit.>, 
    the projection q  Y â†’ is a homotopy equivalence.
    
    The fiber p^-1(y):
    Fix yâˆˆ Y, and consider the fiber 
    p^-1(y). Let (y,x) âˆˆ p^-1(y) âŠ‚ Y Ã—. Let Ïƒ(F) be a simplex of  containing x = q(y,x). The vertices of Ïƒ correspond to the elements of F, hence to subsets Y_i for i âˆˆ F.
    We endow Ïƒ(F) with barycentric coordinates, so that
     x = âˆ‘_i âˆˆ FÎ²_i Y_i where âˆ‘Î²_i = 1. Thus
     
        p^-1(y) = {(y,  âˆ‘_i âˆˆ FÎ²_i Y_i )   |   y âˆˆ U_F , F âˆˆâ„±} = {y}Ã—Î£_y
    
    for a simplicial subcomplex Î£_y âŠ‚. Since the projection p  Y â†’ Y is Gâ€“equivariant, we have
    
        {gy}Ã— g Î£_y   =   g (  {y}Ã—Î£_y )   =   g p^-1(y) = p^-1(gy)   =  {gy}Ã—Î£_gy,
    
    and in particular g Î£_y = Î£_gy.
    
    
    For any pair of points x,x' âˆˆÎ£_y, belonging to simplices Ïƒ(F), Ïƒ(F') of , we have y âˆˆ U_F âˆ© U_F' = U_F âˆª F'. Thus there is also a simplex Ïƒ(F âˆª F') containing both Ïƒ(F) and Ïƒ(F') as faces. It follows that x,x' are connected by an affine line segment in the common simplex Ïƒ(F âˆª F'). 
    In other words, Î£_y is convex.
    
    
    The section s  Y â†’ Y:  
    Since Y is paracompact, there is a partition of unity {Ï•_Î±}_Î±âˆˆ A subordinate to = {Y_i}_i âˆˆ I. That is,
     for each Î±âˆˆ A, we have (Ï•_Î±)  âŠ‚ Y_i(Î±) for some i(Î±) âˆˆ I.
      Given yâˆˆ Y, let A(y) = {Î±âˆˆ A : y âˆˆ(Ï•_Î±) }, a finite set.
    Then, define
    
        f(y) = âˆ‘_Î±âˆˆ A(y)Ï•_Î± (y) Y_i (Î±) âˆˆ Î£_y
            and    
        s(y) = ( y, f(y) )
          âˆˆ  
        p^-1(y) .
     
    We will eventually show that f  Y â†’ is the homotopy equivalence claimed in the theorem statement. For now, we focus on s.
    
    Checking that s is a homotopy inverse of p:
    Since s(y) âˆˆ p^-1(y), we have p âˆ˜ s = id_Y by construction.
    We claim that the other composition s âˆ˜ p is homotopic to id_ Y. 
    To prove this, consider the following pair of functions from  Y â†’:
    
        q_0(y,x) = q(y,x) = x,      q_1(y,x) = f(y).
    
    For every pair (y, x) âˆˆ Y, the image points x = q_0(y,x) and x' = q_1(y,x)  = f(y) are both contained in Î£_y. Above, we have checked both image points x,x' are contained in a common simplex Ïƒ(F âˆª F') âŠ‚Î£_y âŠ‚. Recall that we are working with the metric topology on . Thus, by LemmaÂ <ref>, q_0 is homotopic to q_1 via a straight line homotopy q_t.  For every y, this straight-line homotopy runs through Î£_y.
    
    We can now define a homotopy h_t  Y â†’ Y Ã— as follows:
    
        h_t(y,x) = (y, q_t(y,x)).
    
    Observe that p âˆ˜ h_t is continuous because p âˆ˜ h_t(y,x) = y, and q âˆ˜ h_t is continuous because q âˆ˜ h_t(y,x) = q_t(y,x). Thus, by the universal property of the product topology, h_t is continuous.
    Restricting t to be 0 or 1 gives
    
        h_0(y,x) = (y, q_0(y,x)) = (y,x),    h_1(y,x) = (y, q_1(y,x)) = (y, f(y)) = sâˆ˜ p(y,x).
    
    In fact, for every (y,x), the path t â†¦ q_t(y,x) has image in Î£_y, hence
    h_t(y,x) has image in {y}Ã—Î£_y âŠ‚ Y. Thus h_t is a homotopy from sâˆ˜ p to id_ Y, and s is a homotopy inverse of p.
    
     
    A  homotopy equivalence:  Thus far, we have homotopy equivalences s  Yâ†’ Y and q  Yâ†’.  Hence the composition f = qâˆ˜ s  Y â†’ is a homotopy equivalence as well.  
    
    It remains to check that f is a  homotopy equivalence. Recall from above that for every y âˆˆ Y and  g âˆˆ G, we have f(y) âˆˆÎ£_y, hence gf(y) âˆˆ gÎ£_y = Î£_gy. Similarly, we have f(gy) âˆˆÎ£_gy. Thus both f(gy) and gf(y) lie in Î£_gy, and we have already checked that every pair of points of Î£_gy belong to a common simplex of . 
    Thus LemmaÂ <ref> says that the maps gf and fg are homotopic for every g âˆˆ G, hence f   Y â†’ (,ğ’¯_m) is a  homotopy equivalence, as claimed in the statement of the theorem.
    
    Conclusion for the weak topology:  This follows since ğ•€_ (,ğ’¯_w)â†’(,ğ’¯_m) is Gâ€“equivariant and is a homotopy equivalence byÂ <cit.>.
    
    
    We are now finished with having the metric topology on our nerves, 
    and work only with the weak topology in the remainder of the paper.
    
    
    The following result is stated (without the group action) as 
    <cit.>.  The proof given there assumes that = {Î£_i} is a locally finite cover, and then 
    mentions that the general case requires a slightly different argument.
    (See Ramras <cit.> for a sketch of how the argument might go.)
      Since we need the conclusion in the case where 
    {Î£_i} might be locally infinite, and since we need to adapt the proof slightly to account for the group action, we write down a proof using TheoremÂ <ref>.  
    
    
    
    
    Let Y be a simplicial complex, and let G be a group 
    acting on Y by simplicial automorphisms.   Let I be a set equipped with a left Gâ€“action, and let 
    ={Î£_i}_iâˆˆ I be a covering of Y by subcomplexes, with the following properties:
    
      * g Î£_i = Î£_gi for all gâˆˆ G and iâˆˆ I;
         
      *  for any finite FâŠ‚ I, the intersection â‹‚_iâˆˆ FÎ£_i is either empty or 
    contractible.
    
    Let  be the nerve of the covering . 
    Then there is a 
     homotopy equivalence f  Yâ†’ (,ğ’¯_w).
    
    Let Y' be the barycentric subdivision of Y. We think of Y and Y' as the same underlying topological space, with different simplicial structures. 
    
    Every subcomplex Î£âŠ‚ Y be viewed as a subcomplex of Y'. Indeed, Î£âŠ‚ Y is a full subcomplex of Y', in the following sense: for every simplex Ï„âŠ‚ Y' whose vertices belong to Î£, it follows that Ï„âŠ‚Î£. This holds because the vertices of Ï„ correspond to simplices of Y; if these vertices belong to Î£, then so do the corresponding cells of Y, hence Ï„âŠ‚Î£.
    
    Complementary complexes and open neighborhoods: 
    For a subcomplex Î£âŠ‚ Y, 
    define the complementary complex T_Î£ to be the union of all closed simplices of Y' disjoint from Î£. Then T_Î£ is also a full subcomplex of Y'. Indeed, consider a simplex Ï„âŠ‚ Y' whose vertices are disjoint from Î£. Then Ï„âˆ©Î£ cannot contain any faces of Ï„, hence Ï„âˆ©Î£ = âˆ…. Since T_Î£ is a subcomplex of Y', it is closed (in the weak topology).
    
    Given a subcomplex Î£âŠ‚ Y, we define an open neighborhood U_Î£ = Y âˆ– T_Î£. Thus U_Î£ is the union of all the open simplices of Y' whose closures intersect Î£. 
    
    
    For every subcomplex Î£_i, where i âˆˆ I, we write U_i = U_Î£_i.  Observe that U_g i=gU_i for all gâˆˆ G and i âˆˆ I. We will prove the theorem by replacing the subcomplex cover = {Î£_i }_i âˆˆ I by the open cover
    = { U_i }_i âˆˆ I.
    
    Same nerve: Let Î£_Î± and Î£_Î² be a pair of subcomplexes of Y, not necessarily belonging to . We claim that Î£_Î±âˆ©Î£_Î² = âˆ… if and only if U_Î£_Î±âˆ© U_Î£_Î² = âˆ…. The â€œifâ€ direction is obvious. For the â€œonly ifâ€ direction, suppose that Î£_Î±âˆ©Î£_Î² = âˆ…. Then T_Î£_Î±âˆª T_Î£_Î² = T_Î£_Î±âˆ©Î£_Î² = T_âˆ… = Y', hence U_Î£_Î±âˆ© U_Î£_Î² = âˆ…, as desired.
    
    Now, let F âŠ‚ I be a finite set. By induction on |F|, combined with the argument of the above paragraph, we see that 
    â‹‚_iâˆˆ FÎ£_i = âˆ… if and only if â‹‚_iâˆˆ F U_Î£_i = âˆ…. Hence the open cover = { U_i }_i âˆˆ I and the subcomplex cover = {Î£_i }_i âˆˆ I have the same nerve .
    
    Same homotopy type: For every subcomplex Î£âŠ‚ Y, we claim that the open neighborhood U_Î£ deformation retracts to Î£. This is a standard fact about simplicial complexes, proved e.g. in Munkres <cit.>. The proof constructs a straight-line homotopy in every simplex ÏƒâŠ‚ Y' that belongs to neither Î£ nor T_Î£. The proof uses the fullness of Î£ and T_Î£ in Y', but does not depend on any finiteness properties of these complexes.
    
    Now, let F âŠ‚ I be a finite set such that â‹‚_iâˆˆ FÎ£_i â‰ âˆ…. Define Î£_F = â‹‚_iâˆˆ FÎ£_i, and recall that by hypothesis, Î£_F is contractible. Since U_Î£_F =  â‹‚_iâˆˆ F U_Î£_i, and U_Î£_F deformation retracts to Î£_F, it follows that â‹‚_iâˆˆ F U_i = â‹‚_iâˆˆ F U_Î£_i is also contractible.
    
    Conclusion: By a theorem of Bourgin <cit.>, the simplicial complex Y is paracompact (with the weak topology ğ’¯_w).
    We have shown that the open cover = { U_i }_i âˆˆ I and the subcomplex cover = {Î£_i }_i âˆˆ I have the same nerve . We have checked that U_g i=gU_i for all gâˆˆ G and i âˆˆ I. Furthermore, for every finite set F âŠ‚ I, the intersection â‹‚_iâˆˆ F U_i is either empty or contractible. Thus, by TheoremÂ <ref>, we have a  homotopy equivalence f  Yâ†’ (,ğ’¯_w).
    
    
    Â§ CUBE COMPLEXES AND THE ROLLER BOUNDARY
    
    
    This section recalls some background about CAT(0) cube complexes and their Roller boundaries. Many facts about CAT(0) cube 
    complexes, median graphs, wallspaces, and related structures occur in various 
     places in the literature, in many equivalent 
    guises. We have endeavored to connect some of the perspectives, in part because we will need to use these connections in the sequel. We refer the reader to <cit.> and <cit.> for more background.  
    
    
    
     Â§.Â§ CAT(0) cube complexes and metrics
    
    A cube is a copy of a Euclidean unit cube [-1/2,1/2]^n for 0â‰¤ n<âˆ.  A face of 
    [-1/2,1/2]^n is a subspace obtained by restricting some of the coordinates to Â±1/2.  A cube 
    complex is a CW complex whose cells are cubes and whose attaching maps restrict to isometries on faces.  A cube complex 
    with embedded cubes is nonpositively curved if, for all vertices v and all edges e_1,â€¦,e_k incident to v such that 
    e_i,e_j span a 2â€“cube for all iâ‰  j, we have that e_1,â€¦,e_k span a unique kâ€“cube. 
     If X is 
    nonpositively-curved and simply connected, then X is a CAT(0) cube complex.  The dimension of X, denoted X, is the 
    supremum of the dimensions of cubes of X.
    
    Throughout this paper, X will denote a finite-dimensional CAT(0) cube complex.   We let (X) denote the group of 
    cellular automorphisms of X.  We do not assume that X is locally finite. 
    
    The cube complex X carries a metric _X such that (X,_X) is a CAT(0) space, the restriction of _X to 
    each cube is the Euclidean metric on a unit cube, and each cube is geodesically convex (seeÂ <cit.>). 
     We refer to _X as the â„“^2 metric or the CAT(0) metric on X.  
     
    One can view X^(1) as a graph whose vertices are the 0â€“cubes and whose edges are the 1â€“cubes.  (We 
    often refer to 0â€“cubes as vertices of X, and 1â€“cubes as edges.)  We let d_1 denote the â„“^1 metric on the 
    vertex set X^(0), which is the restriction of the usual graph metric on X^(1). We refer to d_1 as the combinatorial metric on X^(0). A combinatorial geodesic between x,y âˆˆ X^(0) is an edge path in X^(1) that realizes d_1(x,y).
    
    
    
    
     Â§.Â§ Hyperplanes, half-spaces, crossing, and separation
    
    
    Let [- 1/2, 1/2]^n be an n-dimensional cube. A midcube of [- 1/2, 1/2]^n is the subset obtained by restricting one coordinate to be 0.
    
    A hyperplane of a CAT(0) cube complex X is a connected subset whose intersection with each cube is either a midcube 
    of that cube, or empty. The open 1/2â€“neighborhood of a hyperplane Ä¥ in the metric d_X is denoted N(Ä¥) is called the 
     open 
    hyperplane carrier of Ä¥. It is known that every open carrier N(Ä¥) is geodesically convex in d_X. Furthermore, X âˆ– N(Ä¥) consists of two connected components, each of which is also convex
     <cit.>.
     
     A component of X âˆ– N(Ä¥) is called a CAT(0) half-space. 
     The intersection of one of these components with the vertex set X^(0) is called a vertex half-space. 
     
     The two vertex half-spaces associated to a hyperplane Ä¥ are denoted h, h^*. Note that Ä¥^*= Ä¥.
     Given a vertex half-space h,  the corresponding CAT(0) half-space is the union of all cubes of X whose vertices lie in h.
     We will use the unmodified term half-space to mean either a CAT(0) half-space or a vertex half-space when the meaning is clear from context. 
    
    
     
     The collection of all vertex half-spaces is denoted by , or (X) if we wish to specify the space X.    
     If hâˆˆ, then h^* = X^(0)âˆ– h is exactly the complementary half-space associated to the same hyperplane 
    Ä¥.
    
    The collection of all hyperplanes of X is denoted  (for â€œwallsâ€). 
     Generally speaking, calligraphic letters denote collections of hyperplanes, while gothic letters denote collections of  
    half-spaces.
    There is a two-to-one map â†’, namely h â†¦Ä¥. Given a subset ğ’®âŠ‚, an orientation on ğ’® is a choice of a lift ğ’®â†’. 
    
    
     
    A  pair of half-spaces h,kâˆˆ are called transverse (denoted hâ‹” k) if the four intersections hâˆ© 
    k, hâˆ© k^*, h^*âˆ©  k and h^*âˆ© k^* are nonempty. In terms of the underlying hyperplanes Ä¥ and kÌ‚, 
    transversality is equivalent to the condition that Ä¥â‰ kÌ‚ and Ä¥âˆ©kÌ‚â‰ âˆ…. In this case, 
    we also write Ä¥â‹”kÌ‚.  We sometimes say that transverse hyperplanes cross.  
    
    Given subsets A,BâŠ‚ X, we say that Ä¥separatesA,B if, up to relabelling the half-spaces associated to 
    Ä¥, we have AâŠ‚ h and BâŠ‚ h^*.  We will usually be interested in situations where A,B are subcomplexes, sets 
    of vertices, or hyperplanes, in which case this notion is equivalent to another notion of separation:  namely that A,B lie in distinct components of X âˆ–Ä¥.  Later in the paper, we will occasionally use the 
    latter notion when we need to talk about points in N(Ä¥) being separated by Ä¥.  (Elsewhere in the literature, 
    e.g.Â <cit.>, the half-spaces associated to Ä¥ are defined to be the components of X âˆ–Ä¥, or sometimes 
    their closures.  This small difference in viewpoint is usually irrelevant.)
    
    
    If e is an edge, i.e. a 1â€“cube,  of X, then there is a unique hyperplane Ä¥ separating the two vertices of e.  
    We say that Ä¥ is dual toe, and vice versa.  Note that  Ä¥ is the unique hyperplane intersecting e.  
    More generally, if kâ‰¥ 0 and c is a kâ€“cube, then there are exactly k hyperplanes intersecting c.  These 
    hyperplanes pairwise cross, and their intersection contains the barycenter of c.  We say that c is dual to this 
    family of hyperplanes.  Any set of k pairwise-crossing hyperplanes is dual to at least one kâ€“cube.  In particular, 
    X bounds the cardinality of any set of pairwise crossing hyperplanes in X.
    
    For any points x,y âˆˆ X, define (x,y) to be the set of hyperplanes separating x from y.  If x,yâˆˆ X^(0), 
    then an edge path Î³ from x to y is a geodesic in X^(1) if and only if Î³ never crosses the same hyperplane twice. Consequently,
     
        _1(x,y)=|(x,y)|.
    
    In view of this, the following standard lemma relates the metrics _X and _1. See Caprace and 
    SageevÂ <cit.> or HagenÂ <cit.> for proofs.
    
    
    There are constants Î»_0 â‰¥ 1, Î»_1 â‰¥ 0, depending on X, such that the following holds. For any pair 
    of points x, y âˆˆ X,
    
        1/Î»_0 d_X(x,y) - Î»_1 â‰¤ |(x,y)| â‰¤Î»_0 d_X(x,y) + Î»_1.
    
    
    
    For an arbitrary set B âŠ‚ X, let (B) be the union of all (x,y) for all x,y âˆˆ B.  In practice, we will 
    often be interested in the following special cases.  First, if B is a hyperplane, then (B) coincides with the set of hyperplanes
    Ä¥ that cross B.  If B is a convex subcomplex (see DefinitionÂ <ref>), then (B) coincides with the set of Ä¥ with Ä¥âˆ© 
    Bâ‰ âˆ….  If B is a combinatorial geodesic in X^(1), then, because of the above characterization of _1, the set 
    (B) is the set of hyperplanes dual to edges of B, or equivalently the set of hyperplanes intersecting B, or 
    equivalently the set of hyperplanes separating the endpoints of B.
    
    
    
    One can extend the â„“^1 metric  on X^(0) to all of X as follows. On a single cube c, let d_1 |_c Ã— câ†’ be the standard â„“^1 metric. This can be extended to a path-metric on all of X by concatenating paths in individual cubes. MieschÂ <cit.> showed that this procedure gives a geodesic path metric on X that extends the graph metric on X^(1). With this extended definition, d_1 becomes bilipschitz to d_X, with the Lipschitz constant Î»_0 depending only on (X).
    
    
     Â§.Â§ The Roller boundary X
    
    Next, we define the Roller boundary and Roller compactification of X. 
    
    
    Every vertex vâˆˆ X^(0) defines the collection _v^+= {hâˆˆ: vâˆˆ h} of half-spaces containing v.  Going 
    in the opposite direction, the collection _v^+ uniquely determines v:
    
        â‹‚_h âˆˆ_v^+ h = {v}.
    
    
    We endow the set 2^ with the product topology, which is compact by Tychonoff's theorem. Recall that a basis for this 
    topology consists of cylinder sets defined by the property that finitely many coordinates (i.e. finitely many half-spaces)  take a specified value (0 
    or 1). Cylinder sets are both open and closed.
    
    There is a continuous one-to-one map X^(0)â†ª 2^ defined by vâ†¦_v^+. (In fact,  
    X^(0) is homeomorphic to its image if and only if X is locally compact. We will not need this fact.)
    
    
    The Roller Compactification of X^(0), denoted by XÌƒ or XÌƒ(), 
    is the closure of the image of X^(0) in 2^â„Œ. 
    The Roller Boundary of X is  X = XÌƒâˆ– X^(0). 
    
    
    Recall that (X) is the group of cubical automorphisms of X. We observe that the action of (X) extends to a 
    continuous action on XÌƒ and therefore on X.
    
    Let h âˆˆ(X). The extension of h to XÌƒ is defined to be the intersection in 2^ between XÌƒ and 
    the cylinder set corresponding to h. 
     It is straightforward to check that the extensions of h and h^* form a partition 
    of  XÌƒ. We think of the extensions of h and h^* as complementary (vertex) half-spaces in XÌƒ. By a slight abuse of 
    notation, we use the same symbol h to refer to both a half-space in X and its extension in XÌƒ.
    
    By the above discussion of the topology on 2^â„Œ, the basic open sets in XÌƒ are intersections between XÌƒ and 
    cylinder sets. Therefore, every basis set is a finite intersections of (extended) half-spaces.
    
    
    
    The duality between points and half-spaces in X, described above, extends to all of XÌƒ = X^(0)âˆª X.
    Let y âˆˆXÌƒ, and let _y^+ be the set of extended half-spaces that contain y. Then y and _y^+ determine 
    one another:
    
        â‹‚_h âˆˆ_y^+ h = { y }.
    
    
    Chatterji and Niblo <cit.>, and independently Nica <cit.>, extended Sageev's construction 
    <cit.> to prove the following.
    
    
    Let ' âŠ‚(X) be an involution-invariant collection of half-spaces. Then ' determines a CAT(0) cube 
    complex X(') and the Roller compactification XÌƒ(').  In particular, X((X)) = X.
    
    
    
    If  x âˆˆ X^(0), the corresponding set _x^+ âˆˆ 2^ satisfies the descending chain condition: any 
    decreasing sequence of elements of _x^+ is eventually constant. On the other hand, the collection of half-spaces _y^+ corresponding to a boundary point y 
    âˆˆ X will fail the descending chain condition. Namely, for yâˆˆXÌƒ we have that yâˆˆ X if and only if 
    there exists a sequence {h_n}_nâˆˆâŠ‚_y^+ such that h_n+1âŠŠ h_n for each nâˆˆ.
    
    
    
    
    
     Â§.Â§ Convexity, intervals, and medians
    
    Here, we discuss the related notions of convexity and intervals in X and XÌƒ. Since we are interested in two different metrics on X, there are several distinct definitions of convexity (â„“^1 geodesic convexity, cubical convexity, interval convexity) that turn out to be equivalent for cubical subcomplexes of X.
    
    We then introduce a median operation on XÌƒ and its restriction to X.
    
    
    
    
    A set A âŠ‚ X^(0) is called vertex-convex if it is the intersection of vertex half-spaces in 
    X. For a set S âŠ‚ X^(0), the vertex convex hull of S is the intersection of all vertex-convex sets containing S, or equivalently the  intersection of all vertex half-spaces containing S.
    
    A subcomplex C âŠ‚ X is called cubically convex 
    if it is the intersection of CAT(0) half-spaces. For a set S âŠ‚ X, the cubical convex hull, denoted (S), is the intersection of all cubically convex sets containing S, or equivalently the  intersection of all CAT(0) half-spaces containing S. We remark that for subcomplexes of X, this definition coincides with geodesic convexity in the CAT(0) metric d_X; see <cit.> and  <cit.>.
    
    
    Observe that if C is a full subcomplex of X (meaning, C contains a cube c whenever it contains the 0â€“skeleton of c), then C is cubically convex whenever C^(0) is vertexâ€“convex. For this reason, we can use the two notions of convexity interchangeably when referring to full subcomplexes. 
    
    
    Given x,y âˆˆ X^(0), define the (vertex) interval(x,y) to be vertex convex hull of {x, y}. Define the cubical interval(x,y) to be the cubical convex hull of {x, y}. 
    
    
    Observe that (x,y) is a full, convex subcomplex, and is the union of all the cubes whose vertex sets are contained in (x,y). In addition, ^(1)(x,y) is the union of all of the combinatorial geodesics from x to y. In fact, intervals can be used to characterize convexity as follows:
    
    
    A set A âŠ‚ X^(0) is vertex-convex if and only if the following holds: for all x,y âˆˆ A, the interval (x,y) âŠ‚ A.
    
    A subcomplex C âŠ‚ X is cubically convex if and only if the following holds: for all x,y âˆˆ C^(0), the cubical interval (x,y) âŠ‚ C.
    
    Suppose C is a cubically convex subcomplex and x,y âˆˆ C. Since (x,y) is the intersection of all convex subcomplexes containing x,y, and C is one such set, we have (x,y) âŠ‚ C. 
    
    Toward the converse, suppose that C is interval-convex, meaning (x,y) âŠ‚ C for every pair x,y. We wish to prove that C is convex.
    
    We claim the following: for every  hyperplane Ä¥ that intersects C and is dual to an edge e with endpoints x,y such that x âˆˆ C, the other endpoint y belongs to C as well. This can be shown as follows. Since Ä¥ intersects C, there is an edge e' âŠ‚ C that is dual to Ä¥. Let x', y' be the endpoints of e', such that x and x' are on the same side of Ä¥. Then (x,y') = (x,x') âŠ”Ä¥ = Ä¥âŠ”(y,y'). In particular, there exists a combinatorial geodesic from x to y' whose initial edge is e. Since C is interval-convex, this proves the claim.
    
    We can now show that C is cubically convex. Suppose z âˆˆ X^(0)âˆ– C. Let Î³âŠ‚ X^(0) be a shortest combinatorial geodesic from z to C, and let x be the terminus of Î³, and let e be the last edge of Î³. Since the next-to-last vertex of Î³ is not in C, the above claim implies that the hyperplane Ä¥ dual to e is disjoint from C, and separates C from z. Thus C is contained in a CAT(0) half-space disjoint from z. Since z was arbitrary, it follows that C is cubically convex.
    
    The proof for vertex-convex subsets is identical, up to replacing all the appropriate sets by their 0â€“skeleta.
    
    
    Our next goal is to extend the notion of convexity to XÌƒ. 
    It turns out that in XÌƒ, the correct definition of convexity begins with intervals. After developing some definitions and tools, we will eventually prove  a generalization of LemmaÂ <ref> to XÌƒ, using a very different argument.
    
    
    Given x,y âˆˆXÌƒ, define the interval(x,y) to be the intersection of all (extended, vertex) half-spaces that 
    contain both x and y.  Equivalently, 
    
        (x,y) = { z âˆˆXÌƒ  :  ^+_z âŠƒ ( ^+_xâˆ©^+_y) }.
    
    A nonempty set A âŠ‚XÌƒ is called convex if it contains (x,y) for all x, y 
    âˆˆ A.  
    
    
    As a very particular case, half-spaces and hence also their intersections are convex in XÌƒ.
    
    Observe that for x,y âˆˆ X^(0), the interval (x,y) will in fact be contained in X^(0), and coincides with the previous definition of (x,y). Consequently, X^(0) is convex in XÌƒ. By LemmaÂ <ref>, any vertex-convex subset of X^(0) is also convex in XÌƒ.
    
    Since XÌƒâŠ‚ 2^(X) is by definition a set of vertices, we do not define convex subcomplexes of XÌƒ.
    
    
    As in <cit.>, the fact that XÌƒ is a median space is captured by the following property: for every x,y,z âˆˆXÌƒ there is a unique point m = m(x,y,z) âˆˆXÌƒ such that 
    
        {m}= (x,y) âˆ©(y,z) âˆ©(x,z).
    
    This unique point m = m(x,y,z) is called the  median of x, y, 
    and z. 
    We will not need the general definition of an (extended) median metric space; 
    the only property of medians that we will need is  that m XÌƒÃ—XÌƒÃ—XÌƒâ†’XÌƒ satisfies (<ref>). 
    In terms of half-spaces, we have:
    
        ^+_m = (^+_x âˆ©^+_y) âˆª (^+_yâˆ©^+_z)âˆª ( ^+_x âˆ©^+_z).
    
    Since intervals between points in X^(0) are contained in X^(0), we see that m(x,y,z)âˆˆ X^(0) if 
    x,y,zâˆˆ X^(0).  So, the median m on XÌƒ restricts to a median m on X^(0).  The point m(x,y,z) is the unique 
    vertex m for which any two of x,y,z can be joined by a geodesic in X^(1) passing through m. In other words, we also get an analogue of  (<ref>) with (Â·,Â·) replaced by (Â·, Â·):
    
        {m}= (x,y) âˆ©(y,z) âˆ©(x,z)
          for   x,y,zâˆˆ X^(0).
    
    
    
     In fact, a graph with 
    this property â€” called a median graphâ€” is always the 1â€“skeleton of a uniquely determined CAT(0) cube 
    complexÂ <cit.>.  
    
    
     Â§.Â§ Lifting decompositions and convexity
    
    
    
    A set of half-spaces ğ”°âŠ‚ is called consistent if the following two conditions hold: if hâˆˆğ”° then h^*âˆ‰ğ”°, and if k âŠƒ h âˆˆğ”° then kâˆˆğ”°. Given a 
    subset ' âŠ‚, a lifting decomposition for ' is a consistent set of half-spaces 
    ğ”°âŠ‚âˆ–' such that = 'âŠ”ğ”°âŠ”ğ”°^*. 
    Lifting decompositions do not necessarily exist, and are not necessarily unique.
     
    Lifting decompositions naturally occur in the following way. Consider a set A âŠ‚XÌƒ. Analogous to _x^+,  we 
    define a set _A^+ = {hâˆˆ : AâŠ‚ h} of half-spaces that contain A, and observe that _A^+ is 
    consistent. Define _A^- = (_A^+)^* to be the set of half-spaces disjoint from A, and finally a set  
    
        _A = {hâˆˆ : Aâˆ© h â‰ âˆ…,   Aâˆ© h^*â‰ âˆ…}
    
     of half-spaces that cut A. Then we get a lifting decomposition = _A âŠ”_A^+ âŠ”_A^-, 
    where ğ”° = _A^+.
    
    
    
     Observe that if AâŠ‚ B, then _B^+ âŠ‚_A^+. 
    
    
    Given points x,y âˆˆXÌƒ, let (x,y)= _x^+ _y^+ denote 
    the set of half-spaces that separate x from y. 
     More generally, given two disjoint convex sets A,BâŠ‚XÌƒ, let (A,B)= _A^+ _B^+ denote 
    the set of half-spaces that separate A from B. 
    
    In an analogous fashion, we generalize the definition of (x,y) from SectionÂ <ref> to convex subsets A, 
    B âŠ‚XÌƒ. For subsets of this form, (A,B) = (A,B) consists of all the hyperplanes that 
    separate A from B. 
    We also extend the
     â„“^1 metric on X^(0) to XÌƒ, where 
    d_1(x,y) = | (x,y) | = 1/2 | _x^+ _y^+| is allowed to take the value âˆ.
    
     The following result says that lifting decompositions are in one-to-one correspondence with Roller-closed subcomplexes of 
    XÌƒ. 
    
    
       
    
    
     
    The following are true:
    
      *  Suppose that 'âŠ‚(X). If there exists a lifting decomposition 
    ğ”° for ', then there is a d_1â€“isometric
     embedding XÌƒ(') â†ªXÌƒ induced from the map 2^'â†ª 2^(X) where U 
    â†¦ UâŠ”ğ”°. The image of this embedding is 
    
    
        â‹‚_hâˆˆğ”° hâŠ‚XÌƒ.
    
    
      *  Similarly, if ğ”°âŠ‚(X) is a consistent set of half-spaces, then, 
    setting _ğ”° = 
    (X)âˆ–(ğ”°âŠ”ğ”°^*) we get an isometric embedding 
    XÌƒ(_ğ”°) â†ªXÌƒ, obtained as above, onto
    
    
        â‹‚_hâˆˆğ”° hâŠ‚XÌƒ.
    
    
      *  The set ğ”° satisfies the descending chain condition if and only if the image of 
    X(_ğ”°) is in X. 
    
    Furthermore, if the set ğ”° is Gâ€“invariant, for some group Gâ‰¤(X), then, with the restricted action on 
    the image, the above natural embeddings are  Gâ€“equivariant.
    
    
    This result is a slightly strengthened version of  <cit.>. See also <cit.> for a 
    very similar statement.
    
    
    We remark that  
    PropositionÂ <ref> includes the possibility that ğ”°=âˆ… and hence âŠ”âˆ…âŠ”âˆ… is a legitimate lifting decomposition of . In this case, recall that an intersection over an empty collection of sets is everything, i.e. â‹‚_hâˆˆâˆ… h= XÌƒ. 
    
    
    Suppose that there is a lifting decomposition ğ”° for  '. Then, since s âˆ© s^* = âˆ… 
    and = 'âŠ” s âŠ” s^*, we deduce that ' = âˆ–( sâŠ” s^*) 
    is involution invariant. 
    
    Next, we claim that ' âŠ‚ has a property called tightly nested, meaning that  for every pair h,kâˆˆ', 
    and for every â„“âˆˆ with hâŠ‚â„“âŠ‚ k, we have â„“âˆˆ'. Assume, for a contradiction, that 
    h,kâˆˆ', and â„“âˆˆ with hâŠ‚â„“âŠ‚ k, but 
    â„“âˆ‰'. Then (up to replacing the three half-spaces with their complements) we may assume that â„“âˆˆğ”°. But then kâˆˆğ”°, a contradiction. 
    
    With the verification that ' is involution invariant and tightly nested, our hypotheses imply those of  <cit.>. 
    Now, conclusions <ref>â€“<ref> follow from that lemma.
    
    Finally, the conclusion about Gâ€“invariance follows because the embeddings are canonically determined by the associated 
    half-spaces.
    
    In PropositionÂ <ref>, the  isometric embeddings of XÌƒ(') and XÌƒ(_ğ”°) restrict to 
    isometric embeddings of X(') and X(_ğ”°), respectively. 
    Although X is typically not closed, the images under the isometric embedding of  X(') and X(_ğ”°)  always lie in X. Indeed, recall from the discussion following Theorem 
    <ref> that a point belongs to the Roller boundary if and only if there is an infinite descending chain  of 
    half-spaces containing the point in question. Hence, if U has an infinite descending chain, then so does UâŠ” 
    s. 
    
    
    
    As a first application of PropositionÂ <ref>, we will prove a generalization of LemmaÂ <ref> to XÌƒ. Observe that a naive generalization of  LemmaÂ <ref> does not hold, because X is (interval) convex in XÌƒ by DefinitionÂ <ref>, but is not an intersection of extended half-spaces. However, the following lemma says that a closed, convex set in XÌƒ is always an intersection of extended half-spaces.
    
    
    Let A âŠ‚XÌƒ be a convex set. Then the Roller closure A in XÌƒ
     is the image of XÌƒ(_A) under the embedding of PropositionÂ <ref>, and
     
        A = â‹‚_h âˆˆ_A^+ h = â‹‚_A âŠ‚ h h.
    
    Observe that _A^+ is a consistent set of half-spaces. Thus PropositionÂ <ref>.<ref> gives an embedding XÌƒ(_A) â†ªXÌƒ whose image is
     
        W =  â‹‚_A âŠ‚ h h = â‹‚_h âˆˆ_A^+ h =  â‹‚_h âˆˆ_Ãƒ^+ h.
    
    Here, the first equality is the definition of W, the second equality is the definition of _A^+, and the third equality holds because half-spaces are closed, meaning _A^+=_Ãƒ^+.
     
    It remains to show that A = W. The inclusion AâŠ‚ W is obvious, because AâŠ‚ h for every h âˆˆ_Ãƒ^+. To prove the reverse inclusion, suppose for a contradiction that there is a point  y âˆˆ W âˆ–Ãƒ. Since XÌƒâˆ–Ãƒ
    is open, there is a basic open neighborhood of y of the form â‹‚_i=1^n h_i, such that 
    
        y âˆˆ( â‹‚_i=1^n h_i ) âŠ‚XÌƒâˆ–Ãƒ.
    
    Therefore, A âŠ‚ h_1^*âˆªâ‹¯âˆª h_n^*. Without  loss of generality, assume that n is minimal  in the sense that 
    for each j =1, â€¦, n there is a point 
    
        a_j âˆˆ Aâˆ–(â‹ƒ_j â‰  i=1^n h_i^* ) = A âˆ©(â‹‚_j â‰  i=1^n h_i ).
    
    One crucial observation is that nâ‰¥ 2: otherwise, if A âŠ‚ h_1^*, then h_1 âˆ© W = âˆ…, but we know that y âˆˆ h_1 âˆ© W.
    
    
    Now, define p = m(y,a_1, a_2). Recall that (a_1,a_2)âŠ‚ A, because A is convex. By the definition of medians, we have 
    
        p âˆˆ(a_1,a_2)âŠ‚ A,     
        p âˆˆ(y, a_1) âŠ‚(â‹‚_j =2^n h_i ),
             
        p âˆˆ(y, a_2) âŠ‚ h_1.
    
    Consequently, we have p âˆˆ A âˆ©( â‹‚_i =1^n h_i )= âˆ…, a contradiction.
    Thus A = W.
    
    
     Â§.Â§ Gates and bridges
    
    A very useful property of a convex subset AâŠ‚ X^(0) is the existence of a gate map_A  Xâ†’ A; this is 
    a well-known notion, see e.g.Â <cit.> and the citations therein.  Metrically, 
    _A  X^(0)â†’ A^(0) is just closest-point projection, but gates can be characterized entirely in terms of the median 
    (see e.g.Â <cit.> and citations therein).  Since we saw that XÌƒ has a median satisfying (<ref>), convex 
    subsets of XÌƒ do similarly admit gates.  This is the content of  
    PropositionÂ <ref>, which has the advantage of showing an important relationship between 
    gates and walls.
    
    Recall that (x,Y) is the set of hyperplanes separating x from Y, where YâŠ‚XÌƒ is convex. 
    
    
    
     Let CâŠ‚XÌƒ be closed and convex. There is a unique projection _CXÌƒ C such that for any xâˆˆXÌƒ we have 
     
        (x,_C(x)) = (x,C).
    
    Let = _CâŠ”_C^+ âŠ”_C^- be the lifting decomposition associated to C.  The map 
    2^â†’ 2^_C defined by Uâ†¦ Uâˆ– (_C^+ âŠ”_C^-) restricts to a surjection XÌƒXÌƒ(_C). 
    Next, PropositionÂ <ref> gives an embedding  XÌƒ(_C) â†’XÌƒ, namely V â†¦ V âŠ”_C^+.
    Composing the surjection XÌƒXÌƒ(_C) with the embedding XÌƒ(_C) â†’XÌƒ yields a map _C XÌƒâ†’XÌƒ. The image _C(XÌƒ) is C since, by LemmaÂ <ref>, the image of the embedding XÌƒ(_C)â†’XÌƒ is exactly C=C.
    
    To prove the equality in the statement, first observe that (x,C) âŠ‚(x,_C(x)) because _C(x) âˆˆ C. For the opposite inclusion, consider a hyperplane Ä¥âˆˆ(x,_C(x)), and choose an orientation h âˆˆ_x^+. By the definition of _C, we have
    
        __C(x)^+ = (_x^+ âˆ–_C^-) âˆª_C^+.
    
    Since h âˆˆ_x^+ âˆ–__C(x)^+, we must have h âˆˆ_C^-, hence Ä¥âˆˆ(x,C). Thus (x,C) = (x,_C(x)).
    
    Finally, for x âˆˆ C, we must have x = _C(x) because (x,_C(x)) = (x,C) = âˆ…. Thus _C is indeed a projection to C.
    
    
    Note that _C restricts to the identity on C.  We call _C the gate map to C, which is consistent 
    with the terminology used in the theory of median spaces because of the following lemma:
    
    
    Let _C be the map from PropositionÂ <ref>.  Then for all xâˆˆXÌƒ and yâˆˆ C, we have 
    m(x,y,_C(x))=_C(x).  In particular, _C(x) âˆˆâ‹‚_y âˆˆ C(x,y).
    
    By PropositionÂ <ref> and the fact that yâˆˆ C, we have (x,_C(x))âŠ‚(x,y), so 
    (x,_C(x))âŠ‚(x,y).  So, _C(x)âˆˆ(x,y)âˆ©(x,_C(x))âˆ©(y,_C(x)), hence m=_C(x).
    
    
    The above lemma has two corollaries. First, we can characterize medians in terms of projections:
    
    
    Suppose that x,y,z âˆˆ X^(0). Then _(x,y)(z)=m(x,y,z). 
    
    By
    LemmaÂ <ref>, we have _(x,y)(z)  âˆˆ(x,z) and _(x,y)(z) âˆˆ(y,z).  On the 
    other hand, _(x,y)(z)âˆˆ(x,y) by definition.  So, by (<ref>), we get  
    _(x,y)(z)=m(x,y,z).
    
    
    Second, LemmaÂ <ref> allows us to project from X to convex subcomplexes of X.
    
    
    Let A âŠ‚ X be a convex subcomplex. Then, for all x âˆˆ X^(0), we have _A (x) âˆˆ A. Consequently, we get a projection _A = _A X^(0)â†’ A^(0).
    
    Let x âˆˆ X^(0) and y âˆˆ A^(0). By LemmaÂ <ref>, we have _A(x) âˆˆ(x,y) âŠ‚ X^(0). But Aâˆ© X^(0) = A^(0).
    
    In fact, it is possible to extend _A over higher-dimensional cubes to 
    get a map _A  Xâ†’ A. This is done as follows (see also <cit.>).  First let e be a 1â€“cube of X joining 0â€“cubes x,y and dual to a hyperplane Ä¥.  From 
    PropositionÂ <ref>, one has the following: if Ä¥ does not cross A, then _A(x)=_A(y), and, otherwise, _A(x) and _A(y) are joined by an edge eÌ…âŠ‚ A dual 
    to Ä¥.  
    
    In the former case, _A extends over e by sending every point to _A(x)=_A(y); in the latter case, we extend by declaring _A  eâ†’eÌ… to be the obvious 
    isometry. 
    
    Now, if c is a dâ€“cube for dâ‰¥ 2, then for some sâˆˆ{0,â€¦,d}, there are 1â€“cubes e_1,â€¦,e_sâŠ‚ c that span an sâ€“cube c' and have the property that the 
    hyperplanes Ä¥_1,â€¦,Ä¥_s respectively dual to e_1,â€¦,e_s are precisely the hyperplanes intersecting both c and A.  (The case s=0 corresponds to the situation where no 
    hyperplane intersecting c intersects A, and c' is an arbitrary 0â€“cube of c.)  So for 1â‰¤ iâ‰¤ s, we have that eÌ…_i=_A(e_i) is a 1â€“cube of A dual to Ä¥_i, and the 
    1â€“cubes eÌ…_1,â€¦,eÌ…_s span an sâ€“cube cÌ…'.  We extend _A over c' using the obvious cubical isometry c'â†’cÌ…' extending the map _A on 1â€“cubes.  By 
    construction, for each vâˆˆ c^(0), there is a unique 0â€“cube v'âˆˆ c' such that _A(v)=_A(v'), the assignment vâ†¦ v' extends to a cubical map câ†’ c' (collapsing the 
    hyperplanes not in {Ä¥_1,â€¦,Ä¥_s}), and composing this with _A:c'â†’ A gives the (extended) gate map _A:câ†’ A.  Note that c'âŠ‚ c is only unique up to parallelism, 
    but any two allowable choices of c' give the same map câ†’ A.  
    
    
    
    We conclude that gates enjoy the following properties: 
    
    
    Let AâŠ‚ X be a convex subcomplex.  Then:
    
      *  For all x,yâˆˆ X, we have (_A(x),_A(y))=(x,y)âˆ©(A), and (x,_A(x))=(x,A).
      *  The map _A is 1â€“lipschitz on X^(0) with the d_1 metric and the CAT(0) 
    metric d_X.
    
    For 0â€“cubes, the first part of conclusionÂ <ref> appears in various places in the literature; see e.g.Â <cit.>, or one can deduce it easily from 
    PropositionÂ <ref>.  The second part of the first assertion (again for 0â€“cubes) restates PropositionÂ <ref>.  The generalization of <ref> to arbitrary points in X 
    follows immediately from the corresponding assertion for 0â€“cubes, together with the construction in RemarkÂ <ref>. 
    
    Finally, <ref> implies the first part of <ref>, since _1(x,y)=|(x,y)| for 
    0â€“cubes x,y.  For the second part, first note that the restriction of Ï€_A to each cube is 1â€“lipschitz for the 
    CAT(0) metric, since it factors as the natural projection of the cube onto one of its faces (which is lipschitz for the 
    Euclidean metric) composed with an isometric embedding.  Now, fix x,yâˆˆ X and let Î³ be the CAT(0) geodesic joining 
    them, which decomposes as a finite concatenation of geodesics, each lying in a single cube.  Each such geodesic is mapped to 
    a path whose length has not increased, so Ï€_Aâˆ˜Î³ is a path from Ï€_A(x) to Ï€_A(y) of length at most 
    _X(x,y), as required.
    
    
    The following standard application of gates is often called the bridge lemma.  
    
    
    
    Let I,JâŠ‚ X be convex subcomplexes.  Let _I  X â†’ I and _J  Xâ†’ J be the gate maps.  Then the following hold:
     
      * _I(J) and _J(I) are convex subcomplexes.
         
      * (_I(J))=(_J(I))=(I)âˆ©(J).
         
      *  The map _I _J(I)â†’_I(J) is an isomorphism of CAT(0) cube complexes.
         
      *  The cubical convex hull  (_I(J)âˆª_J(I)) is a CAT(0) cube complex isomorphic to _J(I)Ã—(x,_J(x)) for any vertex xâˆˆ_I(J).
    
      *  If Iâˆ© Jâ‰ âˆ…, then _I(J)=_J(I)=Iâˆ© J, and (Iâˆ© J)=(I)âˆ©ğ’²(J).
     
         This can be assembled from results in the literature in various ways.  For example, the first statement is part 
    ofÂ <cit.>; the second and last statements follow fromÂ <cit.>.  The 
    third follows fromÂ <cit.>.  For the fourth, seeÂ <cit.> orÂ <cit.>.
    
    
     Â§.Â§ Facing tuples and properness
    
    A facing kâ€“tuple of hyperplanes is a set {Ä¥_1,â€¦,Ä¥_k} of hyperplanes such that, for each iâ‰¤ 
    k, we can choose a half-space h_i such that h_iâˆ© h_j=âˆ… for iâ‰  j.  We are often particularly interested in 
    facing triples, since many of the subcomplexes of X considered later in the paper will be CAT(0) cube complexes that do 
    not contain facing triples.
    
    One useful application of the notion of a facing tuple is the following lemma, which in practice will be used to guarantee 
    properness of certain subcomplexes of X.  SeeÂ <cit.> for a more detailed discussion. See also <cit.> for a related result,  where X is required to  isometrically  embed into ^D for some D.
    
    
    
    Let X be a CAT(0) cube complex of dimension D<âˆ.   Suppose that there exists T such that X does not contain a 
    facing Tâ€“tuple.  Then  (X,_X) is a 
    proper CAT(0) space.
    
    Let Râ‰¥ 0 and let B be a ball of radius R in X (with respect to the CAT(0) metric _X).  Let (B) be the set of hyperplanes intersecting B.
    
    We say that hyperplanes Ä¥_1,â€¦,Ä¥_n in (B) form a chain if (up to relabelling), each
    Ä¥_i separates Ä¥_i-1 from Ä¥_i+1 for 2â‰¤ iâ‰¤ n-1.
    
    We claim that there exists N, depending only on D and R,  such that any chain in (B) has cardinality at most 
    N. Indeed, if Ä¥_1,â€¦,Ä¥_n is a chain, then any edge dual to Ä¥_1 lies at â„“^1 distance at least 
    n-2 from any edge dual to Ä¥_n. Now,  LemmaÂ <ref> implies there exists N (depending only on D and R) such that n>N implies that 
    _X(Ä¥_1,Ä¥_n)>2R.  This is impossible, since Ä¥_1,Ä¥_n intersect a common Râ€“ball.
    
    On the other hand, <cit.> provides a constant K=K(D,T) such that any finite set 
    â„±âŠ‚(B) must contain a chain of length at least |â„±|/K.  So, |(B)|â‰¤ KN.
    
    Let (B) be the cubical convex hull of B. 
      The set of hyperplanes of the CAT(0) cube complex (B) is ğ’²(B), which we have just shown is finite.  Hence (B) is a compact CAT(0) cube complex, and hence proper.  Since Bâ†ª X is an isometric embedding (with respect to CAT(0) metrics), B is a ball in (B), and is therefore 
    compact.  This completes the proof.
    
    
    The use of the above lemma will be the following.  Given xâˆˆ X^(0) and yâˆˆ X, we can consider the interval 
    (x,y) in XÌƒ.  The intersection (x,y)âˆ© X is a vertex-convex set, which is the 0â€“skeleton of a uniquely 
    determined convex subcomplex A.  Note that (A)=(x,y).  This 
    infinite set of hyperplanes cannot contain a facing triple.  Hence, LemmaÂ <ref> shows that A is 
    proper.  We will need this in the proof of LemmaÂ <ref>, to arrange for a sequence of CAT(0) geodesic segments in A to converge uniformly on compact sets to a CAT(0) 
    geodesic ray.  In this way, we avoid a blanket hypothesis that X is proper. 
    
    Note that we therefore only use a special case of the lemma, namely properness of cubical intervals.  Properness of intervals follows from a much stronger statement: intervals endowed with the â„“_1 metric  isometrically embed into ^(X) (i.e. are Euclidean). It follows that intervals are proper in the CAT(0) metric, since the two metrics are bilipschitz.  This 
    embedding  into ^(X) goes back at least to <cit.>. This embedding is closely related to <cit.>, which bounds the cardinality of facing tuples in Euclidean CAT(0) cube 
    complexes, which include, but are more general than, cubical intervals.  
    
    
    
    
     Â§.Â§ Combinatorial Geodesic Rays
    
    
    Next, we develop some basic facts about combinatorial geodesics in CAT(0) cube complexes that will be needed when we relate different types of boundaries.
    
    
     A map Î³ [0, âˆ)â†’ X^(1) is said to be a combinatorial geodesic ray if Î³() âŠ‚ X^(0) and for each 
    n,m âˆˆ we have  d_1(Î³(n), Î³(m) ) = |n-m| and Î³ is an isometry on each interval [n, n+1]. 
    
     Let Î³ [0,âˆ)â†’ X be a combinatorial geodesic ray. There exists a unique point  yâˆˆ X such that Î³(n) â†’  y
    in XÌƒ as n â†’âˆ. 
    
    
    In the sequel, we will write y = Î³(âˆ) to mean Î³(n) â†’  y.
    
    
    
    Consider the set
    
        D(Î³) = {hâˆˆ: Î³([N,âˆ)âˆ©)âŠ‚ h for some  Nâˆˆ}.
     
    This is clearly a consistent choice of half-spaces. We claim that for each hâˆˆ, either h or h^* belongs to 
    D(Î³).
    Indeed, up to replacing h by h^*, there must be a monotonic sequence n_kâ†’âˆ such that Î³(n_k) âˆˆ h. Since h is 
    convex, it follows that Î³([n_1,âˆ)âˆ©) âŠ‚ h.
    
    Now, define C = 
    â‹‚_ h âˆˆ D(Î³) h. We claim that C consists of exactly one point. Note that C â‰ âˆ… because 
    it is a nested intersection of compact sets in XÌƒ. On the other hand, if x,x' âˆˆ C are distinct points, then consider 
    a 
    half-space h such that x âˆˆ h and x' âˆˆ h^*. This half-space must satisfy both h âˆˆ D(Î³) and h^* âˆˆ D(Î³), a contradiction. Thus 
    C = {y}, as desired.
    
     For every xâˆˆ X^(0) and every y âˆˆ X, there is a combinatorial geodesic ray Î³ [0,âˆ) â†’ X such that Î³(0) = 
    x and Î³(âˆ) =  y. 
    
    
    The proof of LemmaÂ <ref> is modeled on the construction of normal cubed paths, introduced by Niblo and Reeves inÂ <cit.>.
    
    
    Without loss of generality, let us assume that XÌƒ= (x,y), that is, (X) = _x^+_y^+. 
    The collection of half-spaces _x^+âˆ–_y^+ is partially ordered by set inclusion. Consider h, k âˆˆ_x^+âˆ–_y^+. Since xâˆˆ hâˆ© k and yâˆˆ h^*âˆ© k^*, the possible relations between h and k are: hâŠ‚ k or kâŠ‚ 
    h or hâ‹” k. In other words, incomparable elements are transverse. In particular, all minimal elements of 
    _x^+âˆ–_y^+ must be pairwise transverse.  By finite dimensionality, the set M_1 of minimal elements is 
    finite.  Let x_1 be the vertex obtained by replacing every h âˆˆ M_1 by h^*, that is, _x_1^+= 
    (_x^+âˆ– M_1)âˆª M_1^*, a clearly consistent and total choice of half-spaces. In other words, x_1 is 
    diagonally across from x in the unique maximal cube containing x in the vertex interval (x, y). 
    
    Proceeding by induction, suppose that x_n-1 has been defined. 
    Let M_n be the set of minimal elements of  _x_n-1^+ âˆ–_y^+.
    
    Let x_n be the vertex obtained by replacing every h âˆˆ M_n by h^*, corresponding to the half-space interval _x_n^+= (_x_n-1^+âˆ– M_n)âˆª M_n^*.
    
    Observing that M_k^*âˆ© M_j = âˆ… for j < k,
    we conclude that 
    
        _x_n^+= ( _x^+âˆ–â‹“j=1n-1 M_j ) âˆª( â‹“j=1n-1 M_j^*).
    
    
    Fix k<m âˆˆ. We claim that for any integer â„“âˆˆ  [k, m], x_â„“ lies on every geodesic path from x_k to 
    x_m.
    Equivalently, we claim that
    the median of x_k, x_â„“, and x_m is x_â„“. Recall that this will be the case if every half-space 
    containing x_k and x_m also contains x_â„“. This containment can be established as follows
    
        _x_k^+ âˆ©_x_m^+     = ( _x^+ âˆ–â‹“j=1m-1 M_j )âˆª( â‹“j=1k-1M_j^* ) 
           âŠ‚( _x^+ âˆ–â‹“j=1â„“-1 M_j ) âˆª( â‹“j=1â„“-1M_j^* ) = 
        _x_â„“^+.
    
    This proves the claim.
    
    Set x_0=x and choose an edge-geodesic Î³_k  [0, d(x_k-1, x_k)] â†’(x_k-1, x_k) from x_k-1 to x_k. Finally, define Î³ as the infinite
    concatenation Î³_1  Î³_2 â‹¯. Then, by construction, Î³(âˆ) =  y.
    
    
    We will discuss further properties of combinatorial geodesic rays in SectionÂ <ref>.
    
    
    
    Â§ CUBOID COMPLEXES WITH MODIFIED CAT(0) METRICS
    
    
    A cuboid is a box of the form [0,a_1] Ã—â€¦Ã— [0,a_n] âŠ‚^n. 
    In this section, we describe a way to modify the metric on a
    finite-dimensional CAT(0) cube complex X to produce a new CAT(0) space whose cells are cuboids rather than cubes.   Our 
    results relating the Tits boundary and simplicial boundary of a CAT(0) cube 
    complex will carry over to this context with small changes to some proofs, which we will indicate in the relevant places.
    
    The reader only interested in CAT(0) cube complexes with the standard CAT(0) metric can safely skip this section, apart from the statements of LemmasÂ <ref> andÂ <ref>. 
    Those lemmas are cuboid generalizations of standard results in the literature, namelyÂ <cit.> andÂ <cit.>. Thus, in the standard metric, one can substitute those results from the literature for the lemmas of this section.
    
    
    
    Let X be a finite-dimensional CAT(0) cube complex and let G â†’(X) be a group acting on X by cubical automorphisms.  Let 
     be the set of hyperplanes in X. 
    
    
    A hyperplane rescaling 
     of X is a map Ïâ†’ (0,âˆ). The rescaling is called Gâ€“admissible 
    if it is Gâ€“invariant, and in addition we have m_Ï=inf_Ä¥âˆˆÏ(Ä¥)>0 and M_Ï=sup_Ä¥âˆˆÏ(Ä¥)<âˆ.
    
    
    Let Ï be a Gâ€“admissible hyperplane rescaling of X.  Fix a cube c of X.  For each hyperplane Ä¥_i 
    intersecting c, let Ï_i=Ï(Ä¥_i).  Regarding c as an isometric 
    copy of âˆ_i[0,Ï_i], with the Euclidean metric, let d_X^Ï be the resulting piecewise-Euclidean path metric on 
    X.
    
      The following result is a special case of a theorem of BowditchÂ <cit.>, but we are able to give a direct proof. 
    
    
    Suppose that G acts on X by cubical automorphisms, and let Ï be a Gâ€“admissible hyperplane rescaling of X.  Then 
    (X,d_X^Ï) is a CAT(0) space, and the 
    action of G on (X,d_X^Ï) is by isometries.
    
    Let x âˆˆ X be an arbitrary point. Then the link of x in (X,^Ï_X) 
    is isometric to the link of x  in (X,d_X), and is hence a CAT(1) space. Since the amount of rescaling in bounded, there is a small Ïµ depending on x and Ï such that the 
    Ïµâ€“balls about x in the two metrics are (abstractly) isometric. Thus (X, d_X^Ï) is locally CAT(0). Recalling that X is contractible (the homeomorphism type has not changed), we 
    conclude that (X, d_X^Ï) is globally CAT(0) by Cartanâ€“Hadamard theoremÂ <cit.>. 
    
     Since Ï is Gâ€“equivariant, G takes cuboids to d_X^Ïâ€“isometric cuboids, 
    hence G acts by isometries.  
    
    
    One can also prove LemmaÂ <ref> using a result of Bridson and HaefligerÂ <cit.>. Our proof is essentially the same argument, but the cubical structure allows us to assume bounded rescaling rather than
    finitely many shapes.
    
    
    
    Consider a finite-dimensional CAT(0) cube complex X, a group G acting on X by cubical automorphisms, and a Gâ€“admissible hyperplane rescaling 
    Ï of X. We say that the CAT(0) metric 
    d_X^Ï from LemmaÂ <ref> is a CAT(0) cuboid metric on X, and (X,d_X^Ï) is a CAT(0) 
    cuboid complex.
    
    Suppose that G acts on X by cubical automorphisms, and let Ï be a Gâ€“admissible hyperplane rescaling of X. Define (X^Ï) âŠ‚(X) to be the automorphism group of the rescaled complex (X,d_X^Ï). By construction, the representation G â†’(X) has image in 
    (X^Ï). 
    
    Every cubically convex subcomplex Y âŠ‚ X is also geodesically convex in the rescaled metric d_X^Ï.
    In particular, every CAT(0) half-space (k) is convex in d_X^Ï.
    
    By DefinitionÂ <ref>, a cubically convex subcomplex is an intersection of CAT(0) half-spaces. Since any intersection of d_X^Ïâ€“convex sets will be d_X^Ïâ€“convex, it suffices to prove that CAT(0) half-spaces are d_X^Ïâ€“convex.
    
    Now, let k âˆˆ(X), and let (k) be the the corresponding CAT(0) half-space. Observe that (k) is a CAT(0) cube complex in its own right with half-space structure (k) = {hâˆˆ: 
    hâ‹” k}. Let G_k= _G(k) which then acts by isometries on ((k)). Clearly the restriction 
    Ï|_(k) is G_kâ€“admissible. By Lemma <ref> we have ((k), 
    d^Ï|(k)_(k)) is a CAT(0) space, so that
    
        d_X^Ï|_(k) = d^Ï|_(k)_(k).
    
    
    Therefore, the identity inclusion (h) â†ª X is isometric with respect to this new CAT(0) metric, and in 
    particular (k) is d_X^Ïâ€“convex. 
    
     
     The following result is a generalization ofÂ <cit.> for CAT(0) cuboid complexes.
    
    
    
    Let X be a CAT(0) cube complex and let Ï be a Gâ€“admissible hyperplane rescaling.  Suppose that (X) =ğ’²_1âŠ”_2, where Ä¥,vÌ‚ cross whenever Ä¥âˆˆ_1,vÌ‚âˆˆ_2.  
    
    Then X=X_1Ã— X_2 (as a product cube complex), where X_1 and X_2 are CAT(0) cube complexes dual to _1 and _2.  
    
    Letting p_i  Xâ†’ X_i denote the natural projection, 
    for iâˆˆ{1,2}, the map p_i induces a bijection on the sets of hyperplanes such that the preimages of the hyperplanes in 
    X_i are the hyperplanes in _i.  
    
    Moreover, restricting Ï 
     to _i, we obtain rescaled CAT(0) metrics ^Ï_X_i such that (X_i,^Ï_X_i) is a CAT(0) 
    cuboid complex and we have
    
        ^Ï_X(x,y)=âˆš(^Ï_X_1(p_1(x),p_1(y))^2+^Ï_X_2(p_2(x),p_2(y))^2)
     
     for all x,yâˆˆ X. 
    
    The statement about X decomposing as a product cube complex follows fromÂ <cit.> and the 
    discussion inÂ <cit.> preceding it.  So, it remains to prove the 
    statement about rescaled CAT(0) metrics.
    
    Admissibility of the rescalings on X_1,X_2 follows from admissibility of Ï and the fact that p_i is a 
    restriction quotient in the sense ofÂ <cit.>, meaning it sends 
    hyperplanes to hyperplanes.  So, LemmaÂ <ref> makes each (X_i,^Ï_X_i) a CAT(0) cuboid 
    complex.
    
    We now verify the metric statement.  Let x,yâˆˆ X.  Let Î± be the ^Ï_Xâ€“geodesic from x=(p_1(x),p_2(x)) 
    to y=(p_1(y),p_2(y)).  Let Î² be the ^Ï_Xâ€“geodesic from 
    (p_1(x),p_2(y)) to (p_1(x),p_2(x)), and let Î³ be the ^Ï_Xâ€“geodesic from (p_1(y),p_2(y)) to (p_1(x),p_2(y)).  So, 
    Î±Î³Î² is a geodesic triangle.  
    
    Note that every point on Î² has the form (p_1(x),z) and every point on Î³ has the form (z,p_2(y)), because the 
    p_i are restriction quotients and therefore have convex fibers by 
    LemmaÂ <ref>.  In particular, Î²=^Ï_X_2(p_2(x),p_2(y)) and 
    Î³=^Ï_X_1(p_1(x),p_1(y)) and p_1,p_2 are respectively isometries on Î³ 
    and Î².  Moreover, the Alexandrov angle (see Definition <ref>) formed by Î² and Î³ at their common point is Ï€/2.  Perform the 
    same construction with (p_1(x),p_2(y)) replaced by (p_1(y),p_2(x)).  This 
    yields a geodesic quadrilateral in (X, ^Ï_X), with all angles Ï€/2, two adjacent sides having length 
    ^Ï_X_2(p_2(x),p_2(y)) and ^Ï_X_1(p_1(x),p_1(y)), and x and y as opposite 
    corners.  The Flat Quadrilateral Theorem (<cit.>) now implies that 
    
        ^Ï_X(x,y)=âˆš(^Ï_X_1(p_1(x),p_1(y))^2+^Ï_X_2(p_2(x),p_2(y))^2),
    
    as required.
    
    
    We also need the following standard lemma.  In the context of CAT(0) cube complexes, this isÂ <cit.>.  We state it here for cuboid complexes.  The proof 
    fromÂ <cit.> goes through with tiny changes that we indicate below.
    
    
     Let X be a Dâ€“dimensional CAT(0) cube complex and let Ï be a Gâ€“admissible hyperplane rescaling.  Let (X,d^Ï_X) be the resulting CAT(0) cuboid complex.  Let 
    Î³ [0,âˆ)â†’ X be a geodesic ray for the metric d^Ï_X, with Î³(0)âˆˆ X^(0).  Then X contains a combinatorial geodesic ray Î± in X^(1) such that 
    Î±(0)=Î³(0) and such that Î± fellow-travels with Î³ at distance depending only on D and Ï.
    
    The proof fromÂ <cit.> works with almost no change.  First, <cit.> is about the combinatorial structure of X only, which does not change 
    when we rescale edges to pass from the CAT(0) metric d_X to the CAT(0) metric d_X^Ï.  The proof ofÂ <cit.>  needs this lemma, plus CAT(0) convexity of 
    half-spaces, which continues to hold in view of CorollaryÂ <ref>.  The proof ofÂ <cit.> produces a combinatorial ray Î± such that each 
    point of Î± lies in a common cube as a point of Î³, and vice versa.  Hence the two rays fellow travel at CAT(0) distance bounded by the diameter of a cube.  In the metric d_X, this is 
    bounded in terms of D; in the metric d_X^Ï, this is bounded in terms of D and the constant M_Ï from DefinitionÂ <ref>, as required by the statement.
    
    
    Since d_X and d_X^Ï are path-metrics, and for each cube c of X, the standard CAT(0) metric d_X on c is bilipschitz 
    to the restriction of d_X^Ï (with constant depending only on the rescaling constant), the identity map 
    (X,d_X)â†’(X,d_X^Ï) is bilipschitz.  Combining this fact with LemmaÂ <ref> yields a version of LemmaÂ <ref> for the rescaled metric d_X^Ï:
    
    
    There are constants Î»_0^Ïâ‰¥ 1, Î»_1^Ïâ‰¥ 0, depending on X and Ï, such that the following holds. For any pair 
    of points x, y âˆˆ X,
    
        1/Î»_0^Ï  d_X^Ï(x,y) - Î»_1^Ïâ‰¤ |(x,y)| â‰¤Î»_0^Ï  d_X^Ï(x,y) + Î»_1^Ï.
    
    
    In a similar fashion, by RemarkÂ <ref>, there is a bilipschitz relationship between (X, d_X^Ï) and (X, d_1).
    
    
    
    Â§ THE  SIMPLICIAL ROLLER BOUNDARY X
    
    In this section, we discuss one of the main objects in the paper: the simplicial Roller boundary.
    
    
    
    Let x,y âˆˆXÌƒ.  Recall that (x,y) = _x^+  _y^+ is the set of half-spaces that separate x from y. We say that x is commensurate to y, and write xâˆ¼ y, if  |(x,y)|< âˆ.  
    Observe that X^(0) forms a single commensurability class in XÌƒ. Commensurability classes contained in  X = 
    XÌƒâˆ– X^(0) are also called Roller classes.
    
     The Guralnik quotient of the Roller Boundary is X =  X / âˆ¼,  the set of commensurability 
    classes of points in the Roller boundaryÂ <cit.>. We shall often implicitly consider elements [x]âˆˆ X as 
    subsets [x]âŠ‚XÌƒ. 
    
    
     
    In most cases,  the quotient topology on X =  X / âˆ¼ is not Hausdorff (in  fact, it does not even 
    satisfy the T_1 axiom). We think of X as only a set, without a topology. In 
    DefinitionÂ <ref>, we will use a partial order on X to define a simplicial complex X with far nicer topological properties.
    
    
    Following <cit.>,  we  say a set SâŠ‚ is non-terminating if S contains no minimal elements: 
    given any half-space hâˆˆ S, there is a half-space kâŠŠ h with kâˆˆ S. 
    
    
    
    Let C âŠ‚ X be a closed, convex set. The following are equivalent:
    
      *  There is a point yâˆˆâˆ‚ X such that C= [Ìƒá»¹]Ìƒ.
    
      *  There exists kâ‰¤ (X) and a family (h^1_m)_mâ‰¥ 0, (h_m^2)_mâ‰¥ 0,â€¦, (h_m^k)_mâ‰¥ 0 of descending chains of  half-spaces  such that 
    
        C =â‹‚_i=1^kâ‹‚_mâ‰¥ 0h_m^i.
    
      * C is a union of Roller classes.
    
      *  The set of half-spaces _C^+ is non-terminating.
    
    We will prove <ref>â‡’<ref>â‡’<ref>â‡’<ref> and <ref>â‡”<ref>. 
    
    The claim that <ref> implies <ref>  is a restatement of <cit.>.
    
    
    
    
    
    
    To prove that <ref> implies <ref>,
    assume that y âˆˆ C = â‹‚_i=1^kâ‹‚_mâ‰¥ 0h_m^i and y' âˆ¼ y
    meaning that  |(y, y')|< âˆ. 
    Since _y^+ âˆ–_y'^+ is finite, it follows that there exists an N for which h_m^i âˆˆ_y'^+ (i.e. y'âˆˆ h_m^i) for each mâ‰¥ N and i=1, â€¦, k.
    That is to say, 
    
        y'âˆˆâ‹‚_i=1^kâ‹‚_mâ‰¥ Nh_m^i= â‹‚_i=1^kâ‹‚_mâ‰¥ 0h_m^i = C.
    
    
    To prove
    <ref> implies <ref>,
    suppose that C is  a union of Roller classes. 
    Let _C be the collection of half-spaces that cut C.  By TheoremÂ <ref>, there is an associated cube complex X(_C). 
    Since C is closed and convex, Proposition <ref> and LemmaÂ <ref> give an embedding i_C XÌƒ(_C)â†ªXÌƒ whose image is C, and furthermore
    C= â‹‚_hâˆˆ_C^+h.
    
    
    Let y_0 âˆˆ X(_C)^(0) and note that [Ìƒá»¹_Ìƒ0Ìƒ]Ìƒ= XÌƒ(_C).   Let  y=i_C(y_0)âˆˆ C and note that i_C([y_0]) âŠ‚ [y], hence C=i_C([Ìƒá»¹_Ìƒ0Ìƒ]Ìƒ) âŠ‚[Ìƒá»¹]Ìƒ.  Since C is a union of equivalence classes, we have [y]âŠ‚ C. Since C is closed, we have that [Ìƒá»¹]ÌƒâŠ‚ C and hence C= [Ìƒá»¹]Ìƒ.
     
    
    
    
    To prove <ref> implies <ref>,
    suppose  there exists a minimal half-space h_0âˆˆ_C^+. We claim that _C^+âˆ–{h_0} is consistent. Indeed, if hâˆˆ_C^+âˆ–{h_0} then h^*âˆ‰_C^+âˆ–{h_0}. If hâŠ‚ k then kâˆˆ_C^+, and since h_0 is minimal, h_0â‰  k so kâˆˆ_C^+âˆ–{h_0}. 
    
    We may therefore consider the CAT(0) cube complex associated to _C âŠ”{h_0, h_0^*}. Fix y, y' âˆˆ X(_C âŠ”{h_0, h_0^*}) such that yâˆˆ h_0 and y'âˆˆ h_0^*. Then, by Proposition <ref>  there is a unique point á»¹âˆˆ C associated to the total and consistent choice of half-spaces 
        {hâˆˆ_C: yâˆˆ h}âŠ”_C^+.
     Similarly, there is a unique point á»¹'âˆˆ Xâˆ– C associated to 
        {hâˆˆ_C: y'âˆˆ h}âŠ”{h_0^*}âŠ” (_C^+âˆ–{h_0}).
    
    By construction, |(á»¹, á»¹')| = 2, hence C is not a union of Roller classes. 
    
    
    
    Finally, to prove <ref> implies <ref>, suppose that C is not a union of Roller classes. Then there are commensurate elements 
    yâˆˆ C and  y' âˆˆ X âˆ– C. Convexity means 
    
        C = â‹‚_hâˆˆ_C^+h,
    
    hence there is a half-space hâˆˆ_C^+ with yâˆˆ C âŠ‚ h and y'âˆ‰ h. Under the assumption that 
    |(y,y')|<âˆ, we may choose a minimal such h and conclude that _C^+ fails to be non-terminating. 
    
    Given a closed, convex set C satisfying 
    one of the equivalent conditions of LemmaÂ <ref>, the class [y] whose closure is C is called the principal class of C. Compare Guralnik <cit.>. 
    
    Let [x],[y] âŠ‚ X be Roller classes. 
    We define a partial order on X by setting [x] â‰¤ [y] whenever _[x]^+ âŠ‚_[y]^+, or equivalently _[ÌƒxÌƒ]Ìƒ^+ âŠ‚_[y]^+.
    
    
    The following result is essentially a corollary of LemmaÂ <ref>.
    
    
     For Roller classes [x],[y] âŠ‚ X, the following are equivalent:
     
      * [x] â‰¤ [y]
      * _[x]^+ âŠ‚_[y]^+
      * [y]âŠ‚[ÌƒxÌƒ]Ìƒ
      * [y]âˆ©[ÌƒxÌƒ]Ìƒâ‰ âˆ…
    
    Conditions <ref> and <ref> are equivalent by DefinitionÂ <ref>.  Since _[x]^+ =_[ÌƒxÌƒ]Ìƒ^+, by LemmaÂ <ref>, Remark <ref> implies that <ref> and <ref> are equivalent. Next, <ref> trivially implies <ref>. Finally, <ref> implies <ref> by LemmaÂ <ref>.
    
    The simplicial Roller boundaryX is the simplicial realization of the partial order of DefinitionÂ <ref>. That is: vertices of X correspond to points of X, or equivalently Roller classes in X. Simplices in  X correspond to totally ordered chains of Roller classes. 
    
    Observe that the action of (X) on X preserves commensurability classes and the order â‰¤, yielding a bijective action  on X and a simplicial action on X.
    
    The characterization of LemmaÂ <ref>.<ref> implies that any simplex in X has k â‰¤ X vertices, hence Xâ‰¤ X-1.
    
    
    Â§ THE SIMPLICIAL BOUNDARY
    
    
    In this section, we recall the definition of the simplicial boundary âˆ‚_ X<cit.>; see DefinitionÂ <ref>. Then, we 
    develop some connections between âˆ‚_ X, the Roller boundary X, and the simplicial Roller boundary X. See TheoremÂ <ref> and CorollaryÂ <ref> for the most top-level statement. The lemmas used to prove those top-level results will be extensively used in later sections.
    
    
    
     Â§.Â§ Unidirectional boundary sets
     
    Recall that  is the set of half-spaces of X and  is the set of hyperplanes of X. In this section, we mainly focus on collections of hyperplanes.
    
    
    A  triple  h_1, h_2, h_3 âˆˆ is called a facing triple if  their complements h_1^*, h_2^*, h_3^* are 
    pairwise disjoint. Similarly, a triple of hyperplanes Ä¥_1, Ä¥_2, Ä¥_3 âˆˆ is called a facing 
    triple if there exists a choice of orientation such that h_1, h_2, h_3 form a facing triple.
    
    
    Caprace and Sageev  <cit.> showed that  in a non-elementary
     essential CAT(0) cube complex, given any half-space hâˆˆ there exist half-spaces k, â„“âˆˆ such that {h,k,â„“} is a facing triple. 
    
    
    
    A collection  of hyperplanes ğ’®âŠ‚ is called unidirectional if for every Ä¥âˆˆğ’®, at most one side of Ä¥ contains infinitely many other elements of ğ’®. 
    
    A collection ğ’®âŠ‚ is called inseparable if whenever Ä¥, kÌ‚âˆˆğ’® and â„“Ì‚ is a hyperplane that separates Ä¥ and kÌ‚, then â„“Ì‚âˆˆğ’®. This is closely related to the â€œtightly nestedâ€ condition in PropositionÂ <ref>.
    
     A set âŠ‚ is a unidirectional boundary set (abbreviated UBS) if it is infinite, unidirectional, inseparable, and does not contain a facing triple. 
      
    Let  and ğ’± be UBSes.  Define a relation â‰¼ where â‰¼ğ’± if all but finitely many elements of  lie in
    ğ’±.  Say that  and  are commensurate (denoted âˆ¼)  if â‰¼ and â‰¼.
    
    The relation â‰¼ on UBSes descends to a
    partial order on commensurability classes of UBSes. We say that  is minimal if its commensurability class is minimal â€” that is, if  â‰¼ implies âˆ¼. Similarly, we say that  is maximal if â‰¼' implies âˆ¼'.
    
    For disjoint subsets A, B âŠ‚XÌƒ, let (A, B) be the set of hyperplanes separating A from B.
     It is straightforward to check that (A, B) is inseparable and does not contain a facing triple. Furthermore, if AâŠ‚ X then (A, B) is unidirectional.  If, in addition, BâŠ‚ X, then (A, B) is infinite. Under these last two conditions, we conclude that (A, B) = (A, B) is a UBS. Compare Lemma <ref>.
     
    Let  be a UBS. We say that  is pruned if every hyperplane Ä¥âˆˆ has exactly one associated half-space h containing infinitely many elements of . In this situation, we call 
    h the  canonical orientation of Ä¥ or the canonical half-space associated to Ä¥.
    
    Let  be a UBS. Then  contains a canonical pruned sub-UBS ' âŠ‚ that is commensurate to .
    
    Let F_ be the set the hyperplanes of  with the property that both associated half-spaces contain finitely many elements of . We claim that F_ is finite.
    To see this, let Ä¥_1, â€¦, Ä¥_D be a maximal family of pairwise transverse hyperplanes in F_. This family is finite because D â‰¤ X. For any Ä¥âˆˆ F_âˆ–{Ä¥_1, â€¦, Ä¥_D} there is at least one i for which Ä¥ is parallel (i.e. not transverse) to Ä¥_i. By the definition of F_,  there are finitely many hyperplanes in  parallel to each Ä¥_i,
     hence F_ is finite. 
     
     Now, define ' = âˆ– F_. By construction, every Ä¥âˆˆ' has exactly one associated half-space containing infinitely many elements of , hence infinitely many elements of ' as well.
     
    We claim that ' is a UBS. Since F_ is finite, it follows that ' is infinite. Unidirectionality and the lack of facing triples are properties that pass to subsets of , hence to '.  Next, suppose that Ä¥, kÌ‚âˆˆ' with â„“Ì‚ in between. Since Ä¥, kÌ‚âˆˆ and  is inseparable, observe that â„“Ì‚âˆˆ. But
    â„“Ì‚âˆ‰ F_, because Ä¥, kÌ‚ both bound half-spaces containing infinitely many elements of . We conclude that â„“Ì‚âˆˆ', verifying that ' is a UBS. Since  and ' differ by finitely many hyperplanes, they are commensurate.
    
    
    
    Hagen proved that every (commensurability class of) UBS  decomposes in a well-defined fashion into a disjoint union of minimal UBSes.
    The following is a restatement of <cit.> and <cit.>.
    
    
    Let  be a UBS. Then there is a decomposition âˆ¼_i=1^k _i, where:
    
      *  each _i is a minimal UBS;
      
      *  any UBS âŠ‚ is commensurate with the disjoint union of some of the _i;
      
      *  if 1â‰¤ j < i â‰¤ k, then every hyperplane in _i crosses all but finitely many of the hyperplanes in _j.
     
    Consequently, there are finitely many commensurability classes of UBSes â‰¼.
    
    
    LemmaÂ <ref> enables the following definition.
    
    
    
    
    For a UBS , the dimension of  is the number k appearing in the decomposition of LemmaÂ <ref>. This is an invariant of the commensurability class.
    An immediate consequence of LemmaÂ <ref>.<ref> is that () â‰¤ (X).
    
    The simplicial boundaryX is the following simplicial complex.  For each commensurability class of a UBS 
    , there is a (k-1)â€“simplex Ïƒ_, where k is the dimension of the class of .  The face relation is defined 
    as follows: Ïƒ_ is a face of Ïƒ_ if and only if â‰¼.  
    
    
    Note that X has a vertex for each commensurability class of a minimal UBS. Furthermore, a finite collection of 
    vertices spans a maximal simplex if and only if the union of the corresponding minimal UBSes is commensurate with a maximal UBS. However, there can exist non-maximal simplices that do not correspond 
    to a UBS; see ExampleÂ <ref>. For this reason, X is not the simplicial realization of the partial order â‰¼.
    
    
    Observe that (X) acts on UBSes in a way that preserves  the â‰¼ relation, and hence preserves commensurability. Thus (X) acts simplicially on X.
    
    
    
    
     Â§.Â§ Minimal and dominant UBSes
    
    Next, we establish some structural results about minimal UBSes. 
    Given a set S consisting of hyperplanes, the inseparable closure of S, denoted S,
     is the intersection of all inseparable sets containing S. 
    
    
    Let âŠ‚(X) be a minimal UBS.  Then there exists an infinite descending chain {h_n : n âˆˆ}âŠ‚ with Ä¥_n âˆˆ, such that âˆ¼{Ä¥_n:nâˆˆ}.
    
    
    Conversely, for every descending chain {h_n : n âˆˆ}âŠ‚, there exists Nâ‰¥ 0 such that {Ä¥_n:nâ‰¥ N} is a minimal UBS.
    
    Let  be a minimal UBS.  Let  {h_n : n âˆˆ}âŠ‚ be a descending chain such that {Ä¥_n}âŠ‚, which exists because  is infinite, unidirectional, contains no facing triple, and 
    contains no infinite collection of pairwise-crossing hyperplanes.  Let ' = {Ä¥_n} be the inseparable closure of {Ä¥_n}. Since  is 
    inseparable, we have 'âŠ‚ by the definition of the inseparable closure.   Note that ' is a UBS (compare the proof ofÂ <cit.> orÂ <cit.>).  Since 'âŠ‚ and  is minimal, we have 'âˆ¼, which 
    proves the first assertion of the lemma.
    
    Now we prove the second assertion.  For each mâ‰¥ 0, let C_m={h_n:nâ‰¥ m} and let C_m be its inseparable closure.  As before, each C_m is a UBS.  Note that C_mâŠ‚C_m' whenever mâ‰¥ m'.  In particular, C_mâ‰¼C_m' for m' â‰¥ m.  So, by LemmaÂ <ref>, there exists Mâ‰¥ 0 such that C_mâˆ¼C_M for all 
    mâ‰¥ M.  Hence, if mâ‰¥ M and {k_i} is any descending chain of half-spaces corresponding to hyperplanes in C_M, then there exists Iâ‰¥ 0 such that {kÌ‚_i : iâ‰¥ I}âŠ‚ C_m.  This implies that C_M is commensurate with {kÌ‚_i :i â‰¥ 0}, by, for exampleÂ <cit.>. See also the proof ofÂ <cit.>.    
    
    Now let âŠ‚ C_M be a minimal UBS, which exists byÂ <cit.>.  By the first part of the lemma,  is commensurate with the inseparable closure of some chain contained in 
    C_M.  By the preceding paragraph, C_Mâˆ¼, so C_M is minimal, as required.
    
    LemmaÂ <ref> has been generalized to the setting of median spaces by FioravantiÂ <cit.>. In fact, the same result of Fioravanti also generalizes 
    many other basic facts about UBSes, such asÂ <cit.>.  
    
    The second assertion of LemmaÂ <ref> corrects a slight misstatement inÂ <cit.>: it is 
    true that minimal UBSes are commensurate with inseparable closures of chains, but inseparable closures of chains need not be minimal; one might first need to pass to a (cofinite) sub-chain (see 
    e.g.Â <cit.> and the paragraph following).  We emphasize that this does not affect the use 
    ofÂ <cit.> inÂ <cit.>, because what's being used is the (correct) statement that, up to 
    commensurability, minimal UBSes arise 
    as inseparable closures of chains.
    
    In this paper, we primarily use the first assertion of LemmaÂ <ref>, in conjunction 
    with LemmaÂ <ref>, to decompose a UBS  as a disjoint union of minimal UBSes (up to commensurability), 
    each of which has the additional property that it is the 
    inseparable closure of a chain.
    
    
    
    
    The following consequence of LemmaÂ <ref> neatly sums up the special properties of chains whose inseparable 
    closures are minimal UBSes:
    
    
    
    Let {h_n:nâ‰¥ 0} be an infinite descending chain of half-spaces.  For each mâ‰¥ 0, let _m be the inseparable closure of {Ä¥_n:nâ‰¥ m}.  Then the following are equivalent:
    
      *  The UBS _m is minimal for all mâ‰¥ 0.
     
      * _mâˆ¼_0 for all mâ‰¥ 0.
    
    In particular, if _0 is minimal, then _0âˆ¼_m for all mâ‰¥ 0.
    
    Since _mâ‰¼_0 for all m, the first statement immediately implies the second.  For the reverse direction, LemmaÂ <ref> provides Mâ‰¥ 0 such that _m is minimal for mâ‰¥ 
    M.  If the second assertion holds, it then follows that the first must also.  
    
    Following CorollaryÂ <ref>,  for the rest of this subsection we shall refer to a sequence of disjoint hyperplanes {Ä¥_n } whose inseparable closure is a minimal UBS
     as a chain of hyperplanes.
    
     
     In particular, a chain of hyperplanes {Ä¥_n }_nâ‰¥ 0 defines a descending chain of half-spaces { h_n }_nâ‰¥ 0.  A descending chain of half-spaces { h_n }_nâ‰¥ 0 has the 
    property that for all sufficiently large N, the sequence {Ä¥_n }_nâ‰¥ N  is a chain of hyperplanes, in view of LemmaÂ <ref>. 
    
    
    
    Let  be a UBS. A hyperplane Ä¥âˆˆ is called dominant for  if Ä¥ = Ä¥_0 is the base of a chain of hyperplanes { h_n }âŠ‚ such that Ä¥ 
    crosses all but finitely many hyperplanes in âˆ–{ h_n }. 
    
    
    
     Recall that by definition of a chain of hyperplanes, {h_n } is a minimal UBS. See FigureÂ <ref> for an example. 
    By LemmaÂ <ref>, the inseparable closure { h_n }  is commensurate to some minimal UBS _i in the decomposition âˆ¼_i=1^k _i of that lemma. Furthermore, _i 
    is unique: since a dominant hyperplane Ä¥âˆˆ is the base of a chain in _i, then Ä¥ must intersect all but finitely many hyperplanes of _j (for j â‰  i), hence Ä¥ 
    cannot be disjoint from a chain in _j.
    
    
    We also observe that if  is minimal and pruned, then every hyperplane of  is vacuously dominant.
    
    
    
    
    
    The following lemma is only stated in the special case where (X) is already a UBS. In practice, we will apply LemmaÂ <ref> to convex subcomplexes (such as the convex hull of a geodesic ray) where this hypothesis holds.
    
    
     Suppose that = (X)
      is a pruned UBS of dimension k.  Then  contains minimal UBSes ğ’Ÿ_d ,â€¦, ğ’Ÿ_k such that the following hold: 
     
      * Each ğ’Ÿ_i is a set of dominant hyperplanes for , and all but finitely many dominant hyperplanes belong to â‹ƒ_i = d^k ğ’Ÿ_i.
      
      * For each iâˆˆ{d, â€¦, k} and each Ä¥_0 âˆˆğ’Ÿ_i, there is a chain {Ä¥_n 
    }_nâ‰¥0âŠ‚ğ’Ÿ_i such that ğ’Ÿ_i is commensurate with {Ä¥_n },  the 
    inseparable closure of the chain.
    
      *  For any such chain {Ä¥_n }, there is N > 0, such that for all n â‰¥ N, we have 
    
        (Ä¥_n+1)âˆ–ğ’Ÿ_iâŠ‚(Ä¥_n)âˆ–ğ’Ÿ_i.
     Furthermore, for all n 
    â‰¥ 0, we have 
    
        |(Ä¥_n)-(Ä¥_n+1)|<âˆ.
    
      *  For every hyperplane Ã»âˆˆ, there exists âˆˆâˆˆ{d,â€¦,k} and a dominant hyperplane Ä¥âˆˆğ’Ÿ_i such that Ä¥ lies in the canonical 
    half-space 
    associated to Ã». 
     
    
    We will not use item (<ref>) later in the paper, but we record it as a potentially useful fact about UBSes.
    
    
    By LemmaÂ <ref>, there is a decomposition âˆ¼_i=1^k_i, with an ordering such that for j < i, every hyperplane in _i crosses all but finitely many of the hyperplanes in _j. The ordering is only partially determined: if every hyperplane in _i crosses all but finitely many hyperplanes in _i+1, then we can 
    reverse the order of _i,_i+1 while keeping the conclusion of LemmaÂ <ref>.<ref>.  Let d be the smallest index i such that _i can be placed at the top of the order in such a decomposition.
    
    
    Now, fix an index i â‰¥ d. 
    By LemmaÂ <ref>, _i is commensurate with ğ’Ÿ_i = {Ä¥_n}, where 
    {Ä¥_n}âŠ‚_i is a chain. Thus ğ’Ÿ_i âˆ¼_i is a minimal UBS.
    
    We claim that every Ä¥âˆˆğ’Ÿ_i is dominant. 
     Given Ä¥âˆˆğ’Ÿ_i and the canonical associated half-space h (recall DefinitionÂ <ref>), there exists Nâ‰¥ 0 such that Ä¥_N âŠ‚ h. 
     Thus Ä¥ is the base of the infinite chain {Ä¥,Ä¥_N,Ä¥_N+1,â‹¯}. Furthermore, Ä¥âˆˆğ’Ÿ_i âŠ‚_i intersects all but finitely many hyperplanes in _j 
    for j â‰  i, because we have chosen an index i â‰¥ d. Thus Ä¥ is dominant by DefinitionÂ <ref>.
     Thus we have found dominant minimal UBSes ğ’Ÿ_d,â€¦,ğ’Ÿ_k satisfying conclusionsÂ <ref> and 
    <ref>.
    
    Now we verify assertion <ref>. Fix i â‰¥ d and let Ä¥,Ä¥'âˆˆğ’Ÿ_i.  Since the 
    minimal UBS ğ’Ÿ_i is the inseparable closure of a chain, Ä¥,Ä¥' both cross finitely many hyperplanes in ğ’Ÿ_i.  Indeed, if ğ’²(Ä¥)âˆ©ğ’Ÿ_i is infinite, it must contain a chain of hyperplanes whose inseparable closure ğ’Ÿ' belongs to ğ’Ÿ_i, and is contained in 
    ğ’²(Ä¥) since the latter is inseparable.  Since ğ’Ÿ_i is minimal, ğ’Ÿ'âˆ¼ğ’Ÿ_i.  Hence ğ’²(Ä¥) contains all but finitely many elements of ğ’Ÿ_i;  since Ä¥âˆˆğ’Ÿ_i, this contradicts that ğ’Ÿ_i is the inseparable closure of a chain.  Thus ğ’²(Ä¥)âˆ©ğ’Ÿ_i is finite.  Moreover, since ğ’Ÿ_i 
    is dominant, Ä¥,Ä¥' both cross all but finitely many hyperplanes of âˆ–ğ’Ÿ_i, and we can therefore conclude that 
    
        |(Ä¥)(Ä¥')|<âˆ.
    
    
    So,  it suffices to show that, for all sufficiently large n,  we have (Ä¥_n+1)âˆ–ğ’Ÿ_iâŠ‚(Ä¥_n)âˆ–ğ’Ÿ_i.
    
    If this doesn't hold, then  for infinitely many n we can find a hyperplane Ã»_nâˆ‰ğ’Ÿ_i that crosses 
    Ä¥_n+1 but not 
    Ä¥_n; note that Ã»_n does not separate any two elements of our chain since Ã»_nâˆ‰ğ’Ÿ_i.  Since there are no facing 
    triples, Ã»_n 
    crosses Ä¥_m for 
    mâ‰¥ n+1. 
       Since the collection of violating 
    hyperplanes {Ã»_n} is infinite and contains no hyperplanes crossing Ä¥_0, dominance of Ä¥_0 is 
    therefore 
    contradicted.  Thus there exists N such that (Ä¥_n+1)âˆ–ğ’Ÿ_iâŠ‚(Ä¥_n)âˆ–ğ’Ÿ_i for nâ‰¥ N, establishing <ref>.
    
    We now prove assertionÂ <ref>.  Let Ã»âˆˆ be a hyperplane, and let u be the  canonical 
    half-space associated to Ã». Given the fixed decomposition âˆ¼_i=1^k_i, let i be the 
    largest index such that
    u contains a chain of hyperplanes in , whose inseparable closure _i' is commensurate to some _i. Such an i exists because  is pruned. We claim that i â‰¥ d. This claim implies 
    that u contains infinitely many hyperplanes of ğ’Ÿ_i, which will suffice to prove the lemma.
    
    Suppose for a contradiction that i < d. Fix vÌ‚âˆˆ_i', and consider a minimal UBS _j for j > i. If any hyperplane in _j fails to cross vÌ‚, then it fails to cross Ã», 
    hence u contains a chain in _j, contradicting the maximality of i. See FigureÂ <ref>.
    
    
    
    
    Furthermore, since vÌ‚âˆˆ_i, it must cross all but finitely many hyperplanes of _â„“ for â„“ < i by 
    LemmaÂ <ref>.<ref>. Thus vÌ‚ crosses all but finitely many hyperplanes of âˆ–_i', hence vÌ‚ is dominant. Since vÌ‚âˆˆ_i' was 
    arbitrary, this shows that i â‰¥ d by the definition of d.
    
    
     Â§.Â§ Connections between X and X
    
    The next several lemmas develop tools for comparing the Roller boundary and the simplicial boundary. 
    
    
    
    
    Let âŠ‚(X) be a  UBS, and let ' âˆ¼ be a pruned UBS commensurate to . For every Ä¥âˆˆ', let 
    h âˆˆ(XÌƒ) be the canonical orientation of Ä¥,  that is,  the (extended, vertex) half-space  containing 
    infinitely many hyperplanes 
    of '. 
    
    The umbraá»¸_ associated to  is 
    
        á»¸_ = â‹‚_Ä¥âˆˆ' h âŠ‚XÌƒ.
    
    By DefinitionÂ <ref>, the umbra á»¸_ is a convex subset of X, one may think of it as the Roller realization of the UBS . In LemmaÂ <ref>, we will show that  á»¸_ satisfies the equivalent conditions of LemmaÂ <ref>. Then, Y_ will denote the principal class of á»¸_: that is, the unique Roller class whose closure is á»¸_.
    
    Let âŠ‚(X) be a UBS. Then the umbra á»¸_ associated to  is a nonempty subset of X.
    Furthermore, 
     
      *  If âˆ¼ then á»¸_ = á»¸_. 
    
      *  If âˆ¼_1âˆªâ‹¯âˆª_N for some UBSes _1, â€¦,_N then 
        á»¸_ = â‹‚_i=1^Ná»¸__i.
    
    Let ' be the pruned UBS commensurate to . As in DefinitionÂ <ref>, let h be the canonical orientation of every Ä¥âˆˆ', and define  ğ”˜' = {h : Ä¥âˆˆ' }âŠ‚. Then
     á»¸_:= â‹‚_hâˆˆğ”˜'h. 
      
     Since XÌƒ is compact, to show that á»¸_ is not empty, it is sufficient to show that ğ”˜' has the  finite 
    intersection property. By the Helly property for half-spacesÂ <cit.> this is equivalent 
    to showing that every pair of half-spaces h,k âˆˆğ”˜' has nonempty intersection. But a disjoint pair 
    h, kâˆˆğ”˜'  contradicts the unidirectionality of ', as both sides of Ä¥ would contain infinitely many elements  of '. 
    
    Using the same argument, we observe that for every hâˆˆğ”˜' there is an infinite descending chain { h_n } with h_0 = h and h_nâˆˆğ”˜'. Indeed, fix hâˆˆğ”˜'. Since ' is pruned, there are infinitely many hyperplanes in ' contained in h. Since ' is unidirectional, kÌ‚âŠ‚ h and kÌ‚âˆˆ' implies k âŠ‚ h. Applying induction, we find the infinite descending chain. Thus á»¸_âŠ‚ X.
    
    We now turn to the commensurability class of . Suppose that  is a UBS commensurate to . Since commensurability is an equivalence relation, we conclude that ' and ' are commensurate as well. Let ğ”™' = {h : Ä¥âˆˆ' }âŠ‚ be the set of canonical half-spaces associated to '.
    
    
    We claim that ğ”˜' and ğ”™' are also commensurate. Since the map taking half-spaces to hyperplanes is 2-to-1, it suffices to show that under this map, the set ğ”˜'âˆ–ğ”™'  has image in the finite set 'âˆ–', and vice versa. Let hâˆˆğ”˜'âˆ–ğ”™'. Then Ä¥âˆˆ'. By definition of ğ”˜', we know that the set {kÌ‚âˆˆ: kÌ‚âŠ‚ h} is infinite. The commensurability of  and  implies that {kÌ‚âˆˆ: kÌ‚âŠ‚ h} is infinite as well. But hâˆ‰', hence it must be the case that Ä¥âˆ‰'. 
    
    
    To see that á»¸_= á»¸_ it is sufficient to  show that if hâˆˆğ”˜'  then there is kâˆˆ'âˆ©ğ”˜' with kâŠ‚ h. But this is immediate. As was proved above, for any hâˆˆğ”˜' there is an infinite descending chain { h_n }âŠ‚ğ”˜' with h_0 = h. Since ğ”˜' and ğ”™' are commensurate, for N sufficiently large, we must have that h_Nâˆˆğ”™'.
    
    
    
    
    Finally, the construction above makes it clear that  if  is commesurate to _1âˆªâ‹¯âˆª_N for some  UBSes 
    _1, â€¦,_N then á»¸_ = â‹‚_i=1^Ná»¸__i. 
    
    For every UBS , there is a Roller class Z âŠ‚ X such that á»¸_ = ZÌƒ. Furthermore, the assignment â†¦ Z = Y_ is (X)â€“equivariant.
    
    By LemmasÂ <ref> andÂ <ref>,  is commensurate to a UBS =_i=1^k_i, where _i = {Ä¥_n^i} for a descending chain of half-spaces { h_n^i }. Note that every _i is pruned. Thus
    
        á»¸_ =  â‹‚_1â‰¤ i â‰¤ ká»¸__i = â‹‚_1â‰¤ i â‰¤ k  â‹‚_Ä¥âˆˆ_i h = â‹‚_1â‰¤ i â‰¤ k  â‹‚_n âˆˆ h_n^i.
    
    Here, the first equality holds by LemmaÂ <ref>, the second equality holds by DefinitionÂ <ref>, and the third equality holds because the hyperplanes added in the inseparable closure do not affect the intersection. By LemmaÂ <ref>, a set of this form is the closure of a unique (principal) Roller class Y_. 
    
    We observe that the above construction is independent of the choice of  descending chains with the desired properties, and hence the map â†¦ Y_ is (X)â€“equivariant.
    
    Let xâˆˆ X^(0) and let Y âŠ‚ X be a convex set. Then the set of separating hyperplanes (x,Y)= (x,_Y(x)) is a pruned UBS.  
    If x'âˆˆ X^(0), then 
    (x',Y) âˆ¼(x,Y). Finally, (x,[y])âˆ¼(x,y) for every yâˆˆ X. 
    
    We begin by showing that  :=(x,Y) is a UBS.  Recall that (x,Y) is the set of hyperplanes associated to _x^+ _Y^+. Since x âˆˆ X^(0), it follows that _x^+ satisfies the descending chain condition and since YâŠ‚ X, it follows that _Y^+=_á»¸^+ 
    has an infinite descending chain. Hence,  is unidirectional and infinite. Since =(x,Y) is an interval, it follows that it is inseparable and does not contain a facing triple, hence  is a UBS. The fact that (x,Y)= (x,_Y(x)) follows from PropositionÂ <ref> and shows that  is pruned.  
    
    Let x,x' âˆˆ X^(0). We claim that (x,Y) (x',Y) âŠ‚(x,x').  By symmetry, it suffices to observe that  a hyperplane Ä¥ separating x from Y but not x' from Y necessarily separates x from x'. Since the cardinality of (x,x')  is the distance d(x,x')<âˆ, we conclude that the two UBSes are commensurate. 
     
    Finally, fix yâˆˆâˆ‚ X. We show that (x,[y])âˆ¼(x,y). PropositionÂ <ref> says that (x,[y]) = (x,_[y](x)), which implies that (x,[y]) âˆª(_[y](x), y)= (x,y). But _[y](x) âˆˆ [y] by definition, hence  | (_[y](x),y) | < âˆ, completing the proof. 
    
    Let  Y âˆˆ X be a Roller class, and fix a basepoint x âˆˆ X^(0). Following LemmaÂ <ref>, we call (x,Y) a UBS representing the class Y, and denote it _Y. Since the commensurability class [_Y] is independent of x, by LemmaÂ <ref>, we do not include the basepoint x in the notation _Y.
    
    It follows immediately that the assignment Y â†¦ [ _Y ] is (X)â€“equivariant.
    
    
    
    With this notation in place, we  conclude:
    
    
    Fix xâˆˆ X^(0) and Yâˆˆ X. Then  Y = Y__Y. In particular,  every Roller class arises as the principal class of the umbra of some UBS.
    
    Since _Y = (x,Y) is a UBS, by LemmaÂ <ref> it is commensurate to _i=1^k  {Ä¥_n^i} for descending chains { h_n^i }, hence EquationÂ (<ref>) gives
    
        á»¸__Y =  â‹‚_1â‰¤ i â‰¤ k  â‹‚_n âˆˆ h_n^i.
    
     By construction, á»¸âŠ‚ h_n^i for every Ä¥_n^i âˆˆ_i, hence á»¸âŠ‚á»¸__Y.
    
    As in Lemma <ref>, let  Y__Y  denote  the principal Roller class of á»¸__Y. 
     We claim that Y = Y__Y. So far, we have shown that Y__Yâ‰¤ Y in the partial order of LemmaÂ <ref> and so we are left to show that Yâ‰¤ Y__Y. To this end, we fix a half-space hâˆˆ with Y âŠ‚ h and now show that  Y__YâŠ‚ h. 
    
    Let x'âˆˆ h^* âˆ© X^(0) and set '_Y = (x',Y). Observe that Ä¥âˆˆ'_Y by construction. Then by Lemma <ref> we have that '_Y is a pruned UBS commensurate to _Y and so Lemma <ref> implies á»¸__Y=á»¸_'_Y. Finally, by DefinitionÂ <ref> we have that Y__YâŠ‚á»¸__YâŠ‚ h. 
    
    Let Î³âŠ‚ X be a geodesic ray, in either the CAT(0) or combinatorial metric. Let  (Î³) be the collection of hyperplanes intersecting Î³, which is a UBS by  <cit.>.
     If  is a UBS and âˆ¼ğ’²(Î³) for some combinatorial geodesic ray Î³, we say that the class of  is â„“^1â€“visible. 
    Let Y âˆˆ X. Then, for any x âˆˆ X^(0) and any y âˆˆ Y, LemmaÂ <ref> provides a combinatorial geodesic ray Î³ such that Î³(0)=x and Î³(âˆ) =  y âˆˆ Y. By DefinitionÂ <ref> and LemmaÂ <ref>, we have 
    
        (Î³) = (x, y) âˆ¼(x, [y]) = (x, [Ìƒá»¹]Ìƒ).
    
    
    Furthermore, by LemmaÂ <ref>, the commensurability class [(Î³)]= [_Y] does not depend on the choice of x âˆˆ X^(0) and  y âˆˆ Y.  In particular, every UBS representing a class Y is â„“^1â€“visible.
    
    Let  be a UBS.  Let yâˆˆá»¸_ and let Î³ be a combinatorial geodesic in X such that 
    Î³(âˆ) = y. 
     Then â‰¼(Î³).  In particular, if  is maximal, then âˆ¼(Î³).
    
    As in LemmaÂ <ref>,  is commensurate to _i=1^k _i, where the _i are minimal and _i = {Ä¥_n^i} for a descending chain of half-spaces { h_n^i }. Thus 
    EquationÂ (<ref>) gives
    
        á»¸_ =  â‹‚_1â‰¤ i â‰¤ ká»¸__i = â‹‚_1â‰¤ i â‰¤ k  â‹‚_Ä¥âˆˆ_i h = â‹‚_1â‰¤ i â‰¤ k  â‹‚_n âˆˆ h_n^i.
    
    Since Î³(m) â†’ y âˆˆá»¸_, we must have y âˆˆ h_n^i for every i and every n. At the same time, since the sequence { h_n^i } is a descending chain for each i, we have that x = Î³(0)
    âˆ‰ h_n^i for sufficiently large n. Thus all but finitely many hyperplanes Ä¥_n^i belong to (x,y)=(Î³). The inseparable closure of this cofinite subset of {Ä¥_n^i} must belong 
    to (Î³), and by minimality of _i and CorollaryÂ <ref>, it follows that all but finitely many elements of each _i belong to W(Î³).
    
    Let  be a maximal UBS. Then, for every y âˆˆ  Y_, there is a combinatorial geodesic Î³ limiting to y, such that âˆ¼(Î³). In particular, the commensurability class [] is â„“^1â€“visible.
    
    Let y âˆˆ Y_. By LemmaÂ <ref>, there is a combinatorial geodesic ray Î³ limiting to y.  By  
    LemmaÂ <ref>, we have âˆ¼(Î³). Thus, by DefinitionÂ <ref>,  is â„“^1â€“visible.
    
    
    In CorollaryÂ <ref>, the conclusion that [] is visible was previously shown by Hagen <cit.>. The above proof, using the Roller 
    boundary viewpoint, is considerably simpler.
    
    
    
    
     Â§.Â§ Order-preserving maps
    
    Recall from DefinitionsÂ <ref> andÂ <ref> that the partial order â‰¤ on Roller classes is set containment of the associated sets of half-spaces, while the partial order â‰¼ on commensurability classes of UBSes  is set containment up to commensurability. 
    The following theorem says that these partial orders are closely related.
    
    
    
    Let ğ’°â„¬ğ’®(X) be the collection of commensurability classes of UBSes in X. Then there are (X)â€“equivariant functions 
    ğ’°â„¬ğ’®(X) â†’ X and X â†’ğ’°â„¬ğ’®(X), with the following properties.
    
      *  The assignment [] â†¦ Y_ is order-preserving and onto.
    
      *  The assignment Y â†¦ [_Y] is an order-preserving section of .
    
      *  restricts to a bijection between the set of  â‰¼â€“maximal classes of UBSes and the set of â‰¤â€“maximal Roller classes, with inverse .
    
    
    The notation  stands for â€œRoller to unidirectional,â€ while  stands for â€œunidirectional to Roller.â€ This is inspired from the classical notation denoting the collection of maps from a set A to a set B as B^A.
    
    
    To prove <ref>, let  be a UBS. By LemmaÂ <ref>, there is a well-defined Roller class Y_ such that the
     umbra á»¸_ is the Roller closure of Y_. By 
    LemmaÂ <ref>, Y_ only depends on the commensurability class []. Hence the assignment [] â†¦ Y_ gives a well-defined function  
    ğ’°â„¬ğ’®(X) â†’ X. This function  is (X)â€“equivariant by LemmaÂ <ref>, and onto by CorollaryÂ <ref>. 
    
    Next, we check that  respects the ordering. LemmaÂ <ref> implies that if
     â‰¼ğ’±, then
    Y_ğ’±âŠ‚Y_, hence the
    Roller classes satisfy
    Y_â‰¤ Y_ğ’± by LemmaÂ <ref>. Thus  is order-preserving, proving <ref>.
    
    
    
    To prove <ref>, let Y âˆˆ X. By DefinitionÂ <ref>, there is a well-defined commensurability class of UBS representing Y, namely [_Y] = (Y) âˆˆğ’°â„¬ğ’®(X). Thus  is well-defined. Equivariance also follows from DefinitionÂ <ref>. Next, observe that
    
        âˆ˜(Y) = ([_Y]) = Y__Y = Y,
    
     where the last equality follows from CorollaryÂ <ref>. Thus  is a section of .
    
    To check that  is order-preserving, let Y, Z be Roller classes with Y â‰¤ Z. By  LemmaÂ <ref>, this means ZâŠ‚Y.  Fix a base vertex xâˆˆ X^(0).  By LemmaÂ <ref>, there exist 
    combinatorial geodesic rays Î³_y, Î³_z, originating at x, such that Î³_y(âˆ) =  yâˆˆ Y and Î³_z(âˆ) =  
    z âˆˆ Z.  Now, RemarkÂ <ref> says that 
    
        _Yâˆ¼(x,Y) âŠ‚(x,Z) âˆ¼_Z,
    
    hence [_Y] â‰¼ [_Z], as desired.
    
    
    
    To prove <ref>, let  be a maximal UBS. Choose a point y âˆˆ Y_ = ([]). By CorollaryÂ <ref>, there is a combinatorial geodesic ray Î³ limiting to y, such that âˆ¼(Î³). Thus, by RemarkÂ <ref>, we have
    
        [] = [(Î³)] = [_Y_] = (Y_) = âˆ˜([]).
    
    Thus the restriction of  to maximal classes in ğ’°â„¬ğ’®(X) is invertible, and in particular bijective.
    
    EquationÂ (<ref>) also shows that  sends maximal classes in ğ’°â„¬ğ’®(X)  to maximal classes in X. Indeed, suppose that [] is maximal but ([]) = Y_ < Z for some Roller class Z. Then we would have [] = (Y_) < (Z), contradicting the maximality of . That  sends maximal classes to maximal classes is checked in the same way.
    
    
    The following example shows that  can fail to be injective.
    
    
     Consider the standard 1/8th-plane staircase, corresponding to squares whose  vertices (x,y) satisfy xâ‰¥ yâ‰¥ 0. In 
    this case, there are exactly 2 equivalence classes of minimal UBS, corresponding to vertical hyperplanes _V and horizontal 
    hyperplanes _H. These are almost transverse, hence _H_V  âˆª_H. However, [_H] = ([_V  âˆª_H]). Thus  is not injective.
    
    
    
    On the other hand, the following corollary shows that  is finite-to-one.
    
    
    Let Y âˆˆ X be a Roller class. Then there are finitely many other Roller classes Z such that Z â‰¤ Y.
    
    For each Z â‰¤ Y, TheoremÂ <ref>.<ref> says that (Z) â‰¼(Y). Furthermore,  is injective.
    By LemmaÂ <ref>, there are only finitely many commensurability classes  [] â‰¼(Y). Thus there are finitely many Z â‰¤ Y. 
    Let ( X)' be the barycentric subdivision of X. Recall from DefinitionÂ <ref> that
    X is the union of simplices corresponding to commensurability classes
    of UBSes. However, a simplex of X may have proper faces that do not come from commensurability
    classes, as illustrated in ExampleÂ <ref> below.  Hence, a vertex of ( X)' might fail to be 
    associated to a UBS commensurability class. 
    
    Let X be the simplicial realization of the partial order â‰¼ on ğ’°â„¬ğ’®(X). Then X naturally embeds into ( X)'. By the above paragraph, this embedding is not 
    in general onto.
    
    
    The following example, constructed by Dan Guralnik and Alessandra Iozzi, illustrates a subtlety in the definition of X which shows the difference between X and X.
    
    
    [Weird faces of simplices of X]
    Let X be the 3â€“dimensional 
    CAT(0) cube complex given by the following data:
    
      *  The set of hyperplanes has the form (X) = {B_i}_i â‰¥0âŠ”{S_j}_jâ‰¥0âŠ”{D_k}_k â‰¥0.  
      *  For each 
    Aâˆˆ{B,S,D} and each nâ‰¥1, the hyperplanes A_nÂ±1 are separated by A_n.
    
      * B_i crosses S_j if and only if i â‰¥ j.
    
      * S_j crosses D_k if and only if j â‰¥ k.
    
      * B_i crosses D_k if and only if i â‰¥ k.
    
      *  If i < j < k, then S_j separates B_i from D_k.
    
    Part of X is shown in FigureÂ <ref>.  
    
    
    Then X is a single 2â€“simplex represented by the UBS 
    {B_i}_i â‰¥0âˆª{S_j}_jâ‰¥0âˆª{D_k}_k â‰¥0.  The 0â€“simplices are represented by the minimal UBSes 
    {B_i}, {S_j}, {D_k}.  The sets {B_i}âˆª{S_j} and {S_j}âˆª{D_k} are UBSes representing 1â€“simplices, 
    but {B_i}âˆª{D_k} is not a UBS, because it is not inseparable (consider the last bullet).  The complex X is therefore obtained from 
    the barycentric subdivision of the 2â€“simplex by deleting all of the cells that contain a vertex at the barycenter of {B_i}âˆª{D_k}.
    
    
    
     We remark that by <cit.>, a face of a simplex of X can only fail to correspond to a commensurability class of UBSes when one of the 0â€“simplices of that face is
     â„“^1â€“invisible.
    
    
    Having passed from X to X, TheoremÂ <ref> has the following corollary.
    
    
    The order-preserving maps  and  of TheoremÂ <ref> induce (X)â€“equivariant simplicial maps Xâ†’ X and X â†’  X, as follows:
    
      * Xâ†’ X is  surjective.
    
      * X â†’  X  is an injective section of .  
    
      *  is a homotopy 
    equivalence with homotopy inverse  .
    
     By definition, X is the simplicial realization of the partial order â‰¤ on X.  Similarly, X is the simplicial realization of the partial order 
    â‰¼ on ğ’°â„¬ğ’®(X).  So, the first two enumerated assertions follow from 
    TheoremÂ <ref>.  
    
    To prove <ref>, let Y be a Roller class.  Let [ğ’±]âˆˆ ()^-1(Y).  Then Y_ğ’±=Y__Y.  By 
    RemarkÂ <ref> and LemmaÂ <ref>, we have ğ’±â‰¼_Y.
    
    Using the notation Y for the 0â€“simplex of X corresponding to the Roller class Y, we have just shown that ^-1(Y) is a subcomplex of X spanned by 
    0â€“simplices adjacent or equal to the 0â€“simplex [_Y], so ^-1(Y) is topologically a 
    cone.  In particular, ^-1(Y) is contractible.  Quillen's fiber theorem (see e.g.Â <cit.>) implies that  is a homotopy equivalence, such that any section is a homotopy inverse. In particular,  is a homotopy inverse of .
    
    The preceding corollary provides an explicit (X)â€“equivariant homotopy equivalence Xâ†’ X.  Furthermore, it is possible, although somewhat tedious, to construct an explicit, 
    (X)â€“equivariant homotopy equivalence Xâ†’  X.  Composing these maps gives
    a homotopy equivalence X â†’ X, which is (X)â€“equivariant on the nose.
    This is slightly stronger than PropositionÂ <ref>, which asserts that X and 
    X are  homotopy equivalent.  We have chosen a different proof of PropositionÂ <ref> that is somewhat shorter, relying on the nerve theorem, and only yielding 
    (X)â€“equivariance up to homotopy.  Our ultimate goal is to relate the homotopy type of X and X to that of the Tits boundary X, and in any case our homotopy equivalence Xâ†’ X, provided by TheoremÂ <ref>, is only equivariant up to homotopy. 
    
    
    Â§ THE TITS BOUNDARY
    
    
    In this section, we recall the definition of the Tits boundary X, and establish some 
    connections between points on the Tits boundary and UBSes. The main result of this section, PropositionÂ <ref>, is a technical result about combining UBSes that will be crucial in the next section.
    
    In this section, we will work extensively with the CAT(0) metric d_X on the cube complex X, hence most half-spaces considered here are CAT(0) half-spaces.  Recall from SectionÂ <ref> that if Ä¥ is a hyperplane with open carrier N(Ä¥),
    the two vertex half-spaces associated to  Ä¥ are denoted h, h^*. The two CAT(0) half-spaces associated to Ä¥ are the cubical convex hulls (h) and (h^*), respectively. 
    Observe that 
     (h) and (h^*) are exactly the components of X âˆ– N(Ä¥). 
    
    
    
    The Tits boundary of X, denoted X, is the set of equivalence classes of CAT(0) geodesic rays  in 
    X, where rays Î³,Î³' are equivalent if the Hausdorff distance between them is finite.  As a set, X coincides with the visual boundary of X.
    
    We endow X with a metric, as follows.
    Given CAT(0) geodesic rays Î±,Î² [0,âˆ)â†’ X with Î±(0)=Î²(0)=x, the Alexandrov angle formed by Î±,Î² at x is 
    
        âˆ _x(Î±,Î²)=cos^-1(lim_t,t'â†’0_X(Î±(t), Î²(t'))^2-t^2-(t')^2/2tt')
    
    In other words, âˆ _x(Î±,Î²) is computed by applying the law of cosines to a triangle with sides along Î± and Î², and then taking a limit as the triangle shrinks.
    Let a = [Î±] âˆˆ X and b = [Î²] âˆˆ X be the the equivalence classes of Î±,Î² respectively.  Following  <cit.>, we define
    
        âˆ _T(a,b) = âˆ _T([Î±],[Î²])
        :=sup_xâˆˆ Xâˆ _x(Î±_x,Î²_x),
    
     where Î±_x,Î²_x are the rays emanating from x and representing 
    a,b respectively.  Then âˆ _T induces a length metric d_T on X in the standard way, making it a CAT(1) 
    space. See <cit.>. We always equip X with the metric _T. By <cit.>, the automorphism group 
    (X) acts on X by isometries.
    
    
    We remark that the original definition of the Alexandrov angle <cit.> is somewhat more involved. In our setting, since X is a CAT(0) space, <cit.> says the limit in (<ref>)  exists and is equal to the Alexandrov angle in the original definition. Compare <cit.>.
    
    DefinitionÂ <ref> has the following generalization to the cuboid setting.
    
    
    
    Fix a group G acting on X by cubical automorphisms, as well as a Gâ€“admissible hyperplane rescaling Ï, as in DefinitionÂ <ref>.
    Then the cuboid metric d_X^Ï is still a CAT(0) metric by LemmaÂ <ref>. Applying DefinitionÂ <ref> to the CAT(0) space (X, d_X^Ï), we obtain the cuboid Tits boundary^Ï X = (X, d_X^Ï), with an associated CAT(1) metric d_T^Ï. 
    The restricted automorphism group (X^Ï) acts on ^Ï X by isometries. Since Ï is a Gâ€“admissible rescaling, we have G âŠ‚(X^Ï) by DefinitionÂ <ref>, hence ^Ï X still admits a Gâ€“action.
    
    
    All of the results of this section extend to a cuboid metric d_X^Ï. See RemarksÂ <ref>, <ref>, andÂ <ref> for details.
    
    Throughout this section, we use Greek letters Î±, Î², Î³ to denote geodesic rays, and the corresponding Roman letters a,b,c to denote equivalence classes. We write a = [Î±] = Î±(âˆ) to denote the endpoint of Î± in X.
    
    
    
    
    
     Â§.Â§ Deep sets
    
    Every point of the Tits boundary has an associated deep set of half-spaces.
    
    
    Let aâˆˆ X, and
    let Î± [0,âˆ)â†’ X be a CAT(0) geodesic representing a. We define the deep set
        D_a = {hâˆˆ :  for all  R>0  there is  t_R>0  s.t. ğ’©_R( Î±[t_R,âˆ)) âŠ‚(h) }.
    
    It is immediate to check that the definition does not depend on the representative geodesic Î±. If h âˆˆ D_a, we say that h is deep for a.
    
    Let Î± [0,âˆ)â†’ X be a CAT(0) geodesic ray with Î±(0) âˆˆ X^(0), and let Ä¥âˆˆ(Î±). Then the following hold:
    
      *  Define f(t) = d_X(Î±(t), Ä¥), and let t_0 = Î±^-1(Ä¥). Then, for 
    t_0 â‰¤ s â‰¤ t, we have
    
        f(t)-f(s) â‰¥ A_0 Â· (t-s),
    
    where A_0 > 0,  and A_0 may depend on Ä¥ and Î± but not on s,t.
    
      *  The hyperplane Ä¥ has a deep half-space h âˆˆ D_a.
    
    Consequently, (Î±) is a pruned UBS. 
    
    ByÂ <cit.>, f is a convex, 1â€“Lipschitz function.   
    By convexity, f has left and right derivatives at every point in (0,âˆ), and these are non-decreasing.  Since f is Lipschitz and convex,  the left and right 
    derivatives coincide almost everywhere, hence f' is well-defined almost everywhere, and
    non-decreasing at all points where it is defined.
    
    Let t_0 = Î±^-1(Ä¥). Since the carrier N(Ä¥) â‰…Ä¥Ã— (-1/2, 1/2) is an â„“^2 product and Î±(t_0) âˆˆÄ¥ lies on the midcube of a cube, there 
    is an initial segment of Î± after crossing Ä¥ on which f(t) is an increasing linear function. Therefore, f'(t) = f'(t_0) = A_0 > 0 on this segment. (In fact, f'(t_0) = sinÎ¸_0, 
    where Î¸_0 is the angle between Î± and Ä¥ in the â„“^2 metric on a cube.) Hence f'(t) â‰¥ A_0 for all tâ‰¥ t_0 at which f'(t) is defined. Since f is Lipschitz, it 
    follows that for all t_0â‰¤ sâ‰¤ t, we have 
    
        f(t)-f(s)=âˆ«^t_sf'(z)  dz â‰¥ A_0Â·(t-s),
    
    proving <ref>. 
    
    Now, <ref> immediately implies <ref>.
    The conclusion that (Î±) is pruned is then immediate from DefinitionÂ <ref>.
    
    
    The following lemma is a strengthening of <cit.>. While <cit.> proves that D_a contains an infinite descending chain, we prove the stronger statement that D_a is non-terminating.
    
    
    For a point a âˆˆ X, define á»¸_a = â‹‚_hâˆˆ D_a h. Then D_a and á»¸_a have the following properties:
    
      * D_a is consistent, and therefore D_a = ^+_á»¸_a. 
    
      *  Every half-space h_0 âˆˆ D_a belongs to a descending chain {h_0, h_1, â€¦}âŠ‚ D_a. Furthermore, if Ä¥_0 âˆˆ(Î±) for a ray Î±âˆˆ a, then Ä¥_n âˆˆ(Î±) for all n.
    
      * á»¸_aâŠ‚ X is the closure of a (unique, principal) Roller class Y_a.
    
    The consistency of D_a is immediate from the definition. Thus, by PropositionÂ <ref>.<ref>, we obtain D_a = ^+_á»¸_a. This proves <ref>.
    
    To prove <ref>, let h_0 âˆˆ D_a.  By <cit.>,  there exists a geodesic 
    ray Î± representing a such that Î±(0) âˆˆ h_0^*. Since h_0 âˆˆ D_a, DefinitionÂ <ref> implies that 
    Î± must deviate arbitrarily far from Ä¥_0.
    Thus, by LemmaÂ <ref>, a point Î±(t) for large t has the property that |(Î±(t), y)| â‰¥ 1 for 
    every y âˆˆ N(Ä¥_0). Now,  PropositionÂ <ref> says that there is at least one hyperplane Ä¥_1 separating 
    Î±(t) from N(Ä¥_0). Observe that Ä¥_1 âˆˆ(Î±) by construction, and orient Ä¥_1 by choosing the 
    half-space h_1 âŠ‚ h_0. Now, LemmaÂ <ref> says that h_1 âˆˆ D_a. Continuing inductively, we obtain 
    a descending chain {h_0, h_1, â€¦}âŠ‚ D_a where Ä¥_n âˆˆ(Î±) for all n, proving 
    <ref>.
    
    
    By <ref>,  D_a = ^+_á»¸_a is consistent, and by  <ref>, D_a contains an infinite descending chain. Thus á»¸_a  = â‹‚_hâˆˆ D_a h is a convex, nonempty subset of X.  Since D_a is non-terminating by  <ref>, LemmaÂ <ref> implies
     that á»¸_D_a is the closure of a principal Roller class Y_a âˆˆ X. (Compare DefinitionÂ <ref>.) This proves <ref>.
     
    The previous lemmas generalize readily to a cuboid metric d_X^Ï. Indeed, LemmaÂ <ref> generalizes because because hyperplane carriers are still â„“^2 products, and because <cit.> works in any CAT(0) space.
    Similarly, LemmaÂ <ref> generalizes because <cit.> works in every CAT(0) space and, because d_X^Ï is quasi-isometric to the â„“^1â€“metric on X^(0). 
    
    
     Â§.Â§ CAT(0) rays and their UBSes
    
    Given a CAT(0) geodesic ray Î³ in X, starting at a point of X^(0), recall that  (Î³) denotes the set of 
    hyperplanes h that intersect Î³.  It is easy to see (cf.Â <cit.>) that 
    (Î³) is a UBS.
    
    
    
    
    Throughout this subsection, fix a,bâˆˆ X and let Î±, Î² be CAT(0) geodesic rays representing a and b, respectively. We can assume that  Î±(0)=Î²(0) = x âˆˆ X^(0).
    
    The following lemma says that when (Î±)âˆª(Î²) has finite symmetric difference with a UBS, it actually is a UBS. 
    Several subsequent lemmas build toward PropositionÂ <ref>, which will show that (Î±)âˆª(Î²) is in fact a UBS associated to a ray Î³.
    
    
    Suppose that (Î±)âˆª(Î²) is commensurate with a UBS. 
    Define ğ’œ=(Î±) âˆ–(Î²) and â„¬=(Î²) âˆ–(Î±) and  ğ’=(Î±)âˆ©(Î²).
    Then
    
      *  Each of ğ’œ,â„¬ is infinite or empty.
     
      *  Every element of ğ’œ crosses every element of â„¬.
      
      * (Î±) âˆª(Î²) = ğ’œâŠ”â„¬âŠ”ğ’ is a UBS.
    
    
    Let = (Î±) âˆª(Î²). Since  is commensurate with a UBS by hypothesis, it must be infinite and unidirectional. We 
    will check the other properties of a UBS at the end of the proof.
    
    
    By LemmaÂ <ref>, every hyperplane Ä¥ = Ä¥_0 âˆˆ(Î±) corresponds to a deep half-space h_0 âˆˆ D_a, and  by LemmaÂ <ref>, h_0 is the start of a descending chain {h_0, h_1, â€¦}âŠ‚ D_a, where h_n âˆˆ(Î±) for every n. Similarly, every hyperplane k_0 âˆˆ(Î²) defines a descending chain {k_0, k_1, â€¦}âŠ‚ D_b, where k_m âˆˆ(Î²) for every m.
    
     If ğ’œ = (Î±) âˆ–(Î²) â‰ âˆ…, then any hyperplane Ä¥_0 âˆˆğ’œ defines a chain  {Ä¥_0, Ä¥_1, â€¦}âŠ‚(Î±), as above. Furthermore, Ä¥_0 separates every Ä¥_n from Î². Thus Ä¥_n âˆˆğ’œ, and ğ’œ is infinite. Similarly, â„¬ must be empty or infinite, proving  <ref>.
    
    Next, suppose for a contradiction that Ä¥_0 âˆˆğ’œ is disjoint from kÌ‚_0 âˆˆâ„¬. Then the deep half-spaces h_0 âˆˆ D_a and k_0 âˆˆ D_b are also disjoint. But then the disjoint chains {Ä¥_n}âŠ‚(Î±) and {kÌ‚_m }âŠ‚(Î²) contradict the fact that = (Î±) âˆª(Î²) is unidirectional. This proves  <ref>.
    
    
    Finally, we show that  is a UBS. We have already checked that  is infinite and unidirectional.
    To check inseparability, suppose that â„“Ì‚ is a hyperplane of X that separates Ä¥, kÌ‚âˆˆ. Since we already know that (Î±) and (Î²) are inseparable, it suffices to check the case that Ä¥âˆˆğ’œ and kÌ‚âˆˆâ„¬. But then Ä¥ and kÌ‚ must cross by <ref>, a contradiction. Similarly, since (Î±) and (Î²) contain no facing triples, any potential facing triple in  must contain at least one hyperplane  Ä¥âˆˆğ’œ and at least one hyperplane  kÌ‚âˆˆâ„¬. But then Ä¥ and kÌ‚ must cross, hence  cannot contain any facing triples. Thus  is a UBS, proving <ref>.
    
    
    Recall from DefinitionÂ <ref> that given a UBS , we have the umbra á»¸_âŠ‚XÌƒ.
    Following PropositionÂ <ref>, let _Y_ = _á»¸_XÌƒâ†’ Y_ be the gate projection to á»¸_.
    
    
    Suppose Î± and Î² are geodesic rays starting at xâˆˆ X^(0), and that = (Î±)âˆª(Î²) is commensurate with a UBS. Then = (x, _Y_(x)). 
    
    Since the geodesic rays start at the vertex x, LemmaÂ <ref> says that  all the hyperplanes they cross are deep, i.e.  (x,Y_a) =(Î±) and (x,Y_b)= (Î²), hence = (x,Y_a)âˆª(x,Y_b). In addition, LemmaÂ <ref> says that  is a UBS.
    
    
    Now, Lemma <ref> gives  á»¸_= á»¸_a  âˆ©á»¸_b, and in particular _á»¸_^+ = D_aâˆª D_b. By Lemma <ref> and
      Remark <ref>, we have 
     (x, á»¸_)=(x, Y_)= (x, _Y_(x)). 
    We must show that this UBS equals  = (x,Y_a)âˆª(x,Y_b).
     To this end we have by Proposition <ref>:
     
        __Y_a(x)^+    =    [_x^+âˆ– D_a^*]âˆª D_a,
        __Y_b(x)^+    =    [_x^+âˆ– D_b^*]âˆª D_b,
        __Y_(x)^+    =    [_x^+âˆ– (D_a^*âˆª D_b^*)]âˆª (D_aâˆª D_b).
    
    Then a standard Venn diagram argument shows that 
    
        _x^+âˆ–__Y_(x)^+    =    _x^+âˆ–( [_x^+âˆ– (D_a^*âˆª D_b^*)]âˆª (D_aâˆª D_b)
        )
        
           =   ( _x^+âˆ© (D_a^*âˆª D_b^*) ) âˆ–(D_aâˆª D_b).
    
    The set of hyperplanes on the left-hand side is (x, _Y_(x)), while the set of hyperplanes on the right-hand side is (x,Y_a)âˆª(x,Y_b).
    
     Suppose that (Î±)âˆª(Î²) is commensurate with a UBS.  Then d_T(a,b)â‰¤Ï€/2.
    
    We will show that Ï€/2 is an upper bound on the Alexandrov angle between rays representing a,b based at an arbitrary point, and then 
    use (<ref>).  The bound will be produced by finding a convex subspace, 
    isometric to a Euclidean cube, which has one corner at the basepoint and which contains nontrivial initial segments of the 
    rays.
    
    Angle bound at a vertex:  Let yâˆˆ X be an arbitrary vertex.  Let Î±',Î²' be CAT(0) geodesic rays 
    emanating from y and representing a,b respectively (so, Î± is asymptotic to Î±' and Î² is asymptotic to 
    Î²').  Let =(Î±)âˆª(Î²), and let '=(Î±')âˆªğ’²(Î²').  Then  is commensurate to ', and hence commensurate to a UBS.  
    LemmaÂ <ref> then implies that ' is actually a UBS.
    
    Now let X_yâŠ‚ X be the cubical convex hull of Î±'âˆªÎ²'.  Then the set of hyperplanes crossing X_y is 
    exactly '.  Moreover, by LemmaÂ <ref>, there exists a point yÌ… in the Roller boundary 
    such that ' is precisely the set of hyperplanes separating y from yÌ….
    
    Let â—ƒ be the partial order on ' defined by declaring that Ä¥â—ƒÄ¥' if the hyperplane Ä¥ 
    separates y from Ä¥'.  Since every hyperplane of X_y separates y from yÌ…, any hyperplanes Ä¥,Ä¥'âˆˆ' are either â—ƒâ€“comparable, or they cross.
    
    Note that if Ä¥âˆˆ' is dual to a 1â€“cube of X_y incident to y, then Ä¥ is â—ƒâ€“minimal.  
    Hence the set '_min of â—ƒâ€“minimal hyperplanes is nonempty. Since â—ƒâ€“incomparable hyperplanes cross, '_min is a 
    set of pairwise-crossing hyperplanes of X.  Since X_y is convex and every hyperplane in ' crosses X_y, we 
    have a cube C âŠ‚ X_y such that the hyperplanes crossing C are exactly those in '_min.
    
    Note yâˆˆ C.  Also note that any cube C' of X_y with yâˆˆ C' satisfies C'âŠ‚ C.  Thus any nontrivial 
    CAT(0) geodesic segment in X_y emanating from y has a nontrivial initial subsegment  lying in C.  In 
    particular, Î±' and Î²' have nontrivial initial segments lying in C.  Since the ambient CAT(0) metric restricts 
    to the Euclidean metric on the cube C, the Alexandrov angle made by Î±',Î²' at y satisfies
    
        âˆ _y(Î±',Î²')=lim_t,t'â†’0âˆ _y(Î±'(t),Î²'(t))â‰¤Ï€/2,
    
    because any two segments in a cube emanating from a common corner make an angle at most Ï€/2.
    
    Angle bound at arbitrary points:  We now bound the angle made by rays representing a,b and emanating from 
    non-vertex points, by an identical argument taking place in an appropriate cubical subdivision of X.  Let yâˆˆ X be an 
    arbitrary point.  Perform a cubical subdivision of X to obtain a CAT(0) cuboid complex X' in which y is a vertex, so that
    the CAT(0) cuboid metric coincides with the original metric on X.  
    
    More precisely, for each hyperplane Ä¥, identify its carrier with Ä¥Ã—[-1/2,1/2].  For each Ä¥ 
    such that yâˆˆÄ¥Ã—(-1/2,1/2), let Ïµ_Ä¥ be such that yâˆˆÄ¥Ã—{Ïµ_Ä¥}.  The (geodesically convex) subspace Ä¥Ã—{Ïµ_Ä¥} has a natural cubical structure with an nâ€“cube 
    for each (n+1)â€“cube intersecting Ä¥.  We subdivide X so that the cubes of Ä¥Ã—{Ïµ_Ä¥} are 
    subdivided cubes whose edges are segments in X whose lengths are inherited from X.  The result is a cuboid complex X' such that 
    the identity map Xâ†’ X' is an isometry in the CAT(0) metric, preserves the median, and sends y to a vertex.  Since the 
    hyperplanes of X' are parallel copies of hyperplanes of X, the set of hyperplanes of X' that cross Î±âˆªÎ² 
    continues to be a UBS, so LemmaÂ <ref> still applies. (Compare RemarkÂ <ref>.) We can thus argue exactly as before to see that 
    âˆ _y(Î±',Î²')â‰¤Ï€/2.
    
    Conclusion:  We have shown that, for all yâˆˆ X, letting Î±',Î²' be the rays based at y and 
    representing a,b respectively, we have âˆ _y(Î±',Î²')â‰¤Ï€/2.  Taking the supremum over all yâˆˆ X, as in (<ref>), we see 
    that the angular metric satisfies âˆ _T(a,b)â‰¤Ï€/2.  Now, 
    DefinitionÂ <ref> gives _T(a,b)â‰¤Ï€/2, as required.
    
    LemmasÂ <ref> andÂ <ref> extend immediately to the cuboid setting, because they use only hyperplane combinatorics and prior lemmas. The above proof of 
    LemmaÂ <ref> also extends to cuboids, because it uses prior lemmas combined with CAT(0) geometry. Indeed, the above argument uses cuboids in combination 
    with RemarkÂ <ref> to prove the desired angle bound for arbitrary basepoints in X. The key conceptual reason why the argument works for cuboids is that every pair of geodesic segments 
    in a cuboid,  emanating from a corner, meets at angle at most Ï€/2. 
    
    The reliance on cuboids to prove the desired result for cubes can be avoided, as follows. First, prove the angle bound at a vertex of X, exactly as above. Then, let X' be the cubical subdivision 
    of X, and observe that the CAT(0) geodesics in X' are exactly the same as those in X. (See e.g. <cit.>.) Thus the same argument proves the angle bound at 
    every vertex of X'. 
    
    Continuing to subdivide by induction, we obtain a set V_âˆâŠ‚ X of points that are vertices of the subdivision at some (and hence all subsequent) stages.  Note that V_âˆ intersects 
    each of the original cubes of X in a dense subset, and in particular contains all the original vertices.  The desired angle bound holds when the rays in question are based at any point in 
    V_âˆ.  Now, fixing a,bâˆˆ X, we can consider the function xâ†¦âˆ _x(Î±,Î²), where Î±,Î² are the rays representing a,b and starting at x.  This function need 
    not be continuous on X (it is upper semicontinuous <cit.>), but it can be shown to be continuous on each open cube of X (of any dimension).  Since it is 
    bounded above by Ï€/2 on a dense subset of each such cube, we conclude that sup_xâˆ _x(Î±,Î²)=âˆ _T(a,b)â‰¤Ï€/2.
    
    Finally, observe that the statement and proof of LemmaÂ <ref> fail completely if we modify the angles of the cubes, precisely because two segments emanating from a vertex of a parallelogram might meet at a large angle.
    
    
    
    Our main goal in this section is to show that if Î±,Î² are geodesic rays with common initial point, and (Î±)âˆª(Î²) is a UBS, then any 
    geodesic ray Î³ representing an interior point on the Tits geodesic from Î±(âˆ) to Î²(âˆ) must cross all the hyperplanes in (Î±)âˆª(Î²).  Before proving this in PropositionÂ <ref>, we will need a few auxiliary results,  starting with a corollary of LemmaÂ <ref>.
    
    
    
    
    Suppose that = (Î±)âˆª(Î²) is a UBS. Let Y be the cubical convex hull of Î±âˆªÎ². Let Î³ [0,âˆ)â†’ X be a CAT(0) geodesic ray with Î³(0)=Î±(0)=Î²(0).  Suppose that Î³ is contained in Y and crosses every dominant hyperplane in .  Then Î³ crosses every 
    hyperplane in .
    
    This follows immediately from 
    LemmaÂ <ref>.<ref> applied to = (Y).
    
    
    Next, we study angles at which rays cross dominant hyperplanes. 
    
    
     Let Î± be a CAT(0) geodesic ray with Î±(0)âˆˆ 
    X^(0).  Then there exists Îº>0 such that the following holds.  Let ğ’Ÿ_d,â‹¯,ğ’Ÿ_kâŠ‚(Î±) be the dominant minimal UBSes provided by applying LemmaÂ <ref> to ğ’²(Î±), and let iâˆˆ{d,â€¦,k}.  Then ğ’Ÿ_i contains a chain {Ã»_n}_nâ‰¥0 of hyperplanes such 
    that ğ’Ÿ_i is commensurate with the inseparable closure of {Ã»_n}_nâ‰¥ 0, and 
    
        âˆ _y_n(Î±,Ã»_n)â‰¥Îº
    
    for all nâ‰¥ 0, where y_n is the point Î±âˆ©Ã»_n.
    
    Recall from LemmaÂ <ref> that (Î±) is a pruned UBS. Thus LemmaÂ <ref> applies to (Î±).
    
    Now, fix iâˆˆ{d,â€¦,k}.  
    LemmaÂ <ref> says that ğ’Ÿ_i={Ä¥_m}_mâ‰¥0, where
    each Ä¥_m is dominant. This means each Ä¥_m crosses all but finitely many hyperplanes in ğ’²(Î±) âˆ–ğ’Ÿ_i.  
    
    The divergence f(t) of Î± from Ä¥_0:  Define f(t) = _X(Î±(t),Ä¥_0), and 
    let T_0 = Î±^-1(Ä¥_0). By LemmaÂ <ref>.<ref>, there is a constant A_0 > 0 (depending on Ä¥_0 but not s,t) such that
    
        f(t)-f(s) â‰¥ A_0Â·(t-s)
    
    for all T_0â‰¤ sâ‰¤ t.
    
    Hyperplane count:  We wish to produce a constant C such that any lengthâ€“C subpath of Î± 
    crosses an element of ğ’Ÿ_i.
    
    Let s_0â‰¥ T_0 be sufficiently large that Î±([0,s_0)) crosses all of the finitely many hyperplanes in ğ’²(Î±) âˆ–ğ’Ÿ_i not crossing Ä¥_0.  Suppose that s_0â‰¤ sâ‰¤ t.  Then all hyperplanes crossing Î±([s,t]) either cross Ä¥_0 or belong to ğ’Ÿ_i.  
    Assume that Î±([s,t]) does not cross any element of ğ’Ÿ_i.  
    
    Let H_st = (Î±([s,t])) denote the cubical convex hull of Î±([s,t]).  There may be hyperplanes crossing H_st that do not cross Î±([s,t]), because Î±(s),Î±(t) need 
    not be vertices. However, we can bound the number of such hyperplanes as follows.  Let ğ’²_badâŠ‚ğ’²(H_st)âŠ‚ğ’²(Î±) be the set of hyperplanes 
    that cross H_st but do not cross 
    Î±([s,t]).  Note that ğ’²(H_st) inherits a partial order from ğ’²(Î±), by restricting the partial order â—ƒ from the proof of 
    LemmaÂ <ref>.  
    Suppose that Ä¥âˆˆğ’²(H_st) is neither â—ƒâ€“maximal nor â—ƒâ€“minimal in ğ’²(H_st).  Then there exist Ã»,vÌ‚âˆˆğ’²(H_st) such that 
    Ä¥ separates Ã» from vÌ‚.  By the definition of the convex hull, Ä¥ cannot separate Ã» or vÌ‚ from Î±([s,t]), so Ä¥ must cross Î±([s,t]).  Thus 
    every hyperplane in ğ’²_bad is â—ƒâ€“minimal or â—ƒâ€“maximal.  Since incomparable hyperplanes have to cross, we conclude that |ğ’²_bad|â‰¤ 
    2(X), hence there are at most D=2 X hyperplanes that cross H_st but not Î±([s,t]).
    The rest of the 
    hyperplanes crossing H_st must cross Ä¥_0, since they cross Î±([s,t]), and we have chosen s â‰¥ s_0 and assumed ğ’²(Î±([s,t]))âˆ©ğ’Ÿ_i=âˆ….
    
     
     
    Consider the CAT(0) closest-point projections p  Xâ†’Ä¥_0 and q  Xâ†’ H_st.
    ByÂ <cit.>,  the d_Xâ€“convex hull of p(H_st)âˆª 
    q(Ä¥_0) is isometric to p(H_st)Ã— [0,_X(Ä¥_0,H_st)], where p(H_st)  is identified with p(H_st) Ã—{ 0 }, and q(Ä¥_0) is identified with p(H_st) Ã—{_X(Ä¥_0,H_st)}.
    ByÂ <cit.>, the hyperplanes that cross q(Ä¥_0) are precisely those that 
    cross Ä¥_0 and H_st.  So, there are at most D hyperplanes crossing H_st but not q(Ä¥_0).  By 
    LemmaÂ <ref>, the points Î±(s),Î±(t) are thus both within distance Î»_0D+Î»_1 of 
    points in q(Ä¥_0), where Î»_0D+Î»_1 depends only on D. Thus
    
        _X(Î±(t),Ä¥_0)  â‰¤ Î»_0D+Î»_1+_X(H_st,Ä¥_0)  â‰¤ Î»_0 D+Î»_1+_X(Î±(s),Ä¥_0).
      In other words, since  s,tâ‰¥ s_0 â‰¥ T_0, we have shown
    
        A_0(t-s) â‰¤ f(t)-f(s)â‰¤Î»_0D+Î»_1.
    
    Thus, for any 0â‰¤ sâ‰¤ t (without assuming s â‰¥ s_0), we get 
    
        t-sâ‰¤Î»_0D+Î»_1/A_0+ s_0.
    
    
    
    Letting C=  Î»_0 D+Î»_1/A_0 + s_0+1, we have shown that any subsegment of Î± of 
    length at least C crosses an element of ğ’Ÿ_i.  
    
    Hence, for any 0â‰¤ sâ‰¤ t, we have that Î±([s,t]) 
    crosses at least âŒŠ (t-s)/CâŒ‹ elements of ğ’Ÿ_i.  
    
    Big angle hyperplanes:  Let Ïƒ be a subsegment of Î±.  Consider the hyperplanes in ğ’Ÿ_i 
    crossing Ïƒ.  Any two such hyperplanes are either disjoint or not, and any collection of pairwise crossing 
    hyperplanes has size at most X.  So, if there are more than (3, X+1) hyperplanes in ğ’Ÿ_i crossing Ïƒ, then there are 
    three disjoint such hyperplanes, where ( Â·, Â·) denotes the Ramsey number.  Hence, if Ïƒ has length |Ïƒ|=CÂ·(3, X+1)+1, 
    then Ïƒ crosses three disjoint hyperplanes Ã»,vÌ‚,Åµâˆˆğ’Ÿ_i.  Without loss of generality, 
    say vÌ‚ separates Ã»,Åµ.  Hence Î±âˆ© N(vÌ‚) is a subpath of Î± lying between the points 
    Î±âˆ©Ã» and Î±âˆ©ÅµâˆˆÏƒ, so 
    
        |Î±âˆ© N(vÌ‚)|â‰¤ CÂ·(3, X+1)+1=L.
    
    Note that L is independent of the hyperplane vÌ‚. Indeed, L depends on A_0,Î»_0,Î»_1,s_0, and hence is determined by X, the hyperplane Ä¥_0 and the geodesic Î±.  
    Now, using the fact that N(vÌ‚) is isometric to a product
     of the form vÌ‚Ã—(-1/2,1/2), we see that
    
        âˆ _Î±âˆ©vÌ‚(vÌ‚,Î±)â‰¥sin^-1(1L),
    
    which we denote by Îº.  
    
    Since we can do the above procedure for infinitely many disjoint lengthâ€“L segments in Î±, we find infinitely many 
    hyperplanes in ğ’Ÿ_i making an angle at least Îº with Î±.  Since any infinite subset of a UBS contains 
    a chain, we thus have a chain {Ã»_n}_nâ‰¥ 0âŠ‚ğ’Ÿ_i with this property.  Finally, the inseparable 
    closure of {Ã»_n}_nâ‰¥ 0 is a UBS contained in ğ’Ÿ_i, and hence commensurate with ğ’Ÿ_i since 
    ğ’Ÿ_i is minimal.  This verifies the statement for the given ğ’Ÿ_i, and we conclude by replacing Îº 
    with the minimal Îº for the various iâˆˆ{d,â€¦,k}.
    
    Extending LemmaÂ <ref> to a cuboid metric d_X^Ï requires a bit of care. The above proof relies on 
     some results of of HuangÂ <cit.>, which are written in the context of a cube complex with finitely many isometry types of cells. This hypothesis may fail in (X, d_X^Ï). 
    Fortunately, we only need to use Huang's results in a finite cuboid complex, namely the convex hull of H_stâˆª p(H_st), where H_st is itself finite and p is a certain CAT(0) 
    projection. Thus Huang's resultsÂ <cit.> apply to the subcomplex we need. 
     
    Some constants in the proof would need to be adjusted for the cuboid metric.  The constants Î»_0, Î»_1 of LemmaÂ <ref>, used in the definition of C, would have to be replaced 
    by the constants Î»_0^Ï, Î»_1^Ï of LemmaÂ <ref>. 
    In the constant sin^-1(1/L), the numerator 1 is the thickness of a hyperplane carrier, and would have to be replaced by the minimal thickness of a hyperplane carrier in  the metric 
    d_X^Ï.
    
    
    Now we can prove the main result of this section.
    
    
    
    Let Î±, Î² be CAT(0) geodesic rays with Î±(0) = Î²(0) âˆˆ X^(0).
    Suppose that (Î±)âˆª(Î²) is commensurate 
    with a UBS.  Then a=Î±(âˆ) and b=Î²(âˆ) are joined by a unique geodesic 
    g in X. Furthermore, any interior point c of g is represented by a CAT(0) geodesic ray Î³ 
    such that (Î³)  = (Î±)âˆª(Î²).
    
     By LemmaÂ <ref>, we have 
    _T(a,b)â‰¤Ï€/2, so the CAT(1) space X contains a 
    unique geodesic g from a to b.  This proves the first assertion of the lemma. 
    
    Let c âˆˆ X be an interior point of g.  Let Î³ be the unique CAT(0) geodesic ray starting at Î±(0) and 
    representing c.  We need to show that (Î³)=ğ’²(Î±)âˆª(Î²). 
    
    Working in the convex hull of Î±âˆªÎ²:  Let Y be the 
    cubical convex hull of Î±âˆªÎ². We claim that g lies in YâŠ‚ X.  Indeed, 
    applying LemmaÂ <ref> inside of Y shows that a,b can be joined by a unique geodesic g' in 
    Y.  Since the Tits distance in Y from a to b depends only on {_Y(Î±(t),Î²(t)):tâ‰¥ 0} and 
    _Y(Î±(t),Î²(t))=_X(Î±(t),Î²(t)) by convexity of Y, we have that g' is a geodesic of X.   Since 
    g' has length less than Ï€, it is the unique geodesic in X from a to b, i.e. g=g' and g lies in Y. 
    
    For the rest of the proof, we work entirely in Y.
    
    For any yâˆˆ Y, we can choose rays Î±_y,Î²_y with Î±_y(0)=Î²_y(0)=y and Î±_y(âˆ)=a,Î²_y(âˆ)=b, and note that the cubical convex hull Y_y of 
    Î±_yâˆªÎ²_y is contained in Y, and crosses all but finitely many of the hyperplanes crossing Y.  By convexity, Y_y= Y.  So, when convenient, we can move the basepoint.
    
    What we will actually verify:  The plan is as follows.  Let Ä¥ be a hyperplane of Y that is dominant in the UBS = (Y) = (Î±) âˆª(Î²).  We will show that câˆ‰Ä¥.  Since the 
    shallow side of any hyperplane in Y is contained in a neighborhood of that hyperplane, it follows that Î³ must cross Ä¥.  Once we show that Î³ crosses every dominant hyperplane, 
    CorollaryÂ <ref> will then imply that Î³ crosses every hyperplane, i.e. (Î³)=(Î±)âˆª(Î²), as required.  So, it remains to argue that 
    câˆ‰Ä¥ when Ä¥ is a dominant hyperplane.
    
    Initial segments of Î± and Î² inside a cube:  For each râ‰¥ 0, let y_r=Î±(r).  Let Î±_y_r and Î²_y_r be geodesics asymptotic to Î± and Î², defined as above.  Note that Y_y_râŠ‚ Y 
    contains a ray based at y_r and representing each element of Y.  As in the proof of LemmaÂ <ref>, there is a single cube C_y_râŠ‚ Y_y_r, with y_râˆˆ 
    C_y_r, such that any ray in Y_y_r emanating from y_r has a nontrivial initial segment in C_y_r.  
    
    Let Î±'_y_r,Î²'_y_r,Î³'_y_r be the maximal (nontrivial) segments of Î±_y_r,Î²_y_r,Î³_y_r that lie in C_y_r.  Then the Alexandrov angle between any two of the rays 
    Î±_y_r,Î²_y_r,Î³_y_r at y_r is just the Euclidean angle in C_y_r between the corresponding segments.
    
    ByÂ <cit.>, âˆ _y_r(Î±_y_r,Î²_y_r) converges to âˆ _T(a,b) = _T(a,b), where the equality follows from
    LemmaÂ <ref> because the distance is less than Ï€.
    
    Angle computation:  Let Ä¥ be a dominant hyperplane in .  By LemmaÂ <ref>,  we 
    can assume that Ä¥âˆˆğ’Ÿ, where ğ’Ÿ = ğ’Ÿ_j is a minimal UBS consisting of dominant hyperplanes. Since ğ’ŸâŠ‚(Î±) âˆª(Î²) is a minimal UBS, we must have either ğ’Ÿâ‰¼(Î±) or ğ’Ÿâ‰¼(Î²). We assume without loss of generality that ğ’Ÿâ‰¼(Î±).
    
    
    Note that every hyperplane in ğ’Ÿ is dominant in (Î±), because any hyperplane crossing all but 
    finitely many hyperplanes in âˆ–ğ’Ÿ crosses all but finitely many hyperplanes in ğ’²(Î±) âˆ–ğ’Ÿ.  We now apply LemmaÂ <ref> to (Î±) and ğ’Ÿ to produce 
    a constant Îº and a chain  {Ä¥_n }âŠ‚ğ’Ÿ whose inseparable closure is ğ’Ÿ and whose (necessarily dominant) 
    hyperplanes all cross Î± at an angle at least Îº:
    
        âˆ _y_n(Î±_y_n,Ä¥_n)â‰¥Îº,
    
    where y_n=Ä¥_nâˆ©Î± and 
    Î±_y_n is the sub-ray of Î± emanating from y_n.  
    Since all but finitely many of the Ä¥_n lie on the deep side of Ä¥, it suffices to show that Î³ crosses Ä¥_n for sufficiently large n. As explained above, it suffices to show that c âˆ‰Ä¥_n for sufficiently large n.
    
    
    Let Î²_y_n be the ray emanating from y_n and 
    asymptotic to Î².  
    Working in the cube C_y_n constructed above, we have that the segment Î±_y_n' makes a Euclidean angle at least Îº with the midcube M_n = C_y_nâˆ©Ä¥_n.  Meanwhile, 
    the segment Î²_y_n' makes some angle Î¸â‰¥ 0 with M_n.  
    See FigureÂ <ref>.
    
    Let sâˆˆ(0,1) be such that _T(a,c)=sÂ·_T(a,b) and _T(c,b)=(1-s)Â·_T(a,b).  Such an s exists since c is an interior point of the Tits geodesic g from a to b.
    
    
    
    
    Let Î·_n âŠ‚ C_y_n be the maximal segment that emanates from y_n and makes an angle sÂ·âˆ _y_n(Î±_y_n',Î²_y_n') with Î±_y_n' and and 
    angle (1-s)Â·âˆ _y_n(Î±_y_n',Î²_y_n') with Î²_y_n'.  Then there exists Îº_1= (1-s) Îº >0 such that âˆ _y_n(Î·_n,
    M_n) â‰¥Îº_1. Crucially, Îº_1 is  independent of n.  On the other hand, as 
    n â†’âˆ, we have convergent sequences
    
        âˆ _y_n (Î±_y_n',Î²_y_n')    â†’_T(a,b), 
        âˆ _y_n (Î±_y_n',Î³_y_n')    â†’_T(a,c) = s Â·_T(a,b), 
        âˆ _y_n (Î²_y_n',Î³_y_n')    â†’_T(b,c) = (1-s) Â·_T(a,b),
    
    Thus,  for all sufficiently large n, 
    
        âˆ _y_n(Î·_n,Î³_y_n')<Îº_1/2,
    
    so by the triangle inequality for Alexandrov angles, âˆ _y_n(Î³'_n,M_n) > Îº_1/2 >0.  Hence the ray Î³_y_n is not contained in Ä¥_n and, since its initial 
    point is in Ä¥_n, we thus have câˆ‰Ä¥_n.  This completes the proof.
    
    
    
    
    We observe that the proof of PropositionÂ <ref> extends to the cuboid setting with minimal effort. The proof of that lemma combines prior results and the local Euclidean geometry of a 
    cube; all of the local arguments work equally well in a rescaled cuboid. 
    
    
    
    Â§ CONNECTIONS BETWEEN TITS AND ROLLER BOUNDARIES
    
    
    
    In this section, we establish some important connections between X and X. Every Roller class v âˆˆ X is assigned a 
    canonical CAT(1)â€“convex  Tits boundary realizationQ(v) âŠ‚ X.
    We define a pair of maps Ïˆ X â†’ X and Ï† X â†’ X  that will play a major role in the proof of our main theorem. See PropositionÂ <ref> for the properties of Q(v) and PropositionÂ <ref> for  the relationship between Ï† and Ïˆ. 
    
    Toward the end of this section, we focus on â„“^2â€“visible Roller classes, namely all v âˆˆ X
     such that Ïˆâˆ˜Ï†(v) = v. 
    In SectionÂ <ref>, we will use the visible Roller classes to construct a closed covering of X that is compatible with a covering of a large part of X, denoted X.
    
    All of the results of this section extend with minimal effort to a cuboid metric d_X^Ï obtained via a Gâ€“admissible hyperplane rescaling (recall DefinitionsÂ <ref> andÂ <ref>). This extension is described in SectionÂ <ref>.
    
    
    
    Given a âˆˆ X, define Ïˆ(a) = Y_a âˆˆ X to be the Roller class Y_a constructed in LemmaÂ <ref>. That is, Ïˆ(a) is the principal Roller class of the  intersection of half-spaces in the deep set  D_a. 
    
    
    
    Our definition of Ïˆ generalizes Guralnik's boundary decomposition map <cit.>, because X agrees as a set with the visual boundary _ X.
    
    
    
    
    
    
    Let a = [Î±] âˆˆ X. Let (Î±) be the UBS consisting of hyperplanes crossing the geodesic Î±. Then Ïˆ(a) = Y_a = Y_(Î±).
    
    By LemmaÂ <ref> we have that D_a= _á»¸_a^+ and Y_a âˆˆ X. Fix xâˆˆ X^(0). By definition,  D_aâˆ–_x^+ = (x,Y_a) =  (x,[y]) for any y âˆˆ Y_a. Finally by  Lemma  <ref>(x,[y])âˆ¼(x,y). 
    
    By LemmaÂ <ref>, there is a combinatorial geodesic Î±'  [0,âˆ) â†’ X with Î±'(0) = x and Î±'(âˆ) =  y.  By RemarkÂ <ref>, we have (Î±')= (x,y). 
    
    Now, LemmaÂ <ref> implies that Î± and Î±' can be chosen to lie at finite Hausdorff distance. Thus Î± and Î±' cross the same hyperplanes, 
    except possibly for 
    finitely many. In symbols,
     (Î±') âˆ¼(Î±). By LemmaÂ <ref>, we conclude that Y_a = Y_(Î±).
    
    
     Â§.Â§ Tits boundary realizations
    
    Defining a map Ï† X â†’ X that serves as a partial inverse to Ïˆ takes considerably more effort. As a first step, we will define a Tits boundary realizationQ(v) associated to a Roller class v.
    
    A family â„± of subsets of X is called filtering if for every E,Fâˆˆâ„± there is a Dâˆˆâ„± such that DâŠ‚ Eâˆ© F. For example, for yâˆˆ X,  the family 
    
        â„± :={(h_1)âˆ©â‹¯âˆ©(h_n)   :   h_1, â€¦, h_nâˆˆ_y^+, nâˆˆ}
     
    is a filtering family of closed convex subspaces. 
    
    The following theorem combines results of Capraceâ€“Lytchak <cit.> and Balserâ€“Lytchak <cit.>.
    
    
    Let {X_i}_iâˆˆ I be a filtering family of closed convex subsets of a finite-dimensional CAT(0) space X. If the 
    intersection â‹‚_iâˆˆ I X_i is empty, then the intersection â‹‚_iâˆˆ I X_i of their 
    boundaries is nonempty, and furthermore â‹‚_iâˆˆ I X_i has intrinsic radius at most Ï€/2 and therefore a canonical circumcenter.  
    
    
    Next, we present two definitions that will turn out to be equivalent (compare LemmaÂ <ref>). The first of these definitions appears inÂ <cit.>.
    
    
    Let yâˆˆ X. Define Q(y)=â‹‚_hâˆˆ_y^+(h). Note that Q(y) â‰ âˆ… by Theorem <ref>.
    We call Q(y) the Tits boundary realization of y.
    
    Let xâˆˆ X^(0) and let yâˆˆ X.    Recall that (x,y)âŠ‚XÌƒ is the vertex interval between x and y, so 
    that (x,y)âˆ© X is a vertexâ€“convex subset of X^(0).  Generalizing DefinitionÂ <ref>, let (x,y) be the union of all of the cubes in X 
    whose 0â€“skeleta lie in (x,y)âˆ© X.
    Then (x,y) is a convex subcomplex of X, 
    and hence has a well-defined Tits boundary naturally embedded in X.  We define  Q'(y)=(x,y).
    
    
    In fact, the two definitions are equivalent: 
    
    
    Let yâˆˆ X and let x,x'âˆˆ X^(0).  Then:
    
      * (x,y)=(x',y), 
    hence Q'(y) is well-defined.
     
      * Q(y)=Q'(y).
     
      *  If yâˆ¼ y', then Q'(y)=Q'(y') and Q(y)=Q(y').
    
     To prove conclusion <ref>, observe that (x,y) and (x',y) lie at 
    Hausdorff distance bounded by _1(x,x'). Hence (x,y) and (x',y) have the same 
    Tits boundary.
    
    
    Next, we consider conclusionÂ <ref>.  For any given vertex half-space hâˆˆ_y^+, 
    let (h) be the 
    associated CAT(0) half-space containing y.  By <ref>, we can assume that xâˆˆ(h).  
    Hence (x,y)âŠ‚(h), so Q'(y)=(x,y)âŠ‚(h). Therefore Q'(y)âŠ‚ Q(y).
    
    For the reverse inclusion, suppose qâˆ‰ Q'(y).  Then there is a CAT(0) half-space (h) such that ğ’¥(x,y) âŠ‚(h) and q âˆ‰(h). (To find such a half-space, let Î³ be any CAT(0) geodesic ray 
    representing q. Since Î³ leaves every finite neighborhood of (x,y), it must cross a hyperplane Ä¥ 
    disjoint from (x,y).) The associated vertex half-space h satisfies hâˆˆ_y^+ but q âˆ‰(h). By DefinitionÂ <ref>, it follows that q âˆ‰ Q(y).  Hence Q(y)âŠ‚ Q'(y).
    
    Finally, consider conclusionÂ <ref>. If y âˆ¼ y', the Hausdorff distance from 
    (x,y) to (x,y') is bounded by _1(y,y') < âˆ. Using <ref>, we obtain
    
        Q(y) = Q'(y) = (x,y) = (x,y') = Q'(y') = Q(y').
    
    
    
    Following TheoremÂ <ref> and LemmaÂ <ref>, we can make the following definition.
    
    
    Let v âˆˆ X be a Roller class. Define Q(v) = Q(y) for any representative element y âˆˆ v.  
    The reader can think of Q(y) according to either DefinitionÂ <ref> or DefinitionÂ <ref>.  We call
     Q(v) the Tits boundary realization of the Roller class v.
     
    Observe that the collection of half-spaces â„Œ_y^+ containing y has empty intersection in X. Thus, by  TheoremÂ <ref>, 
    Q(v)  has a canonical circumcenter. We define Ï‡(v) âˆˆ X to be the circumcenter of Q(v). 
    
    For every v âˆˆ X and every g âˆˆ(X), we have Q(gv) = gQ(v) and (gv) = g (v). Furthermore, Q(v) and Q(gv) have the same intrinsic radius.
    
    Let yâˆˆ X, and let v=[y]. Then, for every h âˆˆ_y^+, the map g gives an isometry from (h)  to (gh). Thus g  Q(v) â†’ Q(gv) is an isometry, hence Q(v) and Q(gv) have the same intrinsic radius. By TheoremÂ <ref>, (v) and (gv) are uniquely determined by the geometry of Q(v) and Q(gv), respectively, hence (gv) = g (v).
    
    
    
    Consider a Roller class vâˆˆ X. We say that a combinatorial geodesic  ray Î³ in Xrepresentsv if 
    Î³(âˆ) = y âˆˆ v, or equivalently if 
    the UBS (Î³) represents the class v.   Setting x = Î³(0), observe that (x,y) is the 
    cubical convex hull of Î³, and (Î³) = (x,y) is exactly the collection of hyperplanes crossing 
    (x,y). This leads to
    
    
    
    Let vâˆˆ X be a Roller class and let aâˆˆ Q(v).  Then Ïˆ(a)â‰¤ v.  
    
    Let Î³ be a combinatorial geodesic ray representing v, with Î³(0) = x and  Î³(âˆ) = y âˆˆ v. Then  
    the cubical convex hull of Î³, namely (x,y), is also CAT(0) geodesically convex. Since aâˆˆ Q(v) = ğ’¥(x,y) by LemmaÂ <ref>,
    we may choose a CAT(0) geodesic Î±  representing a such that Î±âŠ‚(x,y).  Then (Î±) 
    âŠ‚(Î³) = (x,y).  Thus every hyperplane crossing Î± crosses (x,y) and hence Î³.   
    Hence Ïˆ(a)â‰¤ v.
    
    In DefinitionÂ <ref>, we will define a map Ï† Xâ†’ X with the property that Ï†(v)âˆˆ Q(v) for each Roller 
    class v. This map will be defined by slightly perturbing the circumcenter (v).  In view of LemmaÂ <ref>, we 
    will have Ïˆ(Ï†(v))â‰¤ v.
    
    Let v,wâˆˆ X satisfy wâ‰¤ v.  Then Q(w)âŠ‚ Q(v).
    
    Fix a basepoint x_0âˆˆ X^(0) and let Î³_v,Î³_w be combinatorial geodesic rays emanating from x_0 and 
    representing v,w respectively.  Since wâ‰¤ v, TheoremÂ <ref>.<ref> says that ğ’²(Î³_w)â‰¼(Î³_v).  Without moving x_0, we can replace Î³_w by its image under the gate map to the 
    cubical convex hull of Î³_v, 
    ensuring that ğ’²(Î³_w)âŠ‚(Î³_v).  Hence, setting y_w = Î³_w(âˆ) âˆˆ w and y_v = Î³_v(âˆ) âˆˆ v, the 
    cubical convex hulls of these geodesics satisfy (x_0,y_w)âŠ‚(x_0,y_v).  Taking 
    boundaries and applying LemmaÂ <ref> gives  Q(w)âŠ‚ 
    Q(v).
    
    
     Â§.Â§ Diameter, intrinsic radius, and Tits-convexity of Q(v)
    
    Let v âˆˆ X be a Roller class. Recall that Q(v) is the intersection of the Tits boundaries of the half-spaces corresponding to a representative element of v. We will need the following properties of  Q(v):
    
    
    For any Roller class v, the Tits boundary realization Q(v) has the following properties:
    
      * Q(v) has diameter at most Ï€/2.
         
      * Q(v) is Titsâ€“convex.
         
      * Q(v) is contractible in the Tits metric topology and compact in the visual topology.
         
      * Q(v) has intrinsic radius r_v<Ï€/2. 
         
      * Q(v) âŠ‚BÌƒ_T((v), r_v).
    
     Let v be an arbitrary Roller class and x_0 âˆˆ X^(0) an arbitrary basepoint. Let Î³ be a combinatorial geodesic ray based at x_0 and representing v. Let H= H(x_0,v,Î³) denote the cubical convex hull of Î³. Then, for an arbitrary point y âˆˆ [y] = v, the cubical hull H and the interval (x_0, y) lie within bounded Hausdorff distance of each other.  Thus, by 
    LemmaÂ <ref>, Q(v) is equal to the closed subset H  = (x_0, y) âŠ‚ X.
    
     Diameter: 
    To bound _T(Q(v)), let a,bâˆˆ 
    Q(v).  Represent a,b by CAT(0) rays Î±,Î² with initial point x_0. Note that Î±, Î²âŠ‚ H because H is a convex subcomplex.  Then (Î±),(Î²) 
    are both subsets of (Î³), which is a UBS representing v.  So, ğ’²(Î±)âˆª(Î²) âŠ‚(Î³).  Now, (Î±)âˆª(Î²) is 
    infinite.  Moreover, (Î±)âˆª(Î²) is unidirectional and contains no facing triple, since (Î³) has those properties.  Thus ğ’²(Î±)âˆª(Î²) is a UBS, hence LemmaÂ <ref> 
    implies _T(a,b)â‰¤Ï€/2.
    
    Convexity:  Since H=H(x_0,v,Î³)â†ª X is an isometric embedding in the CAT(0) 
    metric, the 
    inclusion H=Q(v)â†ª X is a Tits-metric isometric embedding.  Indeed, let a,bâˆˆ 
    Q(v) be represented by CAT(0) rays Î±,Î²âŠ‚ H with initial point x_0. Since 
    Q(v) has diameter less than Ï€, we have _T(a,b)=âˆ (a,b) by  
    <cit.>.  
    Since Î±, Î²âŠ‚ H, the angle âˆ _T(a,b) is 
    determined entirely by 
    the set {_X(Î±(t),Î²(t))}_tâ‰¥ 0, by <cit.>).  By convexity of H, this set coincides with 
    {_H(Î±(t),Î²(t))}_tâ‰¥ 0.  Hence the Tits distance from a to b measured in X 
    is the same 
    as the Tits distance measured in H=Q(v).
    
    Now, Q(v) contains a unique geodesic joining a,b.  Since this geodesic realizes 
    the distance from a to 
    b in X, this shows that Q(v) is Tits-convex.
    
    Intrinsic radius:  Since Q(v) is a CAT(1) space of 
    diameter less than Ï€, the intrinsic radius r_v satisfies r_v<diam Q(v), by <cit.>.  Since diam Q(v)â‰¤Ï€/2, we have r_v<Ï€/2, proving 
    assertionÂ <ref>.  
    Now, observe that Q(v) âŠ‚BÌƒ_T((v), r_v) by DefinitionÂ <ref> and TheoremÂ <ref>, provingÂ <ref>.
    
    Topological properties:  Since Q(v) is a uniquely geodesic CAT(1) space, a standard straight-line homotopy allows one to deformation retract Q(v) to 
    a single point. Thus Q(v) is contractible.
    
    Finally, recall from LemmaÂ <ref> (and from earlier in this proof) that Q(v) = (x_0,y) for an arbitrary point  
    y âˆˆ [y] = v.  By LemmaÂ <ref>, the subcomplex (x_0, y) is proper, hence Q(v) is compact in the visual topology.  (The visual topology is defined in <cit.>, where it is called the cone topology.)
    
    
     Â§.Â§ Visibility and perturbing the circumcenter
    
    Recall the (X)â€“equivariant circumcenter map 
     X â†’ X, mentioned in CorollaryÂ <ref>.
    In this subsection, we perturb   to obtain a map Ï† Xâ†’ X with slightly nicer 
    properties.  First, like , the map Ï† will have the property that Ï†(v)âˆˆ Q(v) for each Roller class 
    v, and hence Ïˆ(Ï†(v))â‰¤ v.  Compare RemarkÂ <ref>.
    
    We will define Ï† so that Roller classes v for which Ïˆ(Ï†(v))=v are exactly those for which there is some 
    CAT(0) geodesic ray representing v. (Note that a combinatorial geodesic exists for every v, but a CAT(0) geodesic is not guaranteed.) Later, we will work with only such Roller classes, which we term 
    â„“^2â€“visible; see DefinitionÂ <ref>. 
    See also LemmaÂ <ref> for several equivalent characterizations of visibility. While the map Ï† is not guaranteed to be equivariant, the set of â„“^2â€“visible Roller classes 
    will still be invariant.
    
    The following example illustrates the point that (v) can lie in Q(w)âŠŠ Q(v) for some w<v. 
    
    
    Consider the cone of â„^3 cut out by the planes z=0, z=y, and z=x, and let X be the union of all cubes (in the standard cubical tiling of â„^3) contained in this cone. Then X has four classes, described in coordinates as u=[(âˆ, 0, 0)], u'=[(0, âˆ, 0)], w = [(âˆ, âˆ, 0)], and v = [(âˆ, âˆ, âˆ)], all of which are represented by â„“^2 geodesic rays. Furthermore, Q(v) = Q(âˆ, âˆ, âˆ) =  X is isometric to an isosceles triangle of S^2 whose base has length Ï€/2 and whose height is arctan(1/âˆš(2)). The base of the triangle is Q(w) = Q(âˆ, âˆ, 0).
    See Figure <ref>.
    
    
    
    
    First, observe that (w) is the midpoint of the geodesic segment Q(w). Next, we claim that (v) = (w). To see this, let Î² be the altitude from (w) to the the apex of Q(v). Because Q(v) has a reflective symmetry in Î², its circumcenter must be contained in Î². In addition, since len(Î²) = arctan(1/âˆš(2)) < Ï€/4, any point b âˆˆÎ² must have distance less than Ï€/4 to the apex but distance at least Ï€/4 to the two endpoints of Q(w). Thus (w) = (v) even though w<v and Q(w)âŠŠ Q(v).
    
    
    The
    phenomenon of ExampleÂ <ref> will be inconvenient later. To remedy this problem, we will define 
    Ï†(v) by perturbing (v) slightly, to get a point in the interior of Q(v) that retains the property that 
    all of Q(v) is contained in the r_vâ€“neighborhood of Ï†(v) for some r_v<Ï€/2.  (This latter property will 
    also be necessary later.)
    
    To achieve this, we need some preliminary discussion and lemmas.  
    
    
    
    For every Roller class v,  there is a unique Roller class M_v âˆˆÏˆ(Q(v)) that is maximal among all Roller classes in Ïˆ(Q(v)). Furthermore Q(M_v)=Q(v).
    
    If wâˆˆÏˆ(Q(v)), then w=Ïˆ(a) for some aâˆˆ Q(v), so wâ‰¤ v by LemmaÂ <ref>.  
    Since there is a bound on the length of â‰¤â€“chains, it follows that Ïˆ(Q(v)) contains â‰¤â€“maximal elements.
    
    Suppose that m,m'âˆˆÏˆ(Q(v)) are â‰¤â€“maximal.  Let a,a'âˆˆ Q(v) be such that 
    Ïˆ(a)=m and Ïˆ(a')=m'.  Let Î±,Î±' be CAT(0) geodesic rays in X representing a,a' 
    respectively, chosen so that Î±(0)=Î±'(0). Then _m âˆ¼(Î±) and _m'âˆ¼(Î±'). 
     Since m,m'â‰¤ v, TheoremÂ <ref> gives
     ğ’²(Î±) â‰¼_v and (Î±') â‰¼_v, hence
    W(Î±)âˆª(Î±') is commensurate with a UBS by LemmaÂ <ref>. Thus, by PropositionÂ <ref>, there exists 
    a CAT(0) geodesic ray Î² with (Î²)  = (Î±)âˆªğ’²(Î±').  By construction, 
    
        m â‰¤Ïˆ(Î²(âˆ))â‰¤ v,      m' â‰¤Ïˆ(Î²(âˆ))â‰¤ v
    
     where the first inequality for m or m' is strict if 
    mâ‰  m'. So, Î²(âˆ)âˆˆ Q(v) by LemmaÂ <ref> and the second inequality.  Hence the 
    first inequality contradicts the maximality of m,m' in Ïˆ(Q(v)), unless m=m'.  This proves 
    the uniqueness of a maximal element M_v.
    
    Next, M_vâ‰¤ v, so Q(M_v)âŠ‚ Q(v) by LemmaÂ <ref>.  On the other hand, if aâˆˆ 
    Q(v), then Ïˆ(a)âˆˆÏˆ(Q(v)), so Ïˆ(a)â‰¤ M_v.  Hence aâˆˆ Q(Ïˆ(a))âŠ‚ Q(M_v) by 
    LemmaÂ <ref>. Thus Q(v)âŠ‚ Q(M_v), and we conclude  that Q(v) = Q(M_v).
    
    
    For a Roller class v, define Q_0(v) = Q(v) âˆ–â‹ƒ_u < M_v Q(u).
    
    
    
    Let v,w be Roller classes, and let a âˆˆ Q(v). Then a âˆˆ Q_0(v) if and only if Ïˆ(a)= M_v.
    
    Furthermore, if Q(v) = Q(w), then M_v=M_w and Q_0(v)=Q_0(w).
    
    First, suppose  that a âˆˆ Q_0(v). Then Ïˆ(a) â‰¤ M_v by the definition of M_v. If Ïˆ(a) = u < M_v, then a âˆˆ Q(u), contradicting the definition of Q_0(v). Thus Ïˆ(a) = M_v, as desired.
    
    Conversely, suppose that Ïˆ(a)=M_v.  If aâˆˆ Q(u) for some u<M_v, then 
    Ïˆ(a)â‰¤ u by LemmaÂ <ref>, so Ïˆ(a)<M_v, a contradiction.  Hence aâˆˆ Q_0(v). 
    
    
    Finally, suppose Q(v) = Q(w). Then LemmaÂ <ref> says that M_v = M_w is the unique maximal element of Ïˆ(Q(v)) = Ïˆ(Q(w)).
    Thus, by the above equivalence, Q_0(v)=Q_0(w).
    
    Let v be a Roller class. Then  Q_0(v) contains points arbitrarily close to (v) in the Tits metric. 
    
    By LemmaÂ <ref>, there is a point a âˆˆ Q(v)  such that Ïˆ(a) = M_v.
    By LemmaÂ <ref>, we have a âˆˆ Q_0(v).
    Let g be the geodesic in X from a to 
    b = (v).  By PropositionÂ <ref>.(<ref>), g lies in Q(v).
     For any Ïµ>0, choose c âˆˆ g so that 0 < _T(c,(v))<Ïµ.  We will show c âˆˆ Q_0(v).
     
    By PropositionÂ <ref>, the Tits points a,b,c are represented by CAT(0) geodesic rays Î±, Î², Î³ such that (Î³) = (Î±) âˆª(Î²) âŠƒ(Î±). Thus, by LemmaÂ <ref>, we have Ïˆ(c) = Y_(Î³)âŠ‚ Y_(Î±) = Ïˆ(a).
    By LemmaÂ <ref>, we have Ïˆ(c) â‰¥Ïˆ(a) = M_v, hence Ïˆ(c) = M_v by the maximality of M_v.
    Therefore, c âˆˆ Q_0(v) by LemmaÂ <ref>.
    
    Let v be a Roller class, and fix Q = Q(v). Let r<Ï€/2 be the intrinsic radius of Q. Using LemmaÂ <ref>, choose p_Qâˆˆ 
    Q_0(v) such that d_T(p_Q,(v))â‰¤Ï€/4 -r/2. We call p_Q the pseudocenter of Q, and denote it Ï†(v).
    
    Using LemmaÂ <ref>, we ensure that Ï†(v) = Ï†(w) = p_Q for every Roller class w such that Q(w) = Q(v) = Q.
    
    
    In the following proposition we collect the facts about the pseudocenter map 
    Ï† that will be needed later, in conjunction with LemmaÂ <ref> and the definition of 
    Ï†.
    
    
         The pseudocenter map Ï† has the following properties.  Let vâˆˆ X.  Then:
         
      * Ï†(v)âˆˆ Q(v).
      * Ïˆ(Ï†(v))â‰¤ v.
      * Q(v)=Q(Ïˆ(Ï†(v))).
      *  If Q(w)=Q(v), then Ï†(w)=Ï†(v). 
         AssertionÂ <ref> holds by construction, and, together with LemmaÂ <ref>, implies 
    assertionÂ <ref>.  Since Ï†(v)âˆˆ Q_0(v), we have Ïˆ(Ï†(v))=M_v by LemmaÂ <ref>, and Q(v)=Q(M_v) by 
    LemmaÂ <ref>, yielding assertionÂ <ref>.  AssertionÂ <ref> follows from the 
    definition of Ï† and LemmaÂ <ref>.
    
    
    We can now define (â„“^2)â€“visible Roller classes:
    
    
    Let vâˆˆ X.  Then v is â„“^2â€“visible if vâˆˆÏˆ( X). Let 
    (X) = Ïˆ( X) denote the set of visible Roller classes. Observe that (X) stabilizes (X), because the map Ïˆ is (X)â€“equivariant.
    
    Let vâˆˆ X. Then the following are equivalent:
    
      * v is â„“^2â€“visible.
    
      *  There exists a CAT(0) geodesic ray Î± such that (Î±) represents v.
    
      * v = M_v.
    
      * v = Ïˆ(Ï†(v)).
    
    To begin with, we have <ref>â‡”<ref> by LemmaÂ <ref>.
    
    For <ref>â‡’<ref>,  let Î± be a CAT(0) geodesic ray such that ğ’²(Î±) represents v. Let a = Î±(âˆ) âˆˆ X. 
    
    Then, by LemmaÂ <ref>, we have Ïˆ(a) = v.  Now, recall from LemmaÂ <ref> that M_v is 
    maximal among all Roller classes in Ïˆ(Q(v)). By 
    LemmaÂ <ref>, every class w âˆˆÏˆ(Q(v)) satisfies w â‰¤ v, hence M_v â‰¤ v.  On the other hand, v = 
    Ïˆ(a) âˆˆÏˆ(Q(v)), hence v â‰¤ M_v by the maximality of M_v. Thus v = M_v.
    
    For <ref>â‡’<ref>, suppose v = M_v.  By DefinitionÂ <ref>, we have 
    Ï†(v) âˆˆ Q_0(v). Thus, by LemmaÂ <ref>, we have Ïˆ(Ï†(v)) = M_v = v.
    
    For <ref>â‡’<ref>, suppose v = Ïˆ(Ï†(v)). 
    Then Ï†(v) âˆˆ Q_0(v) âŠ‚ Q(v). 
    Choose a CAT(0) geodesic ray Î± representing Ï†(v).   The associated UBS (Î±) represents the 
    class Ïˆ(Ï†(v)) = v.
    
    Let vâˆˆ X be a â‰¤â€“minimal Roller class.  Then v is â„“^2â€“visible.
    
    LemmaÂ <ref> gives vâ‰¥Ïˆ(Ï†(v)).  By 
    minimality of v, we thus have v=Ïˆ(Ï†(v)).
    
    
     Â§.Â§ Cuboid generalization
    
    Here, we explain how to generalize the results of this section to a cuboid metric d_X^Ï. A reader who is only interested in cube complexes with the standard â„“^1 and â„“^2 metrics is invited to skip ahead to SectionÂ <ref>. 
    
    For the duration of this subsection, fix a Gâ€“admissible hyperplane rescaling Ï (DefinitionÂ <ref>) and the resulting cuboid metric d_X^Ï. Recall that the cuboid Tits boundary ^Ï X = (X, d_X^Ï) was defined in DefinitionÂ <ref>. All of the constructions and results involving ^Ï X will be invariant under the restricted automorphism group (X^Ï) of DefinitionÂ <ref>.
    
    To start, we can define a map Ïˆ^Ï^Ï X â†’ X exactly as in DefinitionÂ <ref>. Generalizing LemmaÂ <ref>, we can characterize Ïˆ^Ï(a) = Ïˆ^Ï([Î±]) as the principal class of the umbra of a UBS representing a ray Î±:
    
        Ïˆ^Ï(a) = Ïˆ^Ï([Î±]) = Y_(Î±).
    
    This characterization holds because the proof of LemmaÂ <ref> works for Ïˆ^Ï: its proof combines previous lemmas and combinatorial properties of hyperplane sets. 
    
    Now, consider a point y âˆˆ X. Since (X, d_X^Ï) is a CAT(0) space and the collection of half-spaces _y^+ is a filtering family, we can define the Tits boundary realization Q^Ï(y) exactly as in DefinitionÂ <ref>. Following LemmaÂ <ref>, whose proof extends to cuboids because cubical half-spaces are convex in d_X^Ï, we learn that the boundary realization Q^Ï(y) is also the boundary of a cubical interval, and depends only on the Roller class v = [y]. Thus we may define a Tits-convex set  Q^Ï(v) and its circumcenter Ï‡^Ï(v), as in DefinitionÂ <ref>. Following CorollaryÂ <ref>, both  Q^Ï(v) and Ï‡^Ï(v) are invariant under the restricted automorphism group  (X^Ï).
    
    The partial order properties of the Tits boundary realization Q(v) that are proved in LemmasÂ <ref> and Â <ref> still hold for Q^Ï(v), because the proofs of those results are essentially combinatorial.
    The features of Q(v) described in  PropositionÂ <ref> also hold for Q^Ï(v), because the proof of the Proposition uses prior results and the convexity of the cubical convex hull of a geodesic ray.
    
    
    Next, SectionÂ <ref> contains several results about perturbing the circumcenter (v) âˆˆ Q(v) to a pseudocenter Ï†(v). The definition of the pseudocenter Ï†(v) is enabled by LemmasÂ <ref>, <ref>, andÂ <ref>. All of these lemmas generalize immediately to the cuboid setting, because their proofs are essentially a top-level assembly of prior results. Thus we may generalize DefinitionÂ <ref> to define a pseudocenter Ï†^Ï(v) âˆˆ Q^Ï(v). This pseudocenter Ï†^Ï(v) has all of the properties described in PropositionÂ <ref>, because the proof of that proposition merely assembles previously established results.
    
    Finally, DefinitionÂ <ref> generalizes immediately to define ^Ï(X) = Ïˆ^Ï (^Ï X), the set of Roller classes that are visible after the rescaling Ï. Since Ïˆ^Ï is ^Ï(X)â€“equivariant, the set ^Ï(X) is ^Ï(X)â€“equivariant as well. LemmasÂ <ref> andÂ <ref> generalize immediately to the cuboid setting, because their proofs are top-level assemblies of previous lemmas.
    
    
    
    In DefinitionÂ <ref>, the set (X) = Ïˆ( X) is defined in terms of the CAT(0) metric on X.  When 
    we change the metric on X using a Gâ€“admissible rescaling Ï, there is no a priori reason to expect (X) 
    = Ïˆ( X) to coincide with ^Ï(X) = Ïˆ^Ï (^Ï X).  Instead, our whole argument simply goes 
    through for whichever of (X) or ^Ï(X) we are considering.
    
    In fact, it turns out that (X)=^Ï(X). Since we do not use this fact in any proofs, we only sketch a proof.  Let vâˆˆ(X) 
    be a visible Roller class, and let Î±:[0,âˆ)â†’ X be a CAT(0) geodesic ray for the metric _X with ğ’²(Î±) representing v.  We will produce a geodesic ray Î² for the CAT(0) metric _X^Ï, satisfying 
    ğ’²(Î±)=ğ’²(Î²), from which it follows that vâˆˆ^Ï(X).  This shows 
    (X)âŠ†^Ï(X), and a symmetric argument gives the reverse inclusion.
    
    Since cubical convexity of subcomplexes is independent of which CAT(0) metric we consider, we assume for convenience that 
    X is the cubical convex hull of Î±, i.e. ğ’²(Î±)=ğ’²(X).
    
    First, use LemmaÂ <ref> to produce chains {Ä¥_n^1}_n,â‹¯,{Ä¥^k_n}_n of dominant 
    hyperplanes such that there exists a constant Câ‰¥ 0 with the property that, for all jâ‰¤ k, any subpath of Î± 
    of length at least C crosses Ä¥^j_n for some n.  The lemma allows us to choose these to be dominant hyperplanes in 
    the UBS ğ’²(Î±); therefore, if we construct a _X^Ïâ€“geodesic Î² that crosses each h_n^j, then 
    by LemmaÂ <ref>, we get ğ’²(Î±)=ğ’²(Î²).
    
    By admissibility of the rescaling, there exists mâ‰¥ 1 such that the identity map (X,_X)â†’(X,_X^Ï) is 
    mâ€“bilipschitz.  Since X is the convex hull of Î± and contains no facing triples, LemmaÂ <ref> guarantees properness of 
    (X,_X) and implies properness of (X,_X^Ï).  Thus, letting Î²_t 
    be the _X^Ïâ€“geodesic from Î±(0) to Î±(t), and letting t tend to infinity, the Î²_t subconverge 
    uniformly on compact sets to a _X^Ïâ€“geodesic Î² with Î²(0)=Î±(0).
    
    Fix jâ‰¤ k.  Now, for any t, the hyperplanes crossing Î²_t are exactly those crossing Î±([0,t]).  Indeed, 
    any hyperplane separating Î±(0),Î±(t) crosses Î²_t, and any hyperplane crossing Î²_t does so in a single 
    point (and hence separates Î±(0),Î±(t)), since Î²_t is a _X^Ïâ€“geodesic.  In particular, 
    Î±([0,t]) crosses h_1^j,â€¦,h_N_t^j, where N_t=âŒŠ t/CâŒ‹.  Hence Î²_t crosses the same 
    hyperplanes while having _X^Ïâ€“length at most mt.  From this one deduces the following: there exists L such 
    that for all n, and all sufficiently large t, the path Î²_t crosses h^1_1,â€¦,h^1_n and intersects each of 
    those carriers in a subpath of length at most L.  In other words, there is a uniform bound on how long each Î²_t can 
    fellow-travel any of the Ä¥_n^j, whence Î² cannot be parallel to a ray in any Ä¥^n_j.  This implies that 
    Î² must cross Ä¥^j_n for all j,n, and hence, as explained above, ğ’²(Î²)=ğ’²(Î±) and 
    vâˆˆ^Ï(X).
    
    Looking ahead to DefinitionÂ <ref>,  the above argument also shows that (X) = ^Ï(X) for any 
    admissible rescaling Ï. In the next section, we will heavily use (X) to construct open and closed coverings of 
    X, so that the nerves of those coverings can be used to prove homotopy equivalence. In an analogous fashion, we will 
    use ^Ï(X) to construct open and closed coverings of ^Ï X.   One can then apply LemmaÂ <ref> 
    and LemmaÂ <ref> to show that the nerves of the coverings of X coincide with the nerves of the 
    corresponding coverings of ^Ï X, and one can use LemmaÂ <ref> to see that the covering of 
    X coming from visible Roller classes of X coincides with the corresponding covering constructed using 
    visible classes of X^Ï.  However, as we mentioned, the cuboid version of our argument does not rely on this; one 
    instead just substitutes ^Ï(X) for (X) everywhere, and runs all the arguments.     
    
    
    Â§ OPEN AND CLOSED COVERINGS OF X
    
    In this section, we study the closed covering of X by the sets Q(v) corresponding to maximal  â„“^2â€“visible Roller classes (see DefinitionÂ <ref>). Our goal, achieved in TheoremÂ <ref>, is to show that X is homotopy equivalent to the nerve _T of this cover.
    
    
    Let (X) denote the set of Roller classes v such that:
    
      * v is â„“^2â€“visible;
         
      *  if w is visible and vâ‰¤ w, then w=v.
    
    
    The plan for this section is as follows. We will first show that {Q(v):vâˆˆ(X)} is a closed covering of X.  Then, we will thicken each closed set Q(v) to an open set U(v), in 
    such a way that the intersection pattern of the open cover {U(v) :vâˆˆ(X) } is the same as that of the closed cover {Q(v):vâˆˆ(X)}.  Then we will apply the Nerve Theorem to 
    conclude that X is homotopy equivalent to the nerves of these covers.
    
    The main result of this section is TheoremÂ <ref>. SectionÂ <ref> is about the initial closed covering.  SectionÂ <ref> describes the thickening procedure. SectionÂ <ref> describes how to generalize these results to a cuboid metric d_X^Ï.
    
    
    
    
     Â§.Â§ The closed covering
    
    The maximal visible Tits boundary realizations Q(v) provide a closed covering of the Tits boundary. We use this covering to define a nerve, as follows.
    
    
    Let ğ’©_T be the simplicial complex with vertex set  (X), where vertices v_0,â€¦,v_nâˆˆ(X) span an nâ€“simplex if and only if â‹‚_i=0^nQ(v_i)â‰ âˆ….
    
    Let vâˆˆ X.  Then  there exists wâˆˆ(X) with Ï†(v)âˆˆ Q(w).  
    Hence 
    {Q(v):vâˆˆ(X)} covers X.
    
    Note that Ïˆ( Ï†(v)) âˆˆ(X), by DefinitionÂ <ref>.
    Hence there exists wâˆˆ(X) such that ÏˆÏ†(v) â‰¤ w.  
    
    By LemmaÂ <ref>, Ï†(v) âˆˆ Q(ÏˆÏ†(v))âŠ‚ Q(w).
    
    Now, given a point aâˆˆ X, we can apply the above argument to v=Ïˆ(a).  Then, for some wâˆˆ(X), LemmaÂ <ref> implies
    
        aâˆˆ Q(Ïˆ(a))=Q(ÏˆÏ†Ïˆ(a))  âŠ‚ Q(w) .
    
    Hence {Q(v):vâˆˆ(X)} covers 
    X.
    
    Let v,wâˆˆ(X).  Then Q(v)=Q(w) if and only if v=w. In particular, the assignment v â†¦ Q(v) gives a bijection from (X) to its image.
    
    Suppose Q(v) = Q(w). Then PropositionÂ <ref>.<ref> implies Ï†(v)=Ï†(w). By visibility and LemmaÂ <ref>, we have ÏˆÏ†(v)=v and ÏˆÏ†(w)=w, hence v=w.
    
    
    Now, LemmasÂ <ref> andÂ <ref> combine to yield:
    
    ğ’©_T is the nerve of the covering of X by the collection of closed sets {Q(v):vâˆˆ(X)}.
    
    
     Â§.Â§ The open covering
    
    The goal of this subsection is to thicken up the closed sets Q(v) for v âˆˆ(X) to be open sets U(v), such that the 
    intersection pattern of the U(v) is the same as that of the Q(v). This is needed since the Nerve 
    TheoremÂ <ref> works for open covers only.
    
    
    
    Let v,wâˆˆ(X) be points such that Q(v)âˆ© Q(w)=âˆ…. Then
     _T(Q(v),Q(w))> Ïµ_0, where Ïµ_0 > 0 is a constant depending only on X.
     
    Let aâˆˆ Q(v) and bâˆˆ Q(w).  By definition, aâˆˆ Q(Ïˆ(a)).  Since 
    vâ‰¥Ïˆ(a), we have Q(Ïˆ(a))âŠ‚ Q(v) and 
    similarly Q(Ïˆ(b))âŠ‚ Q(w), by LemmaÂ <ref>. Since we have assumed Q(v)âˆ© Q(w)=âˆ…, it follows that  Q(Ïˆ(a))âˆ© 
    Q(Ïˆ(b))=âˆ….
    
    Choose CAT(0) geodesic rays Î±,Î² such that 
    Î±(0)=Î²(0) âˆˆ X^(0) and Î±(âˆ)=a, Î²(âˆ)=b.
    
    Since X is finite-dimensional, LemmaÂ <ref> provides  â„“^1 geodesic rays 
    Î±Ì…, Î²Ì… with common basepoint Î±(0)=Î²(0), that lie at 
    uniformly bounded  Hausdorff distance from Î±,Î² respectively.
    Note that 
    (Î±) âˆ¼(Î±Ì…) and (Î²) âˆ¼(Î²Ì…).
    
    We claim that (Î±Ì…)âˆ©ğ’²(Î²Ì…) is finite. Suppose not. By LemmaÂ <ref>, Q(Ïˆ(a)) = _Î±Ì…, where _Î±Ì… = (Î±Ì…(0), Î±Ì…(âˆ))  is the cubical convex hull of Î±Ì…. Similarly, 
    Q(Ïˆ(b)) = _Î²Ì….
    
    Since C=_Î±Ì…âˆ©_Î²Ì…â‰ âˆ…, we have
    (C) = (Î±Ì…)âˆ©(Î²Ì…) by LemmaÂ <ref>.<ref>.
    Now _Î±Ì… is a proper CAT(0) space, by LemmaÂ <ref>. Thus C is also a proper CAT(0) space, hence |(C)| = âˆ implies C is unbounded and 
    C is a nonempty subspace of Q(Ïˆ(a)).  Similarly, C is a nonempty subspace of Q(Ïˆ(b)).  Thus C  âŠ‚ Q(Ïˆ(a)) âˆ© Q(Ïˆ(b)) = âˆ…, a contradiction. This proves the claim.
    
    Since (Î±) âˆ¼(Î±Ì…) and (Î²) âˆ¼(Î²Ì…), we may define
     N = |(Î±) âˆ©(Î²)| < âˆ. Recall that Î±(0) = Î²(0).
    Then, for all t â‰¥ 0, we have
    
        | ( Î±(t) , Î²(t) ) | â‰¥ | ( Î±(t) , Î±(0))| + |(Î²(0), Î²(t) ) | - 2N.
    
    Applying LemmaÂ <ref> to both sides gives
    
        Î»_0 Â· d_X(Î±(t), Î²(t) )+ Î»_1 â‰¥(  t/Î»_0 - Î»_1 ) + (  t/Î»_0 - Î»_1 ) - 2N = 2t/Î»_0 - 2(N + Î»_1).
    
    Here, Î»_0 â‰¥ 1 and Î»_1 are constants depending only on X. Taking limits gives 
        lim_tâ†’âˆ_X(Î±(t),Î²(t))/2tâ‰¥1/Î»_0^2.
      
    
    ByÂ <cit.>, we thus have  sin(âˆ _T(a,b)/2)â‰¥1/Î»_0^2.  Now,
    
        _T(a,b) â‰¥âˆ _T(a,b)  â‰¥sin^-1(1/Î»_0^2) >1/Î»_0^2.
      
    Setting  Ïµ_0 = 1/Î»_0^2  completes the proof.
    
    
    In the next lemma, we show that, given a collection of Roller classes, the intersection of the associated Tits boundary realizations 
    coincides with the Tits boundary of the intersection of the convex hulls of the corresponding CAT(0) geodesic rays.
    
    
    Let v_1, â€¦, v_k âˆˆ(X) be Roller classes. Then there exist convex subcomplexes 
     _1, â€¦, _k âŠ‚ X such that the following holds. Each _i is the cubical convex hull 
    of a CAT(0) geodesic ray Î³_i, with a common basepoint.
     Furthermore,
    for every subset J âŠ‚{1, â€¦, k}, we have â‹‚_i âˆˆ J Q(v_i) = (â‹‚_iâˆˆ 
    J_i).
    
    Fix a basepoint xâˆˆ X^(0).  For 1â‰¤ iâ‰¤ k, let _v_i Xâ†’ v_i be the gate map of PropositionÂ <ref>, and let y_i= _v_i (x). 
    Let _i=(x,y_i) be the 
    convex subcomplex of X determined by the vertex 
    interval between x and y_i as in DefinitionÂ <ref>. Then (_i) = (x, y_i) = (x,v_i), where the last equality holds by PropositionÂ <ref>.
     By LemmaÂ <ref>, Q(v_i)=_i.
    
    For each i, let Î³_i be a CAT(0) geodesic ray that emanates from x and represents 
    Ï†(v_i). 
    We want to show that _i = (Î³_i), the cubical convex hull of Î³_i.
    
    First, we claim that (Î³_i) âŠ‚_i. Since _i is convex in the CAT(0) metric d_X, it contains a CAT(0) geodesic from every point in the interior to every point on the boundary. In particular, it contains the unique CAT(0) geodesic Î³_i from Î³_i(0) = xâˆˆ_i to 
    Î³_i (âˆ)  âˆˆ Q(v_i) = _i. Thus Î³_i âŠ‚_i. Since _i is cubically convex, it follows that (Î³_i) âŠ‚_i.
    
    
    Next, we claim that _i âŠ‚(Î³_i), or equivalently (_i) âŠ‚(Î³_i).  Since Î³_i(0)=x âˆˆ_i, any hyperplane Ä¥âˆˆ(ğ’¥_i) âˆ–ğ’²(Î³_i) would separate the entire ray Î³_i from 
    the entire class v_i, contradicting that Ïˆ(Î³_i(âˆ))=Ïˆ(Ï†(v_i))=v_i, where the second equality  holds by visibility and LemmaÂ <ref>.  Hence (_i) âŠ‚(Î³_i), 
    and we conclude that _i = (Î³_i).
    
    Finally, consider an arbitrary subset  J âŠ‚{1, â€¦, k}. The inclusion (â‹‚_iâˆˆ 
    J_i) âŠ‚â‹‚_iâˆˆ IQ(v_i) is immediate. For the other inclusion, 
    let 
    b âˆˆâ‹‚_iâˆˆ JQ(v_i). Then each convex set _i contains the unique CAT(0) ray Î² starting at 
    x and ending at b.
    Thus Î²âŠ‚â‹‚_iâˆˆ J_i, hence b âˆˆ(â‹‚_iâˆˆ 
    J_i).
    
    The following related statement about â„“^1 geodesics can be proved by an easier analogue of the proof of LemmaÂ <ref>.
    
    Let v_1, â€¦, v_k be arbitrary Roller classes. Then there exist convex subcomplexes  _1, â€¦, ğ’¥_k (defined in exactly the same way, namely  _i=(x,  _v_i (x)) such that each  (_i) is a UBS representing 
    v_i. Furthermore, each _i is the cubical 
    convex hull of a combinatorial geodesic, with a common basepoint. The intersection â‹‚_i _i itself has the 
    property that ( â‹‚_i _i) = â‹‚_i ( _i). In particular, if 
    ( â‹‚_i _i) is infinite, then it is an â„“^1â€“visible UBS.
    
    
    The next lemma is crucial.  We will later replace the closed covering of X by Tits boundary realizations with an open covering, by 
    slightly thickening each Tits realization.  The lemma says, roughly, that for a collection of Tits boundary realizations corresponding to a 
    simplex in the nerve of the closed covering, any point in the intersection of small Ïµâ€“neighborhoods of the Tits boundary realizations is still in 
    a f(Ïµ)â€“neighborhood of the intersection of the Tits boundary realizations.
    
    
    There exists a constant Ïµ_1>0, depending on (X), and a function f  (0,Ïµ_1)â†’(0,Ï€/2) such that lim_Ïµâ†’ 0 f(Ïµ) = 0 and 
    such that the following holds.  Fix Ïµâˆˆ(0,Ïµ_1) and let v_0,â€¦,v_kâˆˆ(X) satisfy 
    â‹‚_i=0^kQ(v_i)â‰ âˆ….  For every aâˆˆ X such that _T(a,Q(v_i)) â‰¤Ïµ for all 
    i, there is a point b âˆˆâ‹‚_i=0^kQ(v_i) such that
    _T(a, b) â‰¤ f(Ïµ).
    
    We begin by defining the constant Ïµ_1 and the function f  (0,Ïµ_1)â†’(0,Ï€/2). Let 
    Î»_0, Î»_1 be the constants of LemmaÂ <ref>, which depend only on (X). Define K = 4 Î»_0^2  (X). Then, we set 
    
        Ïµ_1 = 4/5K,     
        f(Ïµ)  = cos^-1(1 - K Ïµ) â‰¤cos^-1 (15) < Ï€2.
    
    The bound f(Ïµ) â‰¤cos^-1(1/5) holds because K Ïµ < K Ïµ_1 = 4/5. The property lim_Ïµâ†’ 0 f(Ïµ) = 0 is now immediate.
    
    Plan of the proof.
    Let v_0,â€¦,v_kâˆˆ(X) be Roller classes such that 
    â‹‚_i=0^kQ(v_i)â‰ âˆ….
    By LemmaÂ <ref>, there exist convex subcomplexes _0,â€¦,_k such that â‹‚_i = 0^k Q(v_i)=(â‹‚_i= 0^k _i). Choose  a basepoint x âˆˆâ‹‚_i= 0^k _i. 
    
    Fix Ïµ < Ïµ_1, and let aâˆˆ X be a point such that _T(a,Q(v_i)) â‰¤Ïµ for all i. Let Î±[0,âˆ)â†’ X be a CAT(0) geodesic ray, such that Î±(0) = x and Î±(âˆ) = a. To prove the lemma, we will find a point bâˆˆâ‹‚_i=0^kQ(v_i) such that d_T(a, b) â‰¤  f(Ïµ).
    
    We locate the point b using gate projections. Let X â†’â‹‚_i=1^k _i be the gate map.
     For t â‰¥ 0, let x_t = (Î±(t)). Since â‹‚_i=0^k_i is a finite-dimensional CAT(0) 
    cube complex with no facing triple of hyperplanes, it is  proper by 
    LemmaÂ <ref>. We will check that the sequence {x_t}_tâˆˆ is unbounded.
      Thus the segments joining x_0 to the elements of {x_t}_tâˆˆ 
    subconverge uniformly on compact sets to a CAT(0) geodesic ray representing some point bâˆˆâ‹‚_i=0^k Q(v_i).
    
    To prove that d_T(a, b) â‰¤ f(Ïµ), we will estimate the Alexandrov angle at x = Î±(0) between Î±(t) and x_t. In order to do this, we will control the number of hyperplanes that separate Î±(t) from â‹‚_i=0^k _i. 
    
    Main hyperplane estimate. For each t â‰¥ 0, let (t) be the set of hyperplanes that separate Î±(t) from 
    â‹‚_i=0^k_i. We will prove the following double-sided estimate for all large t:
    
        1/Î»_0_X(Î±(t),x_t) - Î»_1 â‰¤| (t)|â‰¤(X)  (Î»_0 Â· 2 t Ïµ + Î»_1) + D,
    
    where D is a constant independent of t.
    
    The lower bound of (<ref>) is straightforward.  By LemmaÂ <ref>, the gate map Xâ†’â‹‚_i = 0^k _i  is characterized by the property that a 
    hyperplane Ä¥ separates 
        Î±(t) from x_t = (Î±(t)) if and only if Ä¥ separates Î±(t) from â‹‚_i=0^k_i.  
       In other words, (t) = (Î±(t), x_t).
         Hence LemmaÂ <ref> gives
    
        1/Î»_0 d_X(Î±(t),x_t) - Î»_1 â‰¤ |(t)| ,
    
    as desired. By contrast, the upper bound requires some hyperplane combinatorics.
    
    
    Hyperplane sets. 
    For each i, let â„¬_i(t) be the set of hyperplanes that separate Î±(t) 
    from _i.  Note that (t)âŠƒâ‹ƒ_i=0^kâ„¬_i(t). We claim that (t)=â‹ƒ_i=0^kâ„¬_i(t).
    
    Suppose that Ä¥âˆˆ(t) âˆ–â‹ƒ_i=0^kâ„¬_i(t).  Then Ä¥ crosses each _i, so by a standard cubical 
    convexity argument, Ä¥ crosses â‹‚_i=0^k_i and hence cannot separate any point from â‹‚_i=0^k_i.  This is 
    a contradiction, and thus (t)=â‹ƒ_i=0^kâ„¬_i(t). 
    
    Let ğ’œ_0(t)=â„¬_0(t). For i â‰¥ 1, let ğ’œ_i(t)=â„¬_i(t) âˆ–â‹ƒ_j < iğ’œ_j(t).  Then the 
    sets ğ’œ_0(t),â€¦,ğ’œ_k(t) are pairwise disjoint, and their union is (t).  For each i, let ğ’œ_i = â‹ƒ_t â‰¥ 0ğ’œ_i(t).
    Observe that every ğ’œ_i is inseparable, by definition. 
    Furthermore, ğ’œ_i is unidirectional. Indeed, ğ’œ_i âŠ‚â„¬_i =  â‹ƒ_t â‰¥ 0â„¬_i(t), and â„¬_i separates _i from the tail of the ray 
    Î±. Unidirectionality passes to subsets, hence ğ’œ_i is unidirectional.
     Consequently ğ’œ_i is either finite or a UBS.
    
    
    
    
    Let JâŠ‚{0,â€¦,k} be the set of i such that ğ’œ_i is a UBS. Observe that ğ’œ_i  âˆ©ğ’œ_j = âˆ… for i â‰  j and _i âˆˆ Jğ’œ_i âŠ‚(Î±), which is itself a UBS. Thus, by LemmaÂ <ref>, we have |J| â‰¤(X).
     We define D = âˆ‘_i âˆ‰ J | ğ’œ_i |. 
    
    The upper bound of (<ref>). 
    Next, we will use the decomposition (t) = _i=1^k ğ’œ_i(t) to prove the upper bound  of (<ref>).
    
    For each i âˆˆ{0, â€¦, k}, let Î¾_i be a ray in _i issuing from x = Î±(0), such that Î¾_i(âˆ) is a closest point in 
    Q(v_i) = _i to a.  
    Now, for all i and all t, any hyperplane Ä¥âˆˆğ’œ_i(t) separates Î±(t) from _i and hence separates Î±(t) from 
    Î¾_i(t).  Thus LemmaÂ <ref> gives
    
        |ğ’œ_i(t)| â‰¤ |(Î±(t),Î¾_i(t))| â‰¤Î»_0 Â· d_X (Î±(t), Î¾_i(t)) + Î»_1.
     
    
    Now, by <cit.>, for any Î´>0 there exists t_0 such that for all t>t_0, 
    we have _X(Î±(t),Î¾_i(t))â‰¤ t(2sinÏµ/2+Î´).  Since Ïµ is independent of t, it follows that 
    for all sufficiently large t,  we have 
    
        _X(Î±(t),Î¾_i(t))â‰¤ 4tsinÏµ2 < 2 t Ïµ.
      
    
    
    Summing |ğ’œ_i(t)| over all i  gives
    
        | (t) |    = âˆ‘_iâˆˆ J|ğ’œ_i(t)| + âˆ‘_iâˆ‰ J|ğ’œ_i(t)| 
           â‰¤âˆ‘_i âˆˆ J( Î»_0 Â· d_X (Î±(t), Î¾_i(t)) + Î»_1 ) + âˆ‘_i âˆ‰ J | ğ’œ_i | 
           â‰¤  |J| (Î»_0 Â· 2 t Ïµ + Î»_1) + D,
    
    which proves (<ref>) because |J| â‰¤(X). 
    
    
    Angle estimate.
    Let x=Î±(0).  Set A = _X(Î±(0), Î±(t))=t (latter equality since Î± is a geodesic), and B = _X(Î±(0), x_t), and C = _X(Î±(t), x_t).  Let Î¸Ì…_t 
    be the Euclidean angle at the vertex corresponding to x in the Euclidean comparison triangle with sides of length A,B,C, i.e. the comparison angle between Î±(t) and x_t at x.  Let 
    Î¸_t be the Alexandrov angle at x = Î±(0) between x_t and Î±(t), so that Î¸_tâ‰¤Î¸Ì…_t.   
    
    We can estimate Î¸Ì…_t using the law of cosines, starting with an estimate of C. Multiplying every term of (<ref>) by Î»_0 and choosing t sufficiently large yields
    
        C = d_X(Î±(t), x_t) â‰¤ 4 Î»_0^2 (X) Â·Ïµ t = K Ïµ t.
    
    Meanwhile, B can be estimated as follows:
    
        t(1-K Ïµ) 
         â‰¤_X(Î±(0),Î±(t))-_X(Î±(t),x_t))
        â‰¤_X(Î±(0),x_t) = B â‰¤ t.
    
    Here, the first inequality is by (<ref>), the second inequality is the triangle inequality, and the final inequality 
    holds because the projection  is 1â€“Lipschitz for the CAT(0) metric by LemmaÂ <ref>.  
    
    
    
    By  the cosine law and the CAT(0) inequality, we have
    
    
        2 AB cos(Î¸_t) â‰¥ 2AB cos(Î¸Ì…_t)=A^2 + B^2 - C^2.
    
    The equality is the cosine law applied to the Euclidean comparison triangle, and the inequality holds for the corresponding CAT(0) triangle.  We are interested in the former, since we will need a 
    bound on Î¸Ì…_t (which will incidentally bound Î¸_t).
    Substituting the bounds (<ref>) and (<ref>) into the cosine law shows that for all large t, we have
    
        2t^2cosÎ¸Ì…_t  â‰¥  t^2+t^2(1-K Ïµ)^2- t^2 (KÏµ)^2,
    
    which simplifies to
    cosÎ¸Ì…_t â‰¥ 
    1-K Ïµ. Since we have chosen Ïµâˆˆ (0, 45K ), this ensures that Î¸Ì…_t is a small angle; more precisely Î¸Ì…_t â‰¤cos^-1( 1- K Ïµ).
    
    Conclusion. 
    Since K Ïµ < 4/5, equationÂ (<ref>) implies 
    d_X(Î±(0), x_t) â‰¥ (1-K Ïµ) t > 1/5 t.
    Thus the sequence {x_t}_tâˆˆ is unbounded,
    and some subsequence converges to a point bâˆˆâ‹‚_i=0^kQ(v_i), as mentioned above.
    ByÂ <cit.>, which relates the Tits angle âˆ (a,b) to the Euclidean comparison angles Î¸Ì…_t, we have 
    
        âˆ (a,b)â‰¤liminf_tâ†’âˆÎ¸Ì…_t â‰¤cos^-1 (1 - K Ïµ) = f(Ïµ).
    
    Since we have already checked that f(Ïµ) < Ï€/2, this ensures  
     âˆ (a,b) â‰¤ f(Ïµ)<Ï€/2.  In particular, _T(a,b)=âˆ (a,b) â‰¤ f(Ïµ).
    
    
    
    Recall from PropositionÂ <ref>.(<ref>),(<ref>) that for each vâˆˆ(X), there is a radius r_v<Ï€/2 such that Q(v) is contained in the closed ball 
    BÌƒ_T((v), r_v) in the Tits metric.
    
    
    Let Ïµ_0 be the constant of LemmaÂ <ref>. Let f  (0, Ïµ_1) â†’ be the function from LemmaÂ <ref>.  Since lim_Ïµâ†’ 0 f(Ïµ) = 0, that lemma allows us to 
    choose a constant Ïµ_2 < Ïµ_1, depending  only on (X), so that f(Ïµ)+Ïµâ‰¤Ïµ_0 whenever 
    Ïµâ‰¤Ïµ_2.  
    For each Roller class w, define a thickening constantÏµ(w) = min{Ïµ_0/2 ,Ïµ_2, r_w/4} > 0.
    
    Since the constants Ïµ_0, Ïµ_2 depend only on (X), and the intrinsic radius r_w depends only on the (X)â€“orbit of w by CorollaryÂ <ref>,
    it follows that Ïµ(w) itself depends only on the the (X)â€“orbit of w.
    
    For every vâˆˆ(X), there exists a subset U(v)âŠ‚ X such that the following 
    hold:
    
      * Q(v)âŠ‚ U(v)âŠ‚ğ’©_Ïµ(v)(Q(v));
      * U(v) has diameter less than 3Ï€/4; 
     
      * U(v) is open;
      * U(v) is convex and contractible;
     
      * U(gv) = gU(v) for all g âˆˆ(X).
    
    Let Y be the Euclidean cone on X, with cone-point denoted 0.  
    ByÂ <cit.>, the usual cone metric _Y on Y has the 
    property that (Y,_Y) is a CAT(0) geodesic space.  We use the notation Î½_Î´(A) to denote the open Î´â€“neighborhood of a set A âŠ‚ Y in this CAT(0) metric.
    
    We identify X 
    with the unit sphere about 0 in Y. We also set Q = Q(v) for simplicity of notation. Recall from PropositionÂ <ref>.(<ref>) that the intrinsic radius of Q is r_v 
    âˆˆ [0, Ï€/2).
    
    The convex sub-cone Z = Z(v):  Let ZâŠ‚ Y be the subspace arising as the union of all rays in Y 
    emanating from 0 and passing through QâŠ‚ X.  We claim that 
    Z is convex in (Y,_Y).  Indeed, let x,yâˆˆ Z. Then x,y 
    respectively lie on rays Î±_x,Î±_y emanating from 0 and intersecting Q 
    in points x',y'.  By <cit.>, the rays Î±_x,Î±_y determine a convex sector S âŠ‚ Y 
    intersecting X in the unique Tits geodesic from x' to y', which lies in 
    Q by Tits convexity of Q.  Hence S lies in Z, and thus so does 
    the _Yâ€“geodesic from x to y, since x,yâˆˆ S.
    
    The horoball B = B(v):  Let  c=(v) be the circumcenter of Q = Q(v). Let Î± =Î±_c be the parametrized geodesic ray in Y such that Î±(0)=0 and Î±(1)=c.  Let p  Yâ†’ be the associated 
    horofunction, defined by 
    
        p(y)=lim_sâ†’âˆ[_Y(Î±(s),y)-s] .
     
    Let 
    t_0=cos r_v, which is positive since r_vâˆˆ[0,Ï€/2).
    
    Let B = B(v)=p^-1((-âˆ,-t_0]).  Recall from e.g.Â <cit.> that B is a convex 
    subset of Y.  Let K(v)=Bâˆ© Z. See FigureÂ <ref>.
    
    
    Q lies in K(v):  We claim that QâŠ‚ K(v).  Since Q is the unit sphere in Z by the definition of Y and Z, 
    it suffices to show that QâŠ‚ B.  To that end, fix qâˆˆ Q, and observe that 
    _Y(q,0)=1.  Let sâ‰« 0 and consider the convex Euclidean triangle in Y with vertices at 0,q,Î±(s).  The angle in this triangle at 0 is denoted 
    Î¸, and we note that Î¸â‰¤ r_v.  From the cosine law, we obtain 
    _Y(q,Î±(s))^2=s^2+1-2scosÎ¸.  Hence 
    
        p(q)=lim_sâ†’âˆ[âˆš(s^2+1-2scosÎ¸)-s]=-cosÎ¸â‰¤ - cos r_v = - t_0.
    
    Thus, by the definition of B, we have qâˆˆ B, as 
    required.  Since Zâˆ© X=Q, we have in fact shown that K(v)âˆ© 
    X=Q. 
    
    K(v) satisfies d(0,K(v)) = t_0:  We claim that K(v) is disjoint from the open t_0â€“ball in Y about 
    0.  Indeed, let bâˆˆ K(v).  Then p(b)â‰¤ -t_0.  Hence, for any fixed 
    Î´>0, and any sufficiently large s>0, we have 
    _Y(b,Î±(s))<s-t_0+Î´.  By the triangle inequality, sâ‰¤_Y(0,b)+s-t_0+Î´, i.e. _Y(0,b)>t_0-Î´.  Hence 
    _Y(b,0)â‰¥ t_0, as required.  At the same time, Î± = Î±_c is a parametrized geodesic ray and Î±(t_0) is a point of K(v) at distance exactly t_0 from 0, hence d(0,K_v) = t_0.
    
    
    The projection Ï– and the open set U'(v):  Let Ï–:Y âˆ–{0}â†’ X be the radial projection. Recall that Î½_Ï(0) is the open Ïâ€“neighborhood of 0. 
    We claim that for every 0 < Ïâ‰¤ 1, the restriction of Ï– to  Y âˆ–Î½_Ï(0) is 1/Ïâ€“Lipschitz. Indeed,  by <cit.>, it suffices to check this claim on a sector of ^2. In polar coordinates on ^2, the distance element ds satisfies ds^2 = dr^2 + r^2 dÎ¸^2, hence the projection Ï– rescales ds by a factor of at most r^-1, hence Ï– is 1/Ïâ€“Lipschitz when r â‰¥Ï. 
    
    Recall the constant Ïµ(v) defined in DefinitionÂ <ref>, and define a positive constant 
    
        Ïµ' = Ïµ'(v) = Ïµ(v) /1 + Ïµ(v) t_0 âˆˆ (0, t_0),
          which satisfies  Ïµ'/t_0 - Ïµ' = Ïµ(v).
    
    Let U'(v) = Î½_Ïµ' (K(v)) be the open Ïµ'â€“neighborhood 
    of K(v) in Y.  Since K(v) = B âˆ© Z is convex and Y is CAT(0), it follows that U'(v) is convex. Furthermore, U'(v) is open and disjoint from the ball of radius t_0 - Ïµ' about 
    0.  See FigureÂ <ref>.
    
    Definition and properties of U(v):
    Let U(v)=Ï–(U'(v))âŠ‚ X. We claim that this has all of the properties claimed in the lemma statement. First, since Q(v) âŠ‚ K(v) by construction, and Ï– is the identity map on X âŠ‚ Y, it follows that Q(v) = Ï–(K(v))âŠ‚ U(v).
    On the other hand, since d(0, U'(v)) â‰¥ t_0 - Ïµ',  the projection Ï– is 1/(t_0 - Ïµ')â€“Lipschitz on U'(v). Therefore, (<ref>) implies
    
        U(v) = Ï–(Î½_Ïµ' (K(v)) ) âŠ‚Î½_Ïµ(v) (Ï–(K(v))) =  Î½_Ïµ(v) (Q(v)),
    
    proving the first bullet of the lemma.
    
    Second, recall from DefinitionÂ <ref> that Ïµ(v) â‰¤ r_v / 4. Thus PropositionÂ <ref>.(<ref>) implies
    
        (U(v)) â‰¤(Q(v)) + 2Ïµ(v) â‰¤Ï€/2 + r_v/2 < Ï€/2 + Ï€/4 = 3Ï€/4.
    
    
    Third, observe that Ï– is an open map.  Indeed, 
    Y âˆ–{0} is homeomorphic to XÃ—(0,âˆ), and Ï– is 
    projection to the first factor, which is an open map. Thus U(v) = Ï–(U'(v)) is open.
    
    Fourth, it follows from <cit.> and the convexity of U'(v)  that U(v) is convex in X. Since U(v) has diameter less than Ï€, it is uniquely geodesic, hence contractible.
    
    Fifth, observe that all of the ingredients in the definition of U(v) are (X)â€“equivariant. Indeed, the intrinsic radius r_v is invariant under (X), hence the number t_0 = cos(r_v) is as well. Thus the definitions of the sub-cone Z(v), the horoball B(v), and the set K(v) = Z(v) âˆ© B(v) are all (X)â€“equivariant. The constant Ïµ'(v), defined in (<ref>) is invariant under (X), because both t_0 and Ïµ(v) are. It follows that U(v) = Ï–(Î½_Ïµ' (K(v)) ) is also (X)â€“equivariant.
    
    
    Recall that in SectionÂ <ref>, we have defined a simplicial complex ğ’©_T.
    By CorollaryÂ <ref>, ğ’©_T coincides with the nerve of the cover of X by the closed sets Q(v)  for v âˆˆ (X). By LemmasÂ <ref> andÂ <ref>,  the open sets U(v) for v âˆˆ (X) also cover X. 
    
    By analogy with DefinitionÂ <ref>, we define a simplicial complex ğ’_T with vertex set X, where vertices v_0, â€¦, v_n âˆˆ X span an nâ€“simplex if and only if â‹‚_i=0^n U(v_i)â‰ âˆ….
    The content of the following lemma is that ğ’_T is isomorphic to ğ’©_T.
     
    
    
    
    For Roller classes v_0, â€¦,v_n âˆˆ(X), we have â‹‚_i=0^n U(v_i)â‰ âˆ… if and only if 
    â‹‚_i=0^n Q(v_i)â‰ âˆ…. Consequently, the identity map (X) â†’(X) induces an (X)â€“equivariant simplicial isomorphism ğ’_T  â†’ğ’©_T.
    
    Observe that â‹‚_i=0^n Q(v_i)â‰ âˆ… trivially implies â‹‚_i=0^n U(v_i)â‰ âˆ…. 
    For the other direction, we assume â‹‚_i=0^n U(v_i) â‰ âˆ… and aim to show â‹‚_i=0^n Q(v_i)â‰ âˆ…. 
    
    We will argue by induction on n. 
    
     In the base case, n=1, suppose that U(v_0) âˆ© U(v_1) â‰ âˆ…. Since U(v_i) âŠ‚ğ’©_Ïµ(v_i)(Q(v_i)), and Ïµ(v_i) â‰¤Ïµ_0/2 by DefinitionÂ <ref>, it follows that there are points a_i âˆˆ Q(v_i) such that d_T(a_0, a_1) < Ïµ_0. But then LemmaÂ <ref> implies Q(v_0) âˆ© Q(v_1) â‰ âˆ…, proving the base case.
    
    For the inductive step, assume that â‹‚_i=0^n U(v_i) â‰ âˆ… and
    â‹‚_i=0^n-1Q(v_i)â‰ âˆ…. We claim that there is a Roller class w âˆˆ(X) such that â‹‚_i=0^n-1Q(v_i)=Q(w).
    
    By LemmaÂ <ref>, we have convex subcomplexes _0, â€¦, _n-1âŠ‚ X, such that Q(v_i) = _i 
    and â‹‚_i=0^n-1Q(v_i) = â‹‚_i=0^n-1_i. By LemmaÂ <ref>, the hyperplane 
    collection (_i) is a UBS. Furthermore, since each _i is convex, we have (â‹‚_i) 
    = â‹‚(_i), which is a UBS because â‹‚_i is unbounded. By LemmaÂ <ref>, the 
    UBS (â‹‚_i) represents a Roller class w', which means that  
    Q(w') =  â‹‚_i=0^n-1_i = â‹‚_i=0^n-1Q(v_i). Now, we let w = Ïˆ(Ï†(w')). Then 
    DefinitionÂ <ref> says that w âˆˆ(X), and PropositionÂ <ref>.<ref> says that 
    Q(w) = Q(w') = â‹‚_i=0^n-1Q(v_i), proving the Claim.
    
    Next, we claim that Q(v_n)âˆ© Q(w) â‰ âˆ…. Since Q(w) = â‹‚_i=0^n-1Q(v_i), this will complete the inductive step and prove the Lemma.
    
    Suppose for a contradiction that Q(v_n)âˆ© Q(w) = âˆ…. Then, by LemmaÂ <ref>, we have
    _T(Q(v_n),Q(w))>Ïµ_0.  Let Ïµ_2 be as in DefinitionÂ <ref>.
    Fix aâˆˆâ‹‚_i=0^n U(v_i) âŠ‚â‹‚_i=0^nğ’©_Ïµ(v_i)(Q(v_i)), which ensures that _T(a,Q(v_n))<Ïµ_2.  Since Ïµ(v_i) â‰¤Ïµ_2 for each v_i,  
    LemmaÂ <ref> implies _T(a,Q(w))<f(Ïµ_2).  
    Thus _T(Q(v_n),Q(w))<Ïµ_2+f(Ïµ_2) â‰¤Ïµ_0, a contradiction.  This proves the Claim and the equivalence â‹‚_i=0^n Q(v_i)â‰ âˆ…â‡”â‹‚_i=0^n U(v_i)â‰ âˆ….
    
    This gives the simplicial isomorphism ğ’_T â†’ğ’©_T. This isomorphism is (X)â€“equivariant, by CorollaryÂ <ref> 
    and PropositionÂ <ref>.
    
    
     Â§.Â§ Homotopy equivalence of X and ğ’©_T
    
    There is an  homotopy equivalence from  the simplicial complex ğ’©_T to X. 
    By CorollaryÂ <ref>, ğ’©_T is the nerve of the covering of X by the closed sets Q(v), where v varies over 
    (X).
    
    By PropositionÂ <ref>, X admits an open covering { U(v) : vâˆˆ(X) }, with each U(v) a 
    convex, uniquely geodesic subspace of X.  Hence, if v_0,â€¦,v_nâˆˆ(X), then either 
    â‹‚_i=0^nU(v_i)=âˆ…, or â‹‚_i=0^nU(v_i) is contractible. Let â„’_T be the nerve of this open covering. By the Equivariant Open Nerve TheoremÂ <ref>,
    there is an  homotopy equivalence â„’_T â†’ X.
    
    As above, let ğ’_T be the simplicial complex with one vertex for each vâˆˆ(X), with v_0,â€¦,v_n spanning an 
    nâ€“simplex whenever â‹‚_i=0^nU(v_i)â‰ âˆ….  Note that ğ’_T is not necessarily isomorphic to â„’_T, since we may have U(v_i)=U(v_j) for some pair v_i,v_j with iâ‰  j.  But ğ’_T is 
    homotopy-equivalent to â„’_T, which can be seen as follows.  The (X)â€“equivariant assignment 
    vâ†¦ U(v) (i.e. the surjection ğ’_T^(0)â†’â„’_T^(0)) determines an equivariant simplicial map ğ’_T â†’â„’_T such that the preimage of each 0â€“simplex U(v) is the full subcomplex of ğ’_T spanned by the set of w 
    with 
    U(v)=U(w).  Since any finite set of such w span a simplex of ğ’_T, this preimage is contractible: it is 
    homeomorphic to the cone on the link of any of its vertices.  Hence the map ğ’_T â†’â„’_T is a homotopy 
    equivalence, by Quillen's fiber theorem (see e.g.Â <cit.>).
    
    To conclude, recall that by LemmaÂ <ref>, we have an equivariant simplicial isomorphism ğ’_T â†’ğ’©_T. Hence we have a chain of  homotopy equivalences
    
        ğ’©_T  ğ’_T â„’_T  X.
    
    
     Â§.Â§ Cuboid generalization
    
    
    All of the results of this section have a straightforward generalization to the cuboid setting. In the following description, we refer to the notation introduced in SectionÂ <ref>.
    
    DefinitionÂ <ref> generalizes immediately to give a set of maximal â„“^2 visible Roller classes, namely ^Ï(X) âŠ‚^Ï(X). Following DefinitionÂ <ref>, we get a simplicial complex _T^Ï with vertex set ^Ï(X), where vertices v_0, â€¦, v_n span an nâ€“simplex if and only if â‹‚_i=1^n Q^Ï(v_i) â‰ âˆ…. Then, LemmasÂ <ref> andÂ <ref> generalize immediately because their proofs are assembled from the results of SectionÂ <ref>, and we have already checked that those results generalize to cuboids. Thus CorollaryÂ <ref> generalizes as well, and we learn that _T^Ï is the covering of ^Ï X by the closed sets {Q^Ï(v) : v âˆˆ^Ï(X) }.
    
    (Recall that RemarkÂ <ref> outlined an argument that (X) = ^Ï(X) for every admissible rescaling 
    Ï. It follows that (X) = ^Ï(X) as well.  The nerves _T and _T^Ï can then be 
    shown to coincide, as mentioned in RemarkÂ <ref>. However, we do not use this.)
    
    Moving ahead to SectionÂ <ref>, the results generalize as follows. The existence statement of LemmaÂ <ref> extends, with the modification that the constant Ïµ_0 depends on (X) and Ï. This is because the proof of LemmaÂ <ref> uses the constants Î»_0, Î»_1 of LemmaÂ <ref>, which needs to be replaced by the constants Î»_0^Ï, Î»_1^Ï of LemmaÂ <ref>. LemmaÂ <ref> extends to cuboids as well, because the proof of that lemma uses combinatorial arguments in combination with the d_X^Ïâ€“convexity of cubical convex hulls.
    Similarly, LemmaÂ <ref> extends: its proof works perfectly well in the cuboid metric d_X^Ï, once we substitute LemmaÂ <ref> for LemmaÂ <ref>. As above, the outputs of that lemma depend on both (X) and Ï. Combining these ingredients, we can follow DefinitionÂ <ref> to define a thickening constant Ïµ^Ï(w) > 0 for every Roller class w. This constant depends only Ï and the ^Ï(X)â€“orbit of w.
    
    PropositionÂ <ref> extends verbatim to cuboids. Indeed, its proof is a CAT(0) argument that takes place in the Euclidean cone on X, which works equally well in the Euclidean cone on ^Ï X. (The proof also uses PropositionÂ <ref>, which works for cuboids.) At the end of the lemma, we get a collection of open sets U^Ï(v) for v âˆˆ^Ï(X), which is invariant under ^Ï(X).
    
    By analogy with DefinitionÂ <ref>, we define a simplicial complex ğ’_T^Ï, where the simplices are defined by intersection patterns of the open sets U(v_i) for v_i âˆˆ^Ï(X). Now, LemmaÂ <ref> extends verbatim to give an ^Ï(X)â€“equivariant simplicial isomorphism ğ’_T^Ïâ†’_T^Ï. The proof of TheoremÂ <ref> also extends verbatim, because all of its ingredients extend. Thus we obtain the following cuboid extension of 
    TheoremÂ <ref>:
    
    
    Let Ï be a Gâ€“admissible hyperplane rescaling of X. Then there is a  homotopy homotopy equivalence _T^Ïâ†’^Ï X. 
    
    
    Â§ PROOF OF THE MAIN THEOREMS
    
    
     In this section, we prove TheoremÂ <ref>, which was stated in the Introduction. That is, we construct the following commutative diagram of  homotopy equivalences:
     X       ^       X  
       _      _   
          _ X      
    
    The homotopy equivalence X â†’ X will be proved in PropositionÂ <ref>, while the homotopy equivalence X â†’ X will be proved in CorollaryÂ <ref>. At the end of the section, we check that all of the arguments extend to cuboids, proving TheoremÂ <ref>.
    
    To prove CorollaryÂ <ref>, we first study a subcomplex of X.  
    
    
    Let X be the  subcomplex of X consisting of all simplices corresponding to chains 
    v_0â‰¤â‹¯â‰¤ 
    v_n such that v_iâˆˆ(X) for 0â‰¤ iâ‰¤ n. 
    
    For each vâˆˆ(X), let Î£_v be the connected subcomplex of X consisting of all simplices 
    corresponding to 
    chains v_0â‰¤â‹¯â‰¤ v_n for which:
    
      *  each v_iâˆˆ(X);
         
      * v_n = v.
    
    
     Â§.Â§ Closed cover of X
    
    
    Next, we show that the complexes Î£_v yield a closed covering of X, and use this covering to build a nerve.
    
    
    The set {Î£_v:vâˆˆ(X)} is a closed covering of X.  Moreover, for all 
    v,v_0,â€¦,v_nâˆˆ(X), we have the following:
    
      * Î£_v is finite.
         
      * Î£_v_i=Î£_v_j only if v_i=v_j.
         
      * â‹‚_i=0^nÎ£_v_i is either empty or contractible.
         
      *  For every g âˆˆ(X), we have g Î£_v = Î£_gv.
    
    Let w âˆˆ(X).  Then there exists v âˆˆ(X) with w â‰¤ v, and hence w âˆˆÎ£_v^(0).  Thus 
    {Î£_v:vâˆˆ(X)} is a closed covering of X.
    
    Let v be a (visible) Roller class. By CorollaryÂ <ref>, there are finitely many other classes w such that w â‰¤ v. This proves 
    assertionÂ <ref>. 
    
    
    
    Now suppose that v_i,v_j are (visible) Roller classes satisfying Î£_v_i=Î£_v_j.  Since v_j âˆˆÎ£_v_i, 
    we have v_jâ‰¤ v_i.  Likewise, v_i â‰¤ v_j.  Hence v_i=v_j, proving assertionÂ <ref>.
    
    Next, let v_0,â€¦,v_nâˆˆ(X) and suppose that â‹‚_i=0^nÎ£_v_iâ‰ âˆ….  First, note that 
    Î£_v_i=v_i L_v_i, where L_v_i (the link of v_i in Î£_v_i) is a subcomplex of X and  denotes the simplicial 
    join operation.   Hence Î£_v_i is topologically a cone, and is thus contractible.
    
    For each i, let ğ’±_i be a UBS representing v_i (recall DefinitionÂ <ref>).  Then 
    â‹‚_i=0^nğ’±_i is unidirectional and contains no facing triple, since those properties hold for each ğ’±_i and are inherited by subsets.  Second, â‹‚_i=0^nğ’±_i is inseparable, because each ğ’±_i is.
    
    Now, if u âˆˆâ‹‚_i=0^nÎ£_v_i is a 0â€“simplex, then u â‰¤ v_i for all i, so 
    u is represented by a UBS of the form â‰¼â‹‚_i=0^nğ’±_i.  
    Hence â‹‚_i=0^nğ’±_i is infinite. Combined with the above discussion, this shows that 
    â‹‚_i=0^nğ’±_i is a UBS.  Let v be the corresponding Roller class. Since â‰¼â‹‚_i=0ğ’±_i, we have u â‰¤ v.  
    
    Since each such u is â„“_2â€“visible, the set of visible Roller classes w with wâ‰¤ v is nonempty.  Hence there is a unique Roller class m such that mâ‰¤ v, and m 
    is â„“_2â€“visible, and m is â‰¤â€“maximal with those properties, by LemmaÂ <ref> and DefinitionÂ <ref>.  Since each uâˆˆâ‹‚_i=0^nÎ£_v_i satisfies uâ‰¤ mâˆˆ X, there is a subcomplex LâŠ‚ X such that â‹‚_i=0^nÎ£_v_i=mâ‹† L, so â‹‚_i=0^nÎ£_v_i is contractible in X.
    
    
    Finally, statement <ref> follows from the equivariance of (X) and the partial order â‰¤.
    
    Let ğ’©_ be the nerve of the closed covering {Î£_v:vâˆˆ(X)} of X.  By 
    LemmaÂ <ref>.<ref>, ğ’©_ has vertex-set (X), 
    and v_0,â€¦,v_n span an nâ€“simplex if and only if 
    â‹‚_i=0^nÎ£_v_iâ‰ âˆ…. By 
    LemmaÂ <ref>.<ref>, (X) acts by simplicial automorphisms on ğ’©_.
    
    Let v_0,â€¦,v_nâˆˆ(X).  Then 
    
        â‹‚_i=0^nÎ£_v_iâ‰ âˆ… â‡” â‹‚_i=0^nQ(v_i)â‰ âˆ….
    
    Consequently, there is an (X)â€“equivariant simplicial isomorphism ğ’©_â†’ğ’©_T.
    
    Suppose that there exists aâˆˆâ‹‚_i=0^nQ(v_i).  Then LemmaÂ <ref> says Ïˆ(a) â‰¤ v_i for all i.  Hence, by DefinitionÂ <ref>, we have Ïˆ(a)âˆˆÎ£_v_i for all i.  
    
    Conversely, suppose that there exists a vertex (i.e. a Roller class) wâˆˆâ‹‚_i=0^nÎ£_v_i.  Then w â‰¤ v_i 
    for all i, by definition.  Hence, by LemmaÂ <ref>, Q(w)âŠ‚ Q(v_i) for all i, from which it 
    follows that Ï†(w)âˆˆâ‹‚_i=0^nQ(v_i). 
    
    Finally, the simplicial isomorphism ğ’©_â†’ğ’©_T comes from identifying the 0â€“skeleta of ğ’©_  and ğ’©_T with (X).
    
    
     Â§.Â§ Homotopy equivalence between X and X
    
    We can now assemble the proof that X is homotopy equivalent to X. We do this in two propositions:
    
    
    
    There is an  homotopy equivalence  X â†’ X.
    
    Consider the covering {Î£_v:vâˆˆ(X)} of X by the subcomplexes Î£_v, coming from 
    LemmaÂ <ref>.  By DefinitionÂ <ref>, the nerve of this cover is  
    ğ’©_.  By LemmaÂ <ref>.<ref>, the intersection of any finite 
    collection of the Î£_v is either empty or contractible.  
    Hence, by the Equivariant Simplicial Nerve TheoremÂ <ref>, there is an  homotopy equivalence X â†’ğ’©_.
    
    By LemmaÂ <ref>, there is a simplicial isomorphism ğ’©_â†’ğ’©_T. Finally, by TheoremÂ <ref>, there is an  homotopy equivalence ğ’©_T â†’ X. 
    Putting it all together, we obtain a chain of  homotopy equivalences
    
        X ğ’©_ğ’©_T   X.
    
    The inclusion X â†ª X is an (X)â€“equivariant homotopy equivalence. Its homotopy inverse is an  deformation retraction X â†’ X.
    
    First, observe that since X is (X)â€“invariant by DefinitionÂ <ref>, and the set (X) is (X)â€“invariant by DefinitionÂ <ref>, the inclusion  X â†ª X is (X)â€“equivariant.
    
    In the remainder of the proof, we will construct a deformation retraction X â†’ 
    X that serves as a homotopy inverse to the inclusion X â†ª X. 
    
    Let w be an invisible Roller class (viewed as a 0â€“simplex of X). 
     By LemmaÂ <ref>, w is not minimal, so there exists a 
    minimal Roller class m with m < w.  Let n(w)â‰¥1 be the maximum length of a 
    chain of the form m < â‹¯ < w with m a minimal Roller class. 
    
    Let D be the maximal number such that there exists an invisible Roller class w with n(w)=D. By 
    RemarkÂ <ref>, every simplex in X has at most X vertices, hence D â‰¤ X.
    
    
    Let I_n be the set of invisible Roller classes v with n(v)=n.
    Then 
    
        ( X)^(0)= ( X)^(0)âŠ”_n=1^ DI_n.
      
    Let ( X)_0= X.  For 1â‰¤ Nâ‰¤  D, let ( X)_N be the subcomplex spanned by 
    ( X)^(0)âŠ”_n=1^NI_n, so
    
        X = ( X)_0 âŠ‚( X)_1âŠ‚â‹¯âŠ‚( X)_D= X.
    
    
    Given a Roller class w and a positive integer n â‰¤ D, define the open starst_n(w) to be the union of {w} and all of the 
    open simplices of ( X)_n whose 
    closures contain w.  Let St_n(w) be the union of all (closed) simplices of 
    ( X)_n containing w.  Define the  (downward) linkL_n(w)=St_n(w) âˆ– st_n(w).
    
    
    For w âˆˆ  I_n, we have L_n(w) âŠ‚ ( X)_n-1.
    
    
    Let wâˆˆ I_n âŠ‚ ( X)_n.  Let Ïƒ be a maximal simplex of ( X)_n 
    containing w and lying in ( X)_n.  Let v_0<â‹¯<v_m be the 
    corresponding chain, with w=v_i for some i.  Since n(w)=n, the chain 
    v_0 <â‹¯<v_i has length at most n. 
    
    First, consider v_j for j<i.  If v_j is visible, then v_jâˆˆ( X)_0âŠ‚( X)_n-1.  If 
    v_j is invisible, then since v_0 <â‹¯ < v_j is a chain of length less than 
    n, and Ïƒ is maximal, n(v_j)<n, hence v_jâˆˆ( X)_n-1.  
    
    Next, consider v_j for j>i.  If v_j is visible, then v_jâˆˆ( X)_0âŠ‚( X)_n-1.  If 
    v_j is invisible, then v_jâˆ‰I_n, since there is a chain 
    v_0 <â‹¯< v_j of length more than n = n(v_i), which would contradict the containment ÏƒâŠ‚ ( X)_n.
    
    Hence the simplex Ïƒ' corresponding to the chain 
    v_0<â‹¯<v_i-1<v_i+1<â‹¯ <v_m lies in ( X)_n-1.  
    This proves the claim.
    
    Contractibility of links:  Now, fix w âˆˆ  I_n. We will show that L_n(w) is 
    contractible.  Establishing this involves several claims, leading up to ClaimÂ <ref>.
    
    
    For a minimal Roller class with mâˆˆ L_n(w), let St(m) = â‹ƒ_n St_n(m) denote the star of m in X.  Then:
    
      * L_n(w)âˆ© St(m) is topologically a cone with cone-point m.
         
      * L_n(w) is the union of the subcomplexes L_n(w)âˆ© St(m), as m varies over  the finitely many minimal Roller classes with 
    m â‰¤ w.
    
    
    Let L(m) denote the link of m in X. Then, by definition, St(m) decomposes as a join: St(m)=m  L(m).  Moreover, mâˆˆ L_n(w), so 
    
        L_n(w)âˆ© St(m)=  L_n(w) âˆ© (m  L(m)) = m (L_n(w)âˆ© L(m)),
    
     which proves the first assertion.
    
    By CorollaryÂ <ref>, there are finitely many minimal Roller classes m â‰¤ w. For each such m, we clearly have L_n(w)âˆ© St(m)âŠ‚ L_n(w).  Conversely, if vâˆˆ L_n(w), 
    then there exists a minimal class m such that m â‰¤ v and m â‰¤ w, hence vâˆˆ L_n(w)âˆ© St(m).  This proves  the claim.
    
    
    
    Let m_0, â€¦, m_k be distinct minimal Roller classes with m_i < w for all i.  Then â‹‚_i=0^k St(m_i) âˆ© L_n(w) is  topologically a cone, and is in particular nonempty.
    
    
    By 
    LemmaÂ <ref>, each m_i is â„“^2â€“visible, so we can choose CAT(0) geodesic rays Î¾_i:[0,âˆ)â†’ X such 
    that Î¾_i(0)=Î¾_j(0) for all i, and such that Î¾_i(âˆ)=Ï†(m_i) for each i.  
    For each i, define â„³_i=(Î¾_i), a UBS representing m_i.
    Since m_i is minimal 
    for all i, LemmaÂ <ref> implies the intersection â„³_iâˆ©â„³_j is finite whenever i â‰  j.  
    Moving the common basepoint Î¾_1(0) = â€¦ = Î¾_k(0) ensures that â„³_iâˆ©â„³_j=âˆ… for all i 
    â‰  j, and that each â„³_i is the inseparable closure of an infinite descending chain.  Indeed, by moving the 
    basepoint across each of the finitely many hyperplanes appearing in some â„³_iâˆ©â„³_j, we arrange the 
    first property, and the inseparable closure property holds by LemmaÂ <ref>, LemmaÂ <ref>, 
    and minimality of the m_i.
    
    Let ğ’œ be a UBS representing w. Since m_i â‰¤ w for all i, we have â„³_i â‰¼ğ’œ for each i.
    Thus it is readily checked that â‹ƒ_i=0^kâ„³_i is a UBS. 
    
    Consider a pair of indices iâ‰  j. Then since â‹ƒ_i=0^kâ„³_i is unidirectional and â„³_i âˆ©â„³_j = âˆ…,  
    any pair of hyperplanes  Ä¥_i âˆˆâ„³_i and Ä¥_j âˆˆâ„³_j must cross. Indeed, Ä¥_i â‰ Ä¥_j, and Ä¥_i is the base of a 
    chain in _i, and Ä¥_j is the base of a chain in _j.  If Ä¥_i, Ä¥_j did not cross, then the union of this pair of chains 
    would violate unidirectionality of _iâˆ©_j. 
    
    Thus, by LemmaÂ <ref>, the convex hull of 
    â‹ƒ_i=0^kÎ¾_i is isometric to âˆ_i=0^kY_i, where Y_i is the 
    cubical convex hull of Î¾_i.  For each t>0, let x_t be the image of (Î¾_0(t),â€¦,Î¾_k(t)) under the isometric 
    embedding âˆ_i=0^kY_iâ†’ X.  Then segments joining the basepoint to the points x_t converge uniformly on compact sets to a geodesic ray representing a point bâˆˆ X with the property 
    that Ïˆ(b)=u is 
    represented by = _i=0^kâ„³_i.  Hence u is visible by DefinitionÂ <ref>.  Moreover, m_i â‰¤ u â‰¤ w 
    for all i. To complete the proof of the claim, we will show that u is the promised cone point of â‹‚_i=0^k St(m_i) âˆ© L_n(w).
    
    For each i, the fact that  m_i â‰¤ u implies uâˆˆ St(m_i).  On the other hand, uâ‰  w since u is visible but w is 
    not.  Thus u < w, so uâˆˆ L_n(w).  Thus far, we have shown that â‹‚_i=0^k St(m_i) âˆ© L_n(w) â‰ âˆ…. 
    Now, suppose vâˆˆ L_n(w)âˆ© St(m_i) for all i.  To complete the claim, we must show that u and v are â‰¤â€“comparable. By definition, m_i â‰¤ v for all i, hence â„³_i â‰¼ for all i, where  is a UBS representing . Therefore, = _i=0^kâ„³_i â‰¼, which implies u â‰¤ v. Thus â‹‚_i=0^k St(m_i) âˆ© L_n(w) is a cone with cone point u, completing ClaimÂ <ref>.
    
    
    L_n(w) is contractible. 
    
    
    By ClaimÂ <ref>, L_n(w) is a finite union of subcomplexes L_n(w)âˆ© St(m), where m varies over the minimal 
    Roller classes satisfying m â‰¤ w.  By ClaimÂ <ref>, any collection of the L_n(w)âˆ© St(m) 
    intersect in a contractible subcomplex.  Hence, by the Simplicial Nerve TheoremÂ <ref>, 
    L_n(w) is homotopy equivalent to the nerve of this covering. (We do not need to check equivariance at this step.) But, since any collection of the L_n(w)âˆ© St(m) 
    have nonempty intersection, this nerve is a finite 
    simplex and thus contractible.  Hence L_n(w) is contractible.
    
    
    
    Conclusion:  We have shown that the following hold for 1â‰¤ 
    nâ‰¤ D:
    
      *  ClaimÂ <ref> says that for each vertex vâˆˆ( X)_n âˆ– ( X)_n-1, the link in ( X)_n of 
    v is contained in ( X)_n-1;
    
      *  ClaimÂ <ref> says that for each vertex vâˆˆ( X)_n âˆ– ( X)_n-1, the link in ( X)_n of 
    v is contractible.
    
    The first fact says that the open stars st_n(v) of the vertices 
    vâˆˆ( X)_n âˆ– ( X)_n-1 are pairwise disjoint.  Together with the second 
    fact, this implies that ( X)_n is homotopy equivalent to 
    
        ( X)_n-1  =   ( X)_n âˆ–( â‹ƒ_vâˆˆ( X)_n^(0)âˆ– ( X)_n-1^(0)st_n(v) ).
    
    It follows that we can independently deformation retract the various open stars st_n(v) to the corresponding links L_n(v) to get a deformation retraction ( X)_nâ†’( X)_n-1 that is a homotopy inverse for the inclusion.
    Composing these retractions (for 1â‰¤ nâ‰¤ D) gives the desired deformation retraction X â†’ X. 
    
    Finally, recall from the discussion after DefinitionÂ <ref> that every homotopy inverse of a (X)â€“equivariant inclusion X â†’ X  is itself an  homotopy equivalence. Thus we have an  deformation retraction X â†’ X.
    
    
    
    Combining PropositionsÂ <ref> andÂ <ref> gives a proof of half of TheoremÂ <ref>.
    
    
    
    There is an  homotopy equivalence X â†’ X.
    
    
     Â§.Â§ Homotopy equivalence between X and X
    
    
    
    The following proposition proves the homotopy equivalence of the simplicial boundary and the simplicial Roller boundary, completing the proof of TheoremÂ <ref>.
    
    
    There is an  homotopy equivalence X â†’ X.
    
    Let Ïƒ be a maximal simplex of X, corresponding to a class [_Ïƒ] âˆˆğ’°â„¬ğ’®(X). Then, by TheoremÂ <ref>, v_Ïƒ = ([_Ïƒ]) is a maximal Roller class.
    
    Let ğ’œ be the nerve of the covering of X by  maximal simplices.  Now, since any 
    collection of maximal simplices intersect in âˆ… or a simplex, and simplices are contractible, 
    the Equivariant Simplicial Nerve TheoremÂ <ref>
    provides an  homotopy equivalence X â†’ğ’œ.
    
    Now, for each maximal Roller class v, consider the subcomplex Î¥_v of X consisting of all simplices 
    corresponding to chains in which v is the maximal element.  Note that the set of such Î¥_v is a cover of X.  
    
    A simpler version of the proof of LemmaÂ <ref> implies that for all finite collections 
    { v_1,â€¦, v_n } of maximal Roller classes, â‹‚_i=1^nÎ¥_v_i is empty or contractible.  Indeed, suppose this 
    intersection is nonempty.  Exactly as in the proof of LemmaÂ <ref>, each v_i corresponds 
    to a commensurability class [ğ’±_i] of UBSes whose intersection is a UBS ğ’±, which in turn determines a 
    â‰¤â€“maximal Roller class v such that vâ‰¤ v_i for all i.  As in LemmaÂ <ref>, 
    this implies that â‹‚_i=1^nÎ¥_v_i is a cone with cone-point v.  (In the context of 
    LemmaÂ <ref>, there is an additional step to check that v is visible, but that is 
    unnecessary here since we are working in all of X rather than in ^âˆ¢ X.)
    
    Let â„¬ be the nerve of the covering of 
    X by the subcomplexes Î¥_v, as v varies over the maximal Roller classes. Observe that the assignment v â†¦Î¥_v is a bijection from the set of maximal Roller classes to â„¬^(0). By TheoremÂ <ref>, as above, there is an  homotopy equivalence X â†’â„¬.
    
    
    To conclude, we will show that ğ’œ and â„¬ are equivariantly isomorphic.  The vertex set of ğ’œ is the set of maximal simplices 
    Ïƒ of X, so we may define a function f ğ’œ^(0)â†’â„¬^(0) via the composition
    
        Ïƒâ†¦ [_Ïƒ] â†¦ v_Ïƒâ†¦Î¥_v_Ïƒ,
    
    where the middle arrow is the equivariant map  of TheoremÂ <ref>.  Since both Ïƒ and v_Ïƒ are maximal by definition, the map f is a bijection by TheoremÂ <ref>.<ref>. Every arrow is (X)â€“equivariant by construction.
    
    
    To extend f to a simplicial isomorphism f ğ’œâ†’â„¬, it suffices to check that for all maximal simplices 
    Ïƒ_0,â€¦,Ïƒ_n of X, we have â‹‚_i=0^nÏƒ_iâ‰ âˆ… if and only if 
    â‹‚_i=0^nÎ¥_v_Ïƒ_iâ‰ âˆ…; that this is sufficient follows since ğ’œ is the nerve of the covering of X by maximal simplices and â„¬ is the nerve 
    of the covering of X by the subcomplexes Î¥_v.  
    
    Suppose that â‹‚_i=0^nÏƒ_iâ‰ âˆ….  Let ğ’±_i be a UBS representing Ïƒ_i.  So, ğ’±_i also represents the corresponding Roller class f(Ïƒ_i).  Let 
    ğ’±=â‹‚_i=0^nğ’±_i, and note that ğ’± is infinite.  Then by RemarkÂ <ref>, ğ’± is an â„“^1â€“visible UBS. Hence 
    ğ’± represents a Roller class w such that wâ‰¤ v_Ïƒ_i for all i.  Thus 
    â‹‚_i=0^nÎ¥_v_Ïƒ_i contains w.  The converse is similar.  Hence f extends to an isomorphism, and 
    it follows that 
    
        X ğ’œâ„¬ X
    
    is an  homotopy equivalence.
    
    
     Â§.Â§ Cuboid generalization
     We can now conclude the proof of 
    TheoremÂ <ref>.
    
    
    Let G be a group acting on X by cubical automorphisms, and let Ï be a Gâ€“admissible rescaling of X, with rescaled metric d_X^Ï. Recall from DefinitionÂ <ref> that the action of G factors through ^Ï(X). In SectionÂ <ref>, we have checked that all of the constructions and results about the Tits boundary X also apply to ^Ï X, the Tits boundary of the rescaled metric (X, d_X^Ï), in a Gâ€“equivariant way.
    
    In SectionÂ <ref>, we have checked that the constructions of open and closed nerves for X also work for ^Ï X. In particular, by TheoremÂ <ref>, there is a  homotopy equivalence between ^Ï X and the nerve
     _T^Ï of the closed cover  {Q^Ï(v) : v âˆˆ^Ï(X)}.
     
    Now, we inspect the results of this section. In LemmaÂ <ref>, one simply needs to replace (X) by ^Ï(X) and (X) by ^Ï(X); the same exact proof then applies. 
    In DefinitionÂ <ref>, replacing (X) by ^Ï(X) yields a nerve _^Ï. Then the proof of LemmaÂ <ref> extends verbatim to give an ^Ï(X)â€“equivariant simplicial isomorphism _^Ïâ†’_T^Ï. PropositionÂ <ref> extends verbatim, because its proof is a top-level assembly of previous results. Similarly, PropositionÂ <ref> extends immediately to cuboids, because its proof is a topological argument about simplicial complexes. (The proof of PropositionÂ <ref> does use several lemmas from SectionsÂ <ref> andÂ <ref>, particularly in ClaimÂ <ref>, but all of those lemmas have been extended to cuboids. Compare RemarkÂ <ref>.) Combining the cuboid versions of PropositionsÂ <ref> andÂ <ref> gives a  homotopy equivalence X â†’^Ï X.
    
    Finally, note that the  homotopy equivalence X â†’ X established in PropositionÂ <ref> is also a  homotopy equivalence, because G acts by cubical automorphisms. Thus we have both of the  homotopy equivalences claimed in the theorem.
    amsalpha